const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./WebRTCView-D4ltvR8q.js","./DetectionOverlay-Dm1hiE76.js","./LiveView-Knzss1em.js","./LoadingIndicator-C8zY-_dD.js","./RecordingsView-P6SOlVPp.js","./fetch-utils-GN-4zfXA.js","./TimelineView-516kV7ag.js","./SettingsView-kpuWY95R.js","./StreamsView-BrCYI90M.js","./SystemView-DYNBiZyH.js","./LoginView-DDkBfhKS.js","./UsersView-HFTpPmEh.js"])))=>i.map(i=>d[i]);
var Pe=Object.freeze,$t=Object.defineProperty;var R=(o,e)=>Pe($t(o,"raw",{value:Pe(e||o.slice())}));(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();const Dt="modulepreload",Tt=function(o,e){return new URL(o,e).href},Ne={},P=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){const i=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),d=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(t.map(c=>{if(c=Tt(c,n),c in Ne)return;Ne[c]=!0;const u=c.endsWith(".css"),l=u?'[rel="stylesheet"]':"";if(!!n)for(let m=i.length-1;m>=0;m--){const g=i[m];if(g.href===c&&(!u||g.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(c,'"]').concat(l)))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Dt,u||(h.as="script"),h.crossOrigin="",h.href=c,d&&h.setAttribute("nonce",d),document.head.appendChild(h),u)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error("Unable to preload CSS for ".concat(c))))})}))}function r(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})};var ae,w,st,J,Le,rt,it,lt,ve,pe,_e,Y={},at=[],It=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ce=Array.isArray;function U(o,e){for(var t in e)o[t]=e[t];return o}function xe(o){o&&o.parentNode&&o.parentNode.removeChild(o)}function be(o,e,t){var n,s,r,i={};for(r in e)r=="key"?n=e[r]:r=="ref"?s=e[r]:i[r]=e[r];if(arguments.length>2&&(i.children=arguments.length>3?ae.call(arguments,2):t),typeof o=="function"&&o.defaultProps!=null)for(r in o.defaultProps)i[r]===void 0&&(i[r]=o.defaultProps[r]);return ne(o,i,n,s,null)}function ne(o,e,t,n,s){var r={type:o,props:e,key:t,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s!=null?s:++st,__i:-1,__u:0};return s==null&&w.vnode!=null&&w.vnode(r),r}function Z(o){return o.children}function G(o,e){this.props=o,this.context=e}function Q(o,e){if(e==null)return o.__?Q(o.__,o.__i+1):null;for(var t;e<o.__k.length;e++)if((t=o.__k[e])!=null&&t.__e!=null)return t.__e;return typeof o.type=="function"?Q(o):null}function ct(o){var e,t;if((o=o.__)!=null&&o.__c!=null){for(o.__e=o.__c.base=null,e=0;e<o.__k.length;e++)if((t=o.__k[e])!=null&&t.__e!=null){o.__e=o.__c.base=t.__e;break}return ct(o)}}function Me(o){(!o.__d&&(o.__d=!0)&&J.push(o)&&!ie.__r++||Le!==w.debounceRendering)&&((Le=w.debounceRendering)||rt)(ie)}function ie(){for(var o,e,t,n,s,r,i,a=1;J.length;)J.length>a&&J.sort(it),o=J.shift(),a=J.length,o.__d&&(t=void 0,s=(n=(e=o).__v).__e,r=[],i=[],e.__P&&((t=U({},n)).__v=n.__v+1,w.vnode&&w.vnode(t),ke(e.__P,t,n,e.__n,e.__P.namespaceURI,32&n.__u?[s]:null,r,s!=null?s:Q(n),!!(32&n.__u),i),t.__v=n.__v,t.__.__k[t.__i]=t,ht(r,t,i),t.__e!=s&&ct(t)));ie.__r=0}function dt(o,e,t,n,s,r,i,a,d,c,u){var l,f,h,m,g,v,p=n&&n.__k||at,_=e.length;for(d=Pt(t,e,p,d,_),l=0;l<_;l++)(h=t.__k[l])!=null&&(f=h.__i===-1?Y:p[h.__i]||Y,h.__i=l,v=ke(o,h,f,s,r,i,a,d,c,u),m=h.__e,h.ref&&f.ref!=h.ref&&(f.ref&&Ce(f.ref,null,h),u.push(h.ref,h.__c||m,h)),g==null&&m!=null&&(g=m),4&h.__u||f.__k===h.__k?d=ut(h,d,o):typeof h.type=="function"&&v!==void 0?d=v:m&&(d=m.nextSibling),h.__u&=-7);return t.__e=g,d}function Pt(o,e,t,n,s){var r,i,a,d,c,u=t.length,l=u,f=0;for(o.__k=new Array(s),r=0;r<s;r++)(i=e[r])!=null&&typeof i!="boolean"&&typeof i!="function"?(d=r+f,(i=o.__k[r]=typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?ne(null,i,null,null,null):ce(i)?ne(Z,{children:i},null,null,null):i.constructor===void 0&&i.__b>0?ne(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=o,i.__b=o.__b+1,a=null,(c=i.__i=Nt(i,t,d,l))!==-1&&(l--,(a=t[c])&&(a.__u|=2)),a==null||a.__v===null?(c==-1&&(s>u?f--:s<u&&f++),typeof i.type!="function"&&(i.__u|=4)):c!=d&&(c==d-1?f--:c==d+1?f++:(c>d?f--:f++,i.__u|=4))):o.__k[r]=null;if(l)for(r=0;r<u;r++)(a=t[r])!=null&&(2&a.__u)==0&&(a.__e==n&&(n=Q(a)),mt(a,a));return n}function ut(o,e,t){var n,s;if(typeof o.type=="function"){for(n=o.__k,s=0;n&&s<n.length;s++)n[s]&&(n[s].__=o,e=ut(n[s],e,t));return e}o.__e!=e&&(e&&o.type&&!t.contains(e)&&(e=Q(o)),t.insertBefore(o.__e,e||null),e=o.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Nt(o,e,t,n){var s,r,i=o.key,a=o.type,d=e[t];if(d===null&&o.key==null||d&&i==d.key&&a===d.type&&(2&d.__u)==0)return t;if(n>(d!=null&&(2&d.__u)==0?1:0))for(s=t-1,r=t+1;s>=0||r<e.length;){if(s>=0){if((d=e[s])&&(2&d.__u)==0&&i==d.key&&a===d.type)return s;s--}if(r<e.length){if((d=e[r])&&(2&d.__u)==0&&i==d.key&&a===d.type)return r;r++}}return-1}function We(o,e,t){e[0]=="-"?o.setProperty(e,t!=null?t:""):o[e]=t==null?"":typeof t!="number"||It.test(e)?t:t+"px"}function oe(o,e,t,n,s){var r;e:if(e=="style")if(typeof t=="string")o.style.cssText=t;else{if(typeof n=="string"&&(o.style.cssText=n=""),n)for(e in n)t&&e in t||We(o.style,e,"");if(t)for(e in t)n&&t[e]===n[e]||We(o.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")r=e!=(e=e.replace(lt,"$1")),e=e.toLowerCase()in o||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),o.l||(o.l={}),o.l[e+r]=t,t?n?t.t=n.t:(t.t=ve,o.addEventListener(e,r?_e:pe,r)):o.removeEventListener(e,r?_e:pe,r);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in o)try{o[e]=t!=null?t:"";break e}catch(i){}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?o.removeAttribute(e):o.setAttribute(e,e=="popover"&&t==1?"":t))}}function Ae(o){return function(e){if(this.l){var t=this.l[e.type+o];if(e.u==null)e.u=ve++;else if(e.u<t.t)return;return t(w.event?w.event(e):e)}}}function ke(o,e,t,n,s,r,i,a,d,c){var u,l,f,h,m,g,v,p,_,N,x,I,T,H,W,A,O,k=e.type;if(e.constructor!==void 0)return null;128&t.__u&&(d=!!(32&t.__u),r=[a=e.__e=t.__e]),(u=w.__b)&&u(e);e:if(typeof k=="function")try{if(p=e.props,_="prototype"in k&&k.prototype.render,N=(u=k.contextType)&&n[u.__c],x=u?N?N.props.value:u.__:n,t.__c?v=(l=e.__c=t.__c).__=l.__E:(_?e.__c=l=new k(p,x):(e.__c=l=new G(p,x),l.constructor=k,l.render=Mt),N&&N.sub(l),l.props=p,l.state||(l.state={}),l.context=x,l.__n=n,f=l.__d=!0,l.__h=[],l._sb=[]),_&&l.__s==null&&(l.__s=l.state),_&&k.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=U({},l.__s)),U(l.__s,k.getDerivedStateFromProps(p,l.__s))),h=l.props,m=l.state,l.__v=e,f)_&&k.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),_&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(_&&k.getDerivedStateFromProps==null&&p!==h&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(p,x),!l.__e&&(l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(p,l.__s,x)===!1||e.__v==t.__v)){for(e.__v!=t.__v&&(l.props=p,l.state=l.__s,l.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(E){E&&(E.__=e)}),I=0;I<l._sb.length;I++)l.__h.push(l._sb[I]);l._sb=[],l.__h.length&&i.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(p,l.__s,x),_&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(h,m,g)})}if(l.context=x,l.props=p,l.__P=o,l.__e=!1,T=w.__r,H=0,_){for(l.state=l.__s,l.__d=!1,T&&T(e),u=l.render(l.props,l.state,l.context),W=0;W<l._sb.length;W++)l.__h.push(l._sb[W]);l._sb=[]}else do l.__d=!1,T&&T(e),u=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++H<25);l.state=l.__s,l.getChildContext!=null&&(n=U(U({},n),l.getChildContext())),_&&!f&&l.getSnapshotBeforeUpdate!=null&&(g=l.getSnapshotBeforeUpdate(h,m)),A=u,u!=null&&u.type===Z&&u.key==null&&(A=ft(u.props.children)),a=dt(o,ce(A)?A:[A],e,t,n,s,r,i,a,d,c),l.base=e.__e,e.__u&=-161,l.__h.length&&i.push(l),v&&(l.__E=l.__=null)}catch(E){if(e.__v=null,d||r!=null)if(E.then){for(e.__u|=d?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;r[r.indexOf(a)]=null,e.__e=a}else for(O=r.length;O--;)xe(r[O]);else e.__e=t.__e,e.__k=t.__k;w.__e(E,e,t)}else r==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):a=e.__e=Lt(t.__e,e,t,n,s,r,i,d,c);return(u=w.diffed)&&u(e),128&e.__u?void 0:a}function ht(o,e,t){for(var n=0;n<t.length;n++)Ce(t[n],t[++n],t[++n]);w.__c&&w.__c(e,o),o.some(function(s){try{o=s.__h,s.__h=[],o.some(function(r){r.call(s)})}catch(r){w.__e(r,s.__v)}})}function ft(o){return typeof o!="object"||o==null?o:ce(o)?o.map(ft):U({},o)}function Lt(o,e,t,n,s,r,i,a,d){var c,u,l,f,h,m,g,v=t.props,p=e.props,_=e.type;if(_=="svg"?s="http://www.w3.org/2000/svg":_=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),r!=null){for(c=0;c<r.length;c++)if((h=r[c])&&"setAttribute"in h==!!_&&(_?h.localName==_:h.nodeType==3)){o=h,r[c]=null;break}}if(o==null){if(_==null)return document.createTextNode(p);o=document.createElementNS(s,_,p.is&&p),a&&(w.__m&&w.__m(e,r),a=!1),r=null}if(_===null)v===p||a&&o.data===p||(o.data=p);else{if(r=r&&ae.call(o.childNodes),v=t.props||Y,!a&&r!=null)for(v={},c=0;c<o.attributes.length;c++)v[(h=o.attributes[c]).name]=h.value;for(c in v)if(h=v[c],c!="children"){if(c=="dangerouslySetInnerHTML")l=h;else if(!(c in p)){if(c=="value"&&"defaultValue"in p||c=="checked"&&"defaultChecked"in p)continue;oe(o,c,null,h,s)}}for(c in p)h=p[c],c=="children"?f=h:c=="dangerouslySetInnerHTML"?u=h:c=="value"?m=h:c=="checked"?g=h:a&&typeof h!="function"||v[c]===h||oe(o,c,h,v[c],s);if(u)a||l&&(u.__html===l.__html||u.__html===o.innerHTML)||(o.innerHTML=u.__html),e.__k=[];else if(l&&(o.innerHTML=""),dt(e.type==="template"?o.content:o,ce(f)?f:[f],e,t,n,_=="foreignObject"?"http://www.w3.org/1999/xhtml":s,r,i,r?r[0]:t.__k&&Q(t,0),a,d),r!=null)for(c=r.length;c--;)xe(r[c]);a||(c="value",_=="progress"&&m==null?o.removeAttribute("value"):m!==void 0&&(m!==o[c]||_=="progress"&&!m||_=="option"&&m!==v[c])&&oe(o,c,m,v[c],s),c="checked",g!==void 0&&g!==o[c]&&oe(o,c,g,v[c],s))}return o}function Ce(o,e,t){try{if(typeof o=="function"){var n=typeof o.__u=="function";n&&o.__u(),n&&e==null||(o.__u=o(e))}else o.current=e}catch(s){w.__e(s,t)}}function mt(o,e,t){var n,s;if(w.unmount&&w.unmount(o),(n=o.ref)&&(n.current&&n.current!==o.__e||Ce(n,null,e)),(n=o.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(r){w.__e(r,e)}n.base=n.__P=null}if(n=o.__k)for(s=0;s<n.length;s++)n[s]&&mt(n[s],e,t||typeof o.type!="function");t||xe(o.__e),o.__c=o.__=o.__e=void 0}function Mt(o,e,t){return this.constructor(o,t)}function Wt(o,e,t){var n,s,r,i;e==document&&(e=document.documentElement),w.__&&w.__(o,e),s=(n=typeof t=="function")?null:t&&t.__k||e.__k,r=[],i=[],ke(e,o=(!n&&t||e).__k=be(Z,null,[o]),s||Y,Y,e.namespaceURI,!n&&t?[t]:s?null:e.firstChild?ae.call(e.childNodes):null,r,!n&&t?t:s?s.__e:e.firstChild,n,i),ht(r,o,i)}ae=at.slice,w={__e:function(o,e,t,n){for(var s,r,i;e=e.__;)if((s=e.__c)&&!s.__)try{if((r=s.constructor)&&r.getDerivedStateFromError!=null&&(s.setState(r.getDerivedStateFromError(o)),i=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(o,n||{}),i=s.__d),i)return s.__E=s}catch(a){o=a}throw o}},st=0,G.prototype.setState=function(o,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=U({},this.state),typeof o=="function"&&(o=o(U({},t),this.props)),o&&U(t,o),o!=null&&this.__v&&(e&&this._sb.push(e),Me(this))},G.prototype.forceUpdate=function(o){this.__v&&(this.__e=!0,o&&this.__h.push(o),Me(this))},G.prototype.render=Z,J=[],rt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,it=function(o,e){return o.__v.__b-e.__v.__b},ie.__r=0,lt=/(PointerCapture)$|Capture$/i,ve=0,pe=Ae(!1),_e=Ae(!0);const gt=Object.freeze(Object.defineProperty({__proto__:null,Component:G,Fragment:Z,createElement:be,h:be,get options(){return w},render:Wt},Symbol.toStringTag,{value:"Module"}));var pt,ye,_t,At=[];function Rt(o,e,t){var n,s,r,i={};for(r in e)r=="key"?n=e[r]:r=="ref"?s=e[r]:i[r]=e[r];if(arguments.length>2&&(i.children=arguments.length>3?pt.call(arguments,2):t),typeof o=="function"&&o.defaultProps!=null)for(r in o.defaultProps)i[r]===void 0&&(i[r]=o.defaultProps[r]);return Ht(o,i,n,s,null)}function Ht(o,e,t,n,s){var r={type:o,props:e,key:t,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s==null?++_t:s,__i:-1,__u:0};return ye.vnode!=null&&ye.vnode(r),r}pt=At.slice,ye={__e:function(o,e,t,n){for(var s,r,i;e=e.__;)if((s=e.__c)&&!s.__)try{if((r=s.constructor)&&r.getDerivedStateFromError!=null&&(s.setState(r.getDerivedStateFromError(o)),i=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(o,n||{}),i=s.__d),i)return s.__E=s}catch(a){o=a}throw o}},_t=0,typeof Promise=="function"&&Promise.prototype.then.bind(Promise.resolve());var bt=function(o,e,t,n){var s;e[0]=0;for(var r=1;r<e.length;r++){var i=e[r++],a=e[r]?(e[0]|=i?1:2,t[e[r++]]):e[++r];i===3?n[0]=a:i===4?n[1]=Object.assign(n[1]||{},a):i===5?(n[1]=n[1]||{})[e[++r]]=a:i===6?n[1][e[++r]]+=a+"":i?(s=o.apply(a,bt(o,a,t,["",null])),n.push(s),a[0]?e[0]|=2:(e[r-2]=0,e[r]=s)):n.push(a)}return n},Re=new Map;function Ot(o){var e=Re.get(this);return e||(e=new Map,Re.set(this,e)),(e=bt(this,e.get(o)||(e.set(o,e=function(t){for(var n,s,r=1,i="",a="",d=[0],c=function(f){r===1&&(f||(i=i.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?d.push(0,f,i):r===3&&(f||i)?(d.push(3,f,i),r=2):r===2&&i==="..."&&f?d.push(4,f,0):r===2&&i&&!f?d.push(5,0,!0,i):r>=5&&((i||!f&&r===5)&&(d.push(r,0,i,s),r=6),f&&(d.push(r,f,0,s),r=6)),i=""},u=0;u<t.length;u++){u&&(r===1&&c(),c(u));for(var l=0;l<t[u].length;l++)n=t[u][l],r===1?n==="<"?(c(),d=[d],r=3):i+=n:r===4?i==="--"&&n===">"?(r=1,i=""):i=n+i[0]:a?n===a?a="":i+=n:n==='"'||n==="'"?a=n:n===">"?(c(),r=1):r&&(n==="="?(r=5,s=i,i=""):n==="/"&&(r<5||t[u][l+1]===">")?(c(),r===3&&(d=d[0]),r=d,(d=d[0]).push(2,0,r),r=0):n===" "||n==="	"||n==="\n"||n==="\r"?(c(),r=2):i+=n),r===3&&i==="!--"&&(r=4,d=d[0])}return c(),d}(o)),e),arguments,[])).length>1?e:e[0]}const V=Ot.bind(Rt);class le{static generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}constructor(){this.socket=null,this.clientId=le.generateUUID(),this.connected=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3,this.handlers={},this.subscriptions=new Set,this.pendingSubscriptions=new Set,this.messageQueue=[],this.connecting=!1,this.subscriptionParams=new Map,console.log("Generated local WebSocket client ID: ".concat(this.clientId));try{const e=localStorage.getItem("websocket_client_id");e?(this.clientId=e,console.log("Loaded WebSocket client ID from localStorage: ".concat(this.clientId))):(localStorage.setItem("websocket_client_id",this.clientId),console.log("Stored WebSocket client ID in localStorage: ".concat(this.clientId)))}catch(e){console.warn("Could not access localStorage for client ID:",e)}this.connect=this.connect.bind(this),this.disconnect=this.disconnect.bind(this),this.reconnect=this.reconnect.bind(this),this.send=this.send.bind(this),this.subscribe=this.subscribe.bind(this),this.unsubscribe=this.unsubscribe.bind(this),this.handleMessage=this.handleMessage.bind(this),this.processMessageQueue=this.processMessageQueue.bind(this),this.connect()}connect(){if(this.socket&&(this.socket.readyState===WebSocket.OPEN||this.socket.readyState===WebSocket.CONNECTING)){console.log("WebSocket already connected or connecting");return}if(this.connecting){console.log("WebSocket connection already in progress");return}this.connecting=!0;const e=window.location.protocol==="https:"?"wss:":"ws:",t="".concat(e,"//").concat(window.location.host,"/api/ws");if(console.log("Connecting to WebSocket server at ".concat(t)),typeof WebSocket>"u"){console.error("WebSocket not supported by this browser or environment"),this.connecting=!1,this.fallbackToHttp();return}try{const n=setTimeout(()=>{console.error("WebSocket connection timeout"),this.socket&&this.socket.readyState!==WebSocket.OPEN&&(this.socket.close(),this.socket=null,this.connecting=!1,this.fallbackToHttp())},1e4);this.socket=new WebSocket(t),this.socket.onopen=()=>{clearTimeout(n),console.log("WebSocket connection established"),this.connected=!0,this.connecting=!1,this.reconnectAttempts=0,this.reconnectDelay=1e3,this.socket.bufferedAmount!==void 0&&console.log("Initial WebSocket buffered amount: ".concat(this.socket.bufferedAmount)),this.pendingSubscriptions=new Set([...this.subscriptions]),this.subscriptions.clear(),this.processPendingSubscriptions(),this.processMessageQueue()},this.socket.onmessage=s=>{try{this.handleMessage(s.data)}catch(r){console.error("Error handling WebSocket message:",r)}},this.socket.onclose=s=>{if(clearTimeout(n),console.log("WebSocket connection closed: ".concat(s.code," ").concat(s.reason)),this.connected=!1,this.connecting=!1,s.code===1006&&(console.warn("WebSocket closed abnormally (code 1006), possible compatibility issue"),this.reconnectAttempts>=3)){console.warn("Multiple abnormal closures, falling back to HTTP"),this.fallbackToHttp();return}s.code!==1e3&&this.reconnect()},this.socket.onerror=s=>{console.error("WebSocket error:",s),this.connecting=!1,this.reconnectAttempts++,this.reconnectAttempts>=3&&(console.warn("Multiple WebSocket errors, falling back to HTTP"),this.fallbackToHttp())}}catch(n){console.error("Error creating WebSocket:",n),this.connecting=!1,this.reconnect()}}fallbackToHttp(){console.warn("Falling back to HTTP for operations"),this.usingHttpFallback=!0;const e=new CustomEvent("websocket-fallback",{detail:{usingHttp:!0}});window.dispatchEvent(e),this.pendingSubscriptions.size>0&&console.log("Notifying ".concat(this.pendingSubscriptions.size," pending subscriptions about HTTP fallback"))}disconnect(){this.socket&&(this.socket.close(1e3,"Client disconnected"),this.socket=null),this.connected=!1,this.connecting=!1,this.subscriptions.clear(),this.pendingSubscriptions.clear(),this.subscriptionParams.clear(),this.messageQueue=[]}reconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.log("Maximum reconnect attempts reached");return}this.reconnectAttempts++;const e=Math.min(3e4,this.reconnectDelay*Math.pow(1.5,this.reconnectAttempts-1));console.log("Reconnecting in ".concat(e,"ms (attempt ").concat(this.reconnectAttempts,"/").concat(this.maxReconnectAttempts,")")),setTimeout(()=>{this.connect()},e)}send(e,t,n){if(!this.connected)return console.log("WebSocket not connected, queueing message"),this.messageQueue.push({type:e,topic:t,payload:n}),this.connect(),!1;const s={type:e,topic:t,payload:n};try{return console.log("Sending WebSocket message:",JSON.stringify(s)),this.socket.send(JSON.stringify(s)),!0}catch(r){return console.error("Error sending WebSocket message:",r),this.messageQueue.push({type:e,topic:t,payload:n}),!1}}processMessageQueue(){if(!this.connected||this.messageQueue.length===0)return;console.log("Processing ".concat(this.messageQueue.length," queued messages"));const e=[...this.messageQueue];this.messageQueue=[];for(const t of e)this.send(t.type,t.topic,t.payload)}processPendingSubscriptions(){if(!(!this.connected||this.pendingSubscriptions.size===0)){console.log("Processing ".concat(this.pendingSubscriptions.size," pending subscriptions"));for(const e of this.pendingSubscriptions){const t=this.subscriptionParams.get(e)||{};this.subscribe(e,t)}this.pendingSubscriptions.clear()}}subscribe(e,t={}){if(!this.connected)return console.log("WebSocket not connected, queueing subscription to ".concat(e)),this.pendingSubscriptions.add(e),this.connect(),!1;this.subscriptions.has(e)&&console.log("Already subscribed to ".concat(e,", updating parameters")),console.log("Subscribing to ".concat(e," with params:"),t),this.subscriptionParams.set(e,t);const n={client_id:this.clientId,...t},s=this.send("subscribe",e,n);return s?this.subscriptions.add(e):this.pendingSubscriptions.add(e),s}unsubscribe(e){if(!this.connected)return console.log("WebSocket not connected, cannot unsubscribe from ".concat(e)),this.pendingSubscriptions.delete(e),!1;if(!this.subscriptions.has(e))return console.log("Not subscribed to ".concat(e)),!0;console.log("Unsubscribing from ".concat(e));const t=this.send("unsubscribe",e,{});return t&&(this.subscriptions.delete(e),this.subscriptionParams.delete(e)),t}handleMessage(e){console.log("Raw WebSocket message received:",e);try{const t=JSON.parse(e);if(!t.type||!t.topic){console.error("Invalid WebSocket message format:",t);return}if(console.log("Received WebSocket message: ".concat(t.type," ").concat(t.topic),t),(t.type==="progress"||t.type==="result")&&console.log("Received ".concat(t.type," message for topic ").concat(t.topic,":"),t.payload),typeof t.payload=="string")try{const r=JSON.parse(t.payload);console.log("Parsed payload for ".concat(t.type,":").concat(t.topic,":"),r),t.payload=r}catch(r){console.log("Payload for ".concat(t.type,":").concat(t.topic," is not JSON, keeping as string"))}if(t.type==="welcome"&&t.topic==="system"){console.log("Received welcome message:",t);let r=t.payload;if(console.log("Welcome payload type:",typeof r),typeof r=="string")try{r=JSON.parse(r),console.log("Parsed welcome payload:",r)}catch(i){console.error("Error parsing welcome payload as JSON:",i),console.log("Raw payload string:",r)}!r||!r.client_id?console.error("Welcome message missing client_id:",r):(this.clientId=r.client_id,console.log("WebSocket client ID received: ".concat(this.clientId)),this.processPendingSubscriptions(),console.log("Notifying any waiting operations about client ID"));return}const n="".concat(t.type,":").concat(t.topic),s=this.handlers[n]||[];for(const r of s)try{r(t.payload)}catch(i){console.error("Error in WebSocket message handler for ".concat(n,":"),i)}}catch(t){console.error("Error parsing WebSocket message:",t)}}on(e,t,n){const s="".concat(e,":").concat(t);this.handlers[s]||(this.handlers[s]=[]),this.handlers[s].push(n),e!=="welcome"&&e!=="ack"&&e!=="error"&&this.subscribe(t)}off(e,t,n){const s="".concat(e,":").concat(t);this.handlers[s]&&(n?this.handlers[s]=this.handlers[s].filter(r=>r!==n):this.handlers[s]=[],this.handlers[s].length===0&&e!=="welcome"&&e!=="ack"&&e!=="error"&&this.unsubscribe(t))}getClientId(){return this.clientId}isConnected(){return this.connected}}class He{constructor(e){this.wsClient=e,this.topic="recordings/batch-delete",this.progressHandlers=[],this.resultHandlers=[],this.errorHandlers=[],this.wsClient.subscribe(this.topic),this.wsClient.on("progress",this.topic,t=>{this.handleProgress(t)}),this.wsClient.on("result",this.topic,t=>{this.handleResult(t)}),this.wsClient.on("error",this.topic,t=>{this.handleError(t)})}deleteWithProgress(e){return new Promise((t,n)=>{if(console.log("Starting batch delete operation with params:",e),!this.wsClient.isConnected()){console.error("WebSocket not connected, attempting to connect"),this.wsClient.connect(),setTimeout(()=>{this.wsClient.isConnected()?(console.log("WebSocket connected, retrying batch delete"),this.deleteWithProgress(e).then(t).catch(n)):(console.error("WebSocket still not connected, falling back to HTTP"),typeof batchDeleteRecordingsByHttpRequest=="function"?batchDeleteRecordingsByHttpRequest(e).then(t).catch(n):n(new Error("WebSocket not connected and HTTP fallback not available")))},1e3);return}const s=this.wsClient.getClientId();console.log("Using WebSocket client ID:",s),console.log("Registering WebSocket handlers for batch delete");const r=a=>{console.log("Batch delete result received:",a),this.wsClient.off("result",this.topic,r),console.log("Batch delete result details:",JSON.stringify(a,null,2)),t(a)},i=a=>{console.error("Batch delete error received:",a),this.wsClient.off("error",this.topic,i),n(new Error(a.error||"Unknown error"))};this.wsClient.on("result",this.topic,r),this.wsClient.on("error",this.topic,i),this.wsClient.subscriptions.has(this.topic)?this.sendDeleteRequest(e,s,t,n,r,i):(console.log("Subscribing to ".concat(this.topic," before sending request")),this.wsClient.send("subscribe",this.topic,{}),this.wsClient.subscriptions.add(this.topic),setTimeout(()=>{this.sendDeleteRequest(e,s,t,n,r,i)},500))})}sendDeleteRequest(e,t,n,s,r,i){if(console.log("Sending batch delete request"),!e.ids&&!e.filter){console.error("Missing ids or filter in batch delete params"),this.wsClient.off("result",this.topic,r),this.wsClient.off("error",this.topic,i),s(new Error("Missing ids or filter in batch delete params"));return}e.ids?console.log("Deleting ".concat(e.ids.length," recordings with IDs:"),e.ids):e.filter&&console.log("Deleting recordings with filter:",e.filter);const a={...e,client_id:t};console.log("Full request params:",JSON.stringify(a,null,2));const d={type:"request",topic:this.topic,payload:a};console.log("Complete WebSocket message:",JSON.stringify(d,null,2)),e.filter&&e.totalCount&&typeof window.updateBatchDeleteProgress=="function"&&(console.log("Simulating initial progress update with total count:",e.totalCount),window.updateBatchDeleteProgress({current:0,total:e.totalCount,succeeded:0,failed:0,status:"Starting batch delete operation for ".concat(e.totalCount," recordings..."),complete:!1}));try{if(this.wsClient.socket&&this.wsClient.socket.readyState===WebSocket.OPEN)return this.wsClient.socket.send(JSON.stringify(d)),console.log("Batch delete request sent successfully via direct socket send"),!0;{const c=this.wsClient.send("request",this.topic,a);return c?console.log("Batch delete request sent successfully via send method"):(console.error("Failed to send batch delete request"),this.wsClient.off("result",this.topic,r),this.wsClient.off("error",this.topic,i),s(new Error("Failed to send batch delete request"))),c}}catch(c){return console.error("Error sending batch delete request:",c),this.wsClient.off("result",this.topic,r),this.wsClient.off("error",this.topic,i),s(c),!1}}handleProgress(e){console.log("Batch delete progress update received:",e);let t=e;if(typeof e=="string")try{t=JSON.parse(e),console.log("Parsed progress payload:",t)}catch(n){console.error("Error parsing progress payload:",n),t={error:"Failed to parse progress data"}}if(typeof window.updateBatchDeleteProgress=="function"&&t)try{console.log("Directly updating progress UI with:",t),window.updateBatchDeleteProgress(t)}catch(n){console.error("Error directly updating progress UI:",n)}for(const n of this.progressHandlers)try{n(t)}catch(s){console.error("Error in progress handler:",s)}}handleResult(e){console.log("Batch delete result received:",e);let t=e;if(typeof e=="string")try{t=JSON.parse(e),console.log("Parsed result payload:",t)}catch(n){console.error("Error parsing result payload:",n),t={error:"Failed to parse result data"}}if(typeof window.updateBatchDeleteProgress=="function"&&t)try{const n={current:t.total||0,total:t.total||0,succeeded:t.succeeded||0,failed:t.failed||0,status:"Batch delete operation complete",complete:!0};console.log("Updating progress UI with final result:",n),window.updateBatchDeleteProgress(n)}catch(n){console.error("Error updating progress UI from result:",n)}for(const n of this.resultHandlers)try{n(t)}catch(s){console.error("Error in result handler:",s)}}handleError(e){console.log("Batch delete error received:",e);let t=e;if(typeof e=="string")try{t=JSON.parse(e),console.log("Parsed error payload:",t)}catch(n){console.error("Error parsing error payload:",n),t={error:typeof e=="string"?e:"Unknown error"}}for(const n of this.errorHandlers)try{n(t)}catch(s){console.error("Error in error handler:",s)}}onProgress(e){return this.progressHandlers.push(e),()=>{this.progressHandlers=this.progressHandlers.filter(t=>t!==e)}}onResult(e){return this.resultHandlers.push(e),()=>{this.resultHandlers=this.resultHandlers.filter(t=>t!==e)}}onError(e){return this.errorHandlers.push(e),()=>{this.errorHandlers=this.errorHandlers.filter(t=>t!==e)}}}var K,C,ge,Oe,X=0,yt=[],S=w,Be=S.__b,Ue=S.__r,Ve=S.diffed,qe=S.__c,Fe=S.unmount,je=S.__;function Ee(o,e){S.__h&&S.__h(C,o,X||e),X=0;var t=C.__H||(C.__H={__:[],__h:[]});return o>=t.__.length&&t.__.push({}),t.__[o]}function se(o){return X=1,Bt(xt,o)}function Bt(o,e,t){var n=Ee(K++,2);if(n.t=o,!n.__c&&(n.__=[xt(void 0,e),function(a){var d=n.__N?n.__N[0]:n.__[0],c=n.t(d,a);d!==c&&(n.__N=[c,n.__[1]],n.__c.setState({}))}],n.__c=C,!C.__f)){var s=function(a,d,c){if(!n.__c.__H)return!0;var u=n.__c.__H.__.filter(function(f){return!!f.__c});if(u.every(function(f){return!f.__N}))return!r||r.call(this,a,d,c);var l=n.__c.props!==a;return u.forEach(function(f){if(f.__N){var h=f.__[0];f.__=f.__N,f.__N=void 0,h!==f.__[0]&&(l=!0)}}),r&&r.call(this,a,d,c)||l};C.__f=!0;var r=C.shouldComponentUpdate,i=C.componentWillUpdate;C.componentWillUpdate=function(a,d,c){if(this.__e){var u=r;r=void 0,s(a,d,c),r=u}i&&i.call(this,a,d,c)},C.shouldComponentUpdate=s}return n.__N||n.__}function Kt(o,e){var t=Ee(K++,3);!S.__s&&vt(t.__H,e)&&(t.__=o,t.u=e,C.__H.__h.push(t))}function Xt(o){return X=5,wt(function(){return{current:o}},[])}function wt(o,e){var t=Ee(K++,7);return vt(t.__H,e)&&(t.__=o(),t.__H=e,t.__h=o),t.__}function Zt(o,e){return X=8,wt(function(){return o},e)}function Ut(){for(var o;o=yt.shift();)if(o.__P&&o.__H)try{o.__H.__h.forEach(re),o.__H.__h.forEach(we),o.__H.__h=[]}catch(e){o.__H.__h=[],S.__e(e,o.__v)}}S.__b=function(o){C=null,Be&&Be(o)},S.__=function(o,e){o&&e.__k&&e.__k.__m&&(o.__m=e.__k.__m),je&&je(o,e)},S.__r=function(o){Ue&&Ue(o),K=0;var e=(C=o.__c).__H;e&&(ge===C?(e.__h=[],C.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(re),e.__h.forEach(we),e.__h=[],K=0)),ge=C},S.diffed=function(o){Ve&&Ve(o);var e=o.__c;e&&e.__H&&(e.__H.__h.length&&(yt.push(e)!==1&&Oe===S.requestAnimationFrame||((Oe=S.requestAnimationFrame)||Vt)(Ut)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),ge=C=null},S.__c=function(o,e){e.some(function(t){try{t.__h.forEach(re),t.__h=t.__h.filter(function(n){return!n.__||we(n)})}catch(n){e.some(function(s){s.__h&&(s.__h=[])}),e=[],S.__e(n,t.__v)}}),qe&&qe(o,e)},S.unmount=function(o){Fe&&Fe(o);var e,t=o.__c;t&&t.__H&&(t.__H.__.forEach(function(n){try{re(n)}catch(s){e=s}}),t.__H=void 0,e&&S.__e(e,t.__v))};var ze=typeof requestAnimationFrame=="function";function Vt(o){var e,t=function(){clearTimeout(n),ze&&cancelAnimationFrame(e),setTimeout(o)},n=setTimeout(t,100);ze&&(e=requestAnimationFrame(t))}function re(o){var e=C,t=o.__c;typeof t=="function"&&(o.__c=void 0,t()),C=e}function we(o){var e=C;o.__c=o.__(),C=e}function vt(o,e){return!o||o.length!==e.length||e.some(function(t,n){return t!==o[n]})}function xt(o,e){return typeof e=="function"?e(o):e}async function Se(o=3e3,e=1){const t=new AbortController,n=setTimeout(()=>t.abort(),o);try{const s=await fetch("/api/system",{signal:t.signal});if(clearTimeout(n),!s.ok)throw new Error("Failed to load system information: ".concat(s.status));return(await s.json()).version||""}catch(s){return clearTimeout(n),console.error("Error loading system version (attempts left: ".concat(e,"):"),s),e>0?(console.log("Retrying system version fetch (".concat(e," attempts left)...")),Se(o,e-1)):""}}var Ge,Ye,Ke;function Je({activeNav:o="",version:e=""}){const[t,n]=se(""),[s,r]=se(!1);se(()=>{const u=localStorage.getItem("auth");if(u)try{const f=atob(u).split(":")[0];n(f)}catch(l){console.error("Error decoding auth token:",l),n("User")}else n("User")});const i=u=>{u.preventDefault(),localStorage.removeItem("auth"),fetch("/api/auth/logout",{method:"POST"}).then(()=>{window.location.href="login.html?logout=true"}).catch(()=>{window.location.href="login.html?logout=true"})},a=()=>{r(!s)},d=[{id:"nav-live",href:"index.html",label:"Live View"},{id:"nav-recordings",href:"recordings.html",label:"Recordings"},{id:"nav-streams",href:"streams.html",label:"Streams"},{id:"nav-settings",href:"settings.html",label:"Settings"},{id:"nav-users",href:"users.html",label:"Users"},{id:"nav-system",href:"system.html",label:"System"}],c=u=>{const l=o===u.id,f="text-white no-underline rounded transition-colors",h="px-3 py-2",m="block w-full px-4 py-3 text-left",g=l?"bg-blue-600":"hover:bg-blue-700";return V(Ge||(Ge=R(["\n      <li class=",'>\n        <a\n          href="','"\n          id=',"\n          class=","\n          onClick=","\n        >\n          ","\n        </a>\n      </li>\n    "])),s?"w-full":"mx-1",u.href,u.id,"".concat(f," ").concat(s?m:h," ").concat(g),s?a:null,u.label)};return V(Ke||(Ke=R(['\n    <header class="bg-gray-800 text-white py-2 shadow-md mb-4 w-full">\n      <div class="container mx-auto px-4 flex justify-between items-center">\n        <div class="logo flex items-center">\n          <h1 class="text-xl font-bold m-0">LightNVR</h1>\n          <span class="version text-blue-200 text-xs ml-2">v','</span>\n        </div>\n\n        <!-- Desktop Navigation -->\n        <nav class="hidden md:block">\n          <ul class="flex list-none m-0 p-0">\n            ','\n          </ul>\n        </nav>\n\n        <!-- User Menu (Desktop) -->\n        <div class="user-menu hidden md:flex items-center">\n          <span class="mr-2">','</span>\n          <a href="#" onClick=',' class="text-white no-underline hover:bg-blue-700 px-3 py-1 rounded transition-colors">Logout</a>\n        </div>\n\n        <!-- Mobile Menu Button -->\n        <button\n          class="md:hidden text-white p-2 focus:outline-none"\n          onClick=','\n          aria-label="Toggle menu"\n        >\n          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d='," />\n          </svg>\n        </button>\n      </div>\n\n      <!-- Mobile Navigation -->\n      ","\n    </header>\n  "])),e,d.map(c),t,i,a,s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16",s?V(Ye||(Ye=R(['\n        <div class="md:hidden mt-2 border-t border-gray-700 pt-2 container mx-auto px-4">\n          <ul class="list-none m-0 p-0 flex flex-col w-full">\n            ','\n            <li class="w-full mt-2 pt-2 border-t border-gray-700">\n              <div class="flex justify-between items-center px-4 py-2">\n                <span>','</span>\n                <a href="#" onClick=',' class="text-white no-underline hover:bg-blue-700 px-3 py-1 rounded transition-colors">Logout</a>\n              </div>\n            </li>\n          </ul>\n        </div>\n      '])),d.map(c),t,i):null)}var Xe,Ze;function qt(o=""){const e=document.getElementById("header-container");e&&P(async()=>{const{render:t}=await Promise.resolve().then(()=>gt);return{render:t}},void 0,import.meta.url).then(({render:t})=>{t(V(Xe||(Xe=R(["<"," activeNav=",' version="" />'])),Je,o),e),Se().then(n=>{n&&t(V(Ze||(Ze=R(["<"," activeNav="," version="," />"])),Je,o,n),e)}).catch(n=>{console.error("Error loading system version:",n)})}).catch(t=>{console.error("Error importing Preact:",t)})}var et;function Qe({version:o=""}){const[e]=se(new Date().getFullYear());return V(et||(et=R(['\n    <footer class="bg-gray-800 text-white py-4 px-4 mt-4 shadow-inner">\n      <div class="container mx-auto flex flex-col sm:flex-row justify-between items-center">\n        <div class="text-center sm:text-left mb-2 sm:mb-0">\n          <p class="text-sm">© ',' LightNVR</p>\n          <p class="text-xs text-gray-400 mt-1 hidden sm:block">Lightweight Network Video Recorder</p>\n        </div>\n        <div class="flex flex-col sm:flex-row items-center">\n          <span class="text-sm mb-2 sm:mb-0 sm:mr-4">Version ','</span>\n          <div class="flex space-x-4">\n            <a href="https://github.com/opensensor/lightnvr" class="text-blue-300 hover:text-blue-100 text-sm" target="_blank" rel="noopener noreferrer">GitHub</a>\n          </div>\n        </div>\n      </div>\n    </footer>\n  '])),e,o)}var tt,ot;function Ft(){const o=document.getElementById("footer-container");o&&P(async()=>{const{render:e}=await Promise.resolve().then(()=>gt);return{render:e}},void 0,import.meta.url).then(({render:e})=>{e(V(tt||(tt=R(["<",' version="" />'])),Qe),o),Se().then(t=>{t&&e(V(ot||(ot=R(["<"," version="," />"])),Qe,t),o)}).catch(t=>{console.error("Error loading system version for footer:",t)})}).catch(e=>{console.error("Error importing Preact for footer:",e)})}function jt(){let o=document.getElementById("snapshot-modal-container");o||(o=document.createElement("div"),o.id="snapshot-modal-container",document.body.appendChild(o));const e=document.createElement("div");e.id="snapshot-preview-modal",e.className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden",e.innerHTML='\n    <div class="modal-content bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl max-h-[90vh] flex flex-col transform transition-all duration-300 ease-out scale-95 opacity-0" style="width: 90%;">\n      <div class="flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700">\n        <h3 id="snapshot-preview-title" class="text-lg font-semibold text-gray-900 dark:text-white">Snapshot</h3>\n        <button class="close text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">✕</button>\n      </div>\n      <div class="p-4 overflow-auto flex-grow">\n        <img id="snapshot-preview-image" class="max-w-full max-h-[70vh] mx-auto" src="" alt="Snapshot">\n      </div>\n      <div class="p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-2">\n        <button id="snapshot-download-btn" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors">Download</button>\n        <button id="snapshot-close-btn" class="px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition-colors dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600">Close</button>\n      </div>\n    </div>\n  ',o.appendChild(e);let t=document.getElementById("video-modal-container");t||(t=document.createElement("div"),t.id="video-modal-container",document.body.appendChild(t));const n=document.createElement("div");n.id="video-preview-modal",n.className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden",n.innerHTML='\n    <div class="modal-content bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl max-h-[90vh] flex flex-col transform transition-all duration-300 ease-out scale-95 opacity-0 w-full md:w-[90%]">\n      <div class="flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700">\n        <h3 id="video-preview-title" class="text-lg font-semibold text-gray-900 dark:text-white">Video</h3>\n        <button class="close text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">✕</button>\n      </div>\n      <div class="p-4 flex-grow">\n        <video id="video-preview-player" class="w-full h-auto max-w-full object-contain mx-auto" controls autoplay></video>\n      </div>\n      <div class="p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-2">\n        <a id="video-download-btn" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors" href="#" download>Download</a>\n        <button id="video-close-btn" class="px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition-colors dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600">Close</button>\n      </div>\n    </div>\n  ',t.appendChild(n),document.addEventListener("keydown",s=>{s.key==="Escape"&&document.querySelectorAll(".fixed.inset-0.bg-black.bg-opacity-75").forEach(i=>{i.classList.contains("hidden")||i.classList.add("hidden")})})}function zt(){P(async()=>{const{initToastContainer:o}=await import("./toast-Do6XSKgM.js");return{initToastContainer:o}},[],import.meta.url).then(({initToastContainer:o})=>{o(!1)}).catch(o=>{if(console.error("Error loading toast module:",o),document.getElementById("status-message-styles"))return;const e=document.createElement("style");e.id="status-message-styles",e.textContent="\n      #status-message-container {\n        position: fixed;\n        top: 1rem;\n        left: 50%;\n        transform: translateX(-50%);\n        z-index: 50;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n      }\n      \n      .status-message {\n        background-color: #1f2937;\n        color: white;\n        padding: 0.5rem 1rem;\n        border-radius: 0.375rem;\n        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n        margin-bottom: 0.5rem;\n        transition: all 0.3s ease;\n        opacity: 0;\n        transform: translateY(-0.5rem);\n      }\n      \n      .status-message.show {\n        opacity: 1;\n        transform: translateY(0);\n      }\n      \n      .status-message.success {\n        background-color: #10b981;\n      }\n      \n      .status-message.error {\n        background-color: #ef4444;\n      }\n      \n      .status-message.warning {\n        background-color: #f59e0b;\n      }\n      \n      .status-message.info {\n        background-color: #3b82f6;\n      }\n    ",document.head.appendChild(e)})}function Jt(){if(document.getElementById("modal-styles"))return;const o=document.createElement("style");o.id="modal-styles",o.textContent="\n    .modal-content {\n      transition: all 0.3s ease-out;\n    }\n    \n    .modal-content.scale-95 {\n      transform: scale(0.95);\n      opacity: 0;\n    }\n    \n    .modal-content.scale-100 {\n      transform: scale(1);\n      opacity: 1;\n    }\n  ",document.head.appendChild(o)}var nt;function eo(o){const{isOpen:e,onClose:t,onConfirm:n,mode:s,count:r}=o;if(!e)return null;let i="Confirm Delete",a="Are you sure you want to delete this item?";s==="selected"?(i="Delete Selected Recordings",a="Are you sure you want to delete ".concat(r," selected recording").concat(r!==1?"s":"","?")):s==="all"&&(i="Delete All Filtered Recordings",a="Are you sure you want to delete all recordings matching the current filters? This action cannot be undone.");const d=u=>{u.key==="Escape"&&t()},c=u=>{u.target===u.currentTarget&&t()};return V(nt||(nt=R(['\n    <div \n      class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"\n      onClick=',"\n      onKeyDown=",'\n    >\n      <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 max-w-md mx-auto">\n        <div class="mb-4">\n          <h3 class="text-lg font-semibold text-gray-900 dark:text-white">','</h3>\n        </div>\n        \n        <p class="text-gray-600 dark:text-gray-300 mb-6">','</p>\n        \n        <div class="flex justify-end space-x-3">\n          <button \n            class="px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition-colors dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600"\n            onClick=','\n          >\n            Cancel\n          </button>\n          <button \n            class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors"\n            onClick=',"\n          >\n            Delete\n          </button>\n        </div>\n      </div>\n    </div>\n  "])),c,d,i,a,t,n)}function to(o,e,t){const n=document.createElement("div");n.className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",n.id="video-modal-overlay";const s=document.createElement("div");s.className="bg-gray-50 dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl flex flex-col w-full md:w-[90%]";const r=document.createElement("div");r.className="flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700";const i=document.createElement("h3");i.className="text-lg font-semibold text-gray-900 dark:text-white",i.textContent=e||"Video";const a=document.createElement("button");a.className="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",a.innerHTML="✕",a.addEventListener("click",()=>{document.body.removeChild(n)}),r.appendChild(i),r.appendChild(a);const d=document.createElement("div");d.className="p-4";const c=document.createElement("video");c.src=o,c.className="w-full h-auto max-w-full object-contain mx-auto",c.controls=!0,c.autoplay=!0,d.appendChild(c);const u=document.createElement("div");u.id="recordings-controls",u.className="mx-4 mb-4 p-4 border border-green-500 rounded-lg bg-white dark:bg-gray-700 shadow-md relative z-10";const l=document.createElement("h3");l.className="text-lg font-bold text-center mb-4 text-gray-800 dark:text-white",l.textContent="PLAYBACK CONTROLS",u.appendChild(l);const f=document.createElement("div");f.className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-2";const h=document.createElement("div");h.className="border-b pb-4 md:border-b-0 md:border-r md:pr-4 md:pb-0";const m=document.createElement("h4");m.className="font-bold text-center mb-3 text-gray-700 dark:text-gray-300",m.textContent="Playback Speed",h.appendChild(m);const g=document.createElement("div");g.className="flex flex-wrap justify-center gap-2",[.25,.5,1,1.5,2,4].forEach(b=>{const y=document.createElement("button");y.textContent=b===1?"1× (Normal)":"".concat(b,"×"),y.className=b===1?"speed-btn px-3 py-2 rounded-full bg-green-500 text-white text-sm font-medium transition-all focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50":"speed-btn px-3 py-2 rounded-full bg-gray-200 hover:bg-gray-300 text-sm font-medium transition-all focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50",y.setAttribute("data-speed",b),y.addEventListener("click",()=>{c.playbackRate=b,g.querySelectorAll(".speed-btn").forEach(D=>{D.getAttribute("data-speed")===b.toString()?(D.classList.remove("bg-gray-200","hover:bg-gray-300"),D.classList.add("bg-green-500","text-white")):(D.classList.remove("bg-green-500","text-white"),D.classList.add("bg-gray-200","hover:bg-gray-300"))}),p.textContent="Current Speed: ".concat(b,"× ").concat(b===1?"(Normal)":"")}),g.appendChild(y)}),h.appendChild(g);const p=document.createElement("div");p.id="current-speed-indicator",p.className="mt-3 text-center font-medium text-green-600 dark:text-green-400 text-sm",p.textContent="Current Speed: 1× (Normal)",h.appendChild(p),f.appendChild(h);const _=document.createElement("div");_.className="pt-4 md:pt-0 md:pl-4";const N=document.createElement("h4");N.className="font-bold text-center mb-2 text-gray-700 dark:text-gray-300",N.textContent="Detection Overlays",_.appendChild(N);const x=document.createElement("div");x.className="flex flex-col items-center gap-2";const I=document.createElement("div");I.className="flex items-center gap-2 mb-2";const T=document.createElement("input");T.type="checkbox",T.id="detection-overlay-checkbox",T.className="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600";const H=document.createElement("label");H.htmlFor="detection-overlay-checkbox",H.className="text-sm font-medium text-gray-700 dark:text-gray-300",H.textContent="Show Detection Overlays",I.appendChild(T),I.appendChild(H),x.appendChild(I);const W=document.createElement("div");W.className="flex flex-col w-full mt-2 mb-2";const A=document.createElement("label");A.htmlFor="detection-sensitivity-slider",A.className="text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",A.textContent="Detection Sensitivity";const O=document.createElement("div");O.id="detection-sensitivity-value",O.className="text-xs text-gray-600 dark:text-gray-400 text-center mb-1",O.textContent="Time Window: 2 seconds";const k=document.createElement("input");k.type="range",k.id="detection-sensitivity-slider",k.className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700",k.min="1",k.max="10",k.step="1",k.value="2",W.appendChild(A),W.appendChild(k),W.appendChild(O),k.addEventListener("input",()=>{ee=parseInt(k.value),O.textContent="Time Window: ".concat(ee," second").concat(ee!==1?"s":""),F&&j()}),x.appendChild(W);const E=document.createElement("div");if(E.id="detection-status-indicator",E.className="text-center text-sm text-gray-600 dark:text-gray-400",E.textContent="No detections loaded",x.appendChild(E),_.appendChild(x),f.appendChild(_),u.appendChild(f),t){const b=document.createElement("div");b.className="flex justify-center mt-4 pt-2 border-t border-gray-200 dark:border-gray-700";const y=document.createElement("a");y.className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors flex items-center text-sm",y.innerHTML='\n      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />\n      </svg>\n      Download Video\n    ',y.href=t,y.download="video-".concat(Date.now(),".mp4"),b.appendChild(y),u.appendChild(b)}const $e=document.createElement("div");$e.className="p-2";const q=document.createElement("div");q.className="relative",q.style.position="relative",q.style.width="100%",q.style.height="100%";const $=document.createElement("canvas");$.id="detection-overlay-canvas",$.className="absolute top-0 left-0 w-full h-full pointer-events-none",$.style.position="absolute",$.style.top="0",$.style.left="0",$.style.width="100%",$.style.height="100%",$.style.pointerEvents="none",$.style.display="none",q.appendChild(c),q.appendChild($),d.appendChild(q);let L=null,M=[],F=!1,ee=parseInt(k.value);const ue=o.match(/\/play\/(\d+)/);if(ue&&ue[1]){const b=parseInt(ue[1],10);fetch("/api/recordings/".concat(b)).then(y=>y.json()).then(y=>{if(L=y,L&&L.stream&&L.start_time&&L.end_time){const D=Math.floor(new Date(L.start_time).getTime()/1e3),he=Math.floor(new Date(L.end_time).getTime()/1e3),Te=new URLSearchParams({start:D,end:he});return fetch("/api/detection/results/".concat(L.stream,"?").concat(Te.toString()))}throw new Error("Recording data incomplete")}).then(y=>y.json()).then(y=>{M=y.detections||[],M.length>0?(E.textContent="".concat(M.length," detection").concat(M.length!==1?"s":""," available"),E.className="text-center text-sm font-medium text-green-600 dark:text-green-400",T.disabled=!1):(E.textContent="No detections found for this recording",T.disabled=!0)}).catch(y=>{console.error("Error fetching detection data:",y),E.textContent="Error loading detections",E.className="text-center text-sm font-medium text-red-600 dark:text-red-400",T.disabled=!0})}T.addEventListener("change",()=>{F=T.checked,F?($.style.display="block",j(),E.textContent="Showing ".concat(M.length," detection").concat(M.length!==1?"s":"")):($.style.display="none",E.textContent="".concat(M.length," detection").concat(M.length!==1?"s":""," available"))});function j(){if(!F||!c||!$||M.length===0)return;const b=c.videoWidth,y=c.videoHeight;if(b===0||y===0){requestAnimationFrame(j);return}$.width=b,$.height=y;const D=$.getContext("2d");D.clearRect(0,0,$.width,$.height);const he=c.currentTime;if(!L||!L.start_time)return;const kt=Math.floor(new Date(L.start_time).getTime()/1e3)+Math.floor(he),te=M.filter(B=>B.timestamp?Math.abs(B.timestamp-kt)<=ee:!1);E&&(te.length>0?E.textContent="Showing ".concat(te.length," detection").concat(te.length!==1?"s":""," at current time"):E.textContent="No detections at current time (".concat(M.length," total)")),te.forEach(B=>{const fe=B.x*b,me=B.y*y,Ct=B.width*b,Et=B.height*y;D.strokeStyle="rgba(0, 255, 0, 0.8)",D.lineWidth=2,D.strokeRect(fe,me,Ct,Et),D.fillStyle="rgba(0, 0, 0, 0.7)";const Ie="".concat(B.label," (").concat(Math.round(B.confidence*100),"%)"),St=D.measureText(Ie).width+10;D.fillRect(fe,me-20,St,20),D.fillStyle="white",D.font="12px Arial",D.fillText(Ie,fe+5,me-5)}),!c.paused&&!c.ended&&requestAnimationFrame(j)}c.addEventListener("play",()=>{F&&j()}),c.addEventListener("seeked",()=>{F&&j()}),c.addEventListener("timeupdate",()=>{if(F){const b=Math.floor(c.currentTime*2)/2;c.lastDrawnTime!==b&&(c.lastDrawnTime=b,j())}}),s.appendChild(r),s.appendChild(d),s.appendChild(u),s.appendChild($e),n.appendChild(s),document.body.appendChild(n);const De=b=>{b.key==="Escape"&&(document.body.contains(n)&&document.body.removeChild(n),document.removeEventListener("keydown",De))};document.addEventListener("keydown",De),n.addEventListener("click",b=>{b.target===n&&document.body.removeChild(n)})}function z(o,e="info",t=4e3){if(console.log("Showing status message: ".concat(o," (").concat(e,")")),window.showToast){window.showToast(o,e,t);return}P(async()=>{const{showStatusMessage:n}=await import("./toast-Do6XSKgM.js");return{showStatusMessage:n}},[],import.meta.url).then(({showStatusMessage:n})=>{n(o,e,t)}).catch(n=>{console.error("Error loading toast module:",n);let s=document.getElementById("status-message-container");s||(s=document.createElement("div"),s.id="status-message-container",s.className="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 flex flex-col items-center",document.body.appendChild(s));const r=document.createElement("div");let i="bg-blue-500";e==="success"?i="bg-green-500":e==="error"?i="bg-red-500":e==="warning"&&(i="bg-yellow-500"),r.className="".concat(i," text-white px-4 py-2 rounded-lg shadow-lg mb-2 transition-all duration-300 opacity-0 transform translate-y-2"),r.textContent=o,s.appendChild(r),setTimeout(()=>{r.classList.remove("opacity-0","translate-y-2")},10),setTimeout(()=>{r.classList.add("opacity-0","translate-y-2"),setTimeout(()=>{r.parentNode===s&&s.removeChild(r),s.children.length===0&&s.parentNode===document.body&&document.body.removeChild(s)},300)},t)})}function oo(o,e){const t=document.getElementById("snapshot-preview-modal");if(!t){console.error("Snapshot modal not found. Make sure setupModals() has been called.");return}const n=document.getElementById("snapshot-preview-title"),s=document.getElementById("snapshot-preview-image"),r=document.getElementById("snapshot-download-btn"),i=document.getElementById("snapshot-close-btn"),a=t.querySelectorAll(".close"),d=t.querySelector(".modal-content");n&&(n.textContent="Snapshot: ".concat(e)),t.dataset.imageData=o,t.dataset.streamName=e,s&&(s.src=o,s.style.display="block",s.onload=()=>{console.log("Snapshot image loaded successfully")},s.onerror=u=>{console.error("Error loading snapshot image:",u)});function c(){t.classList.add("hidden"),d&&(d.classList.remove("scale-100"),d.classList.add("scale-95"))}i&&(i.onclick=c),a.forEach(u=>{u.onclick=c}),t.onclick=function(u){u.target===t&&c()},document.addEventListener("keydown",function(u){u.key==="Escape"&&!t.classList.contains("hidden")&&c()}),r&&(r.onclick=function(){const u=t.dataset.imageData,l=t.dataset.streamName||e;if(!u){console.error("No image data available for download"),z("Download failed: No image data available",5e3);return}console.log("Downloading snapshot with data URL length:",u.length);try{console.log("Using iframe download method");const h=document.createElement("canvas"),m=new Image;m.onload=function(){try{console.log("Image loaded for optimization, original dimensions:",m.width,"x",m.height);const g=m.width,v=m.height;console.log("Using original image dimensions for maximum quality:",g,"x",v),h.width=g,h.height=v;const p=h.getContext("2d");p.fillStyle="black",p.fillRect(0,0,h.width,h.height),p.drawImage(m,0,0,g,v);const _=h.toDataURL("image/jpeg",1);console.log("Optimized JPEG data URL length:",_.length);const N="snapshot_".concat(l,"_").concat(new Date().toISOString().replace(/[:.]/g,"-"),".jpg"),x=document.createElement("iframe");x.style.display="none",document.body.appendChild(x);try{const I=x.contentWindow.document;I.open(),I.write("\n                <!DOCTYPE html>\n                <html>\n                <head>\n                  <title>Downloading...</title>\n                  <script>\n                    function startDownload() {\n                      const a = document.getElementById('download-link');\n                      a.click();\n                      setTimeout(function() {\n                        window.parent.postMessage('download-complete', '*');\n                      }, 1000);\n                    }\n                  <\/script>\n                </head>\n                <body onload=\"startDownload()\">\n                  <a id=\"download-link\" href=\"".concat(_,'" download="').concat(N,'">Download</a>\n                </body>\n                </html>\n              ')),I.close(),window.addEventListener("message",function T(H){H.data==="download-complete"&&(window.removeEventListener("message",T),document.body.removeChild(x),z("Snapshot downloaded successfully",3e3))},{once:!0}),setTimeout(()=>{document.body.contains(x)&&document.body.removeChild(x)},5e3)}catch(I){console.error("Iframe download method failed:",I),document.body.removeChild(x),f(_,N)}}catch(g){console.error("Canvas processing error:",g),z("Download failed: Error processing image",5e3),f(u,"snapshot_".concat(l,"_").concat(new Date().toISOString().replace(/[:.]/g,"-"),".jpg"))}},m.onerror=function(g){console.error("Error loading image for optimization:",g),z("Download failed: Could not load image",5e3),f(u,"snapshot_".concat(l,"_").concat(new Date().toISOString().replace(/[:.]/g,"-"),".jpg"))},m.src=u}catch(h){console.error("Error in snapshot download process:",h),z("Download failed: "+h.message,5e3),f(u,"snapshot_".concat(l,"_").concat(new Date().toISOString().replace(/[:.]/g,"-"),".jpg"))}function f(h,m){console.log("Attempting direct link download");try{const g=document.createElement("a");g.href=h,g.download=m,g.target="_blank",g.rel="noopener noreferrer",document.body.appendChild(g),g.click(),setTimeout(()=>{document.body.removeChild(g)},100),z("Download initiated",3e3)}catch(g){console.error("Direct link download failed:",g),z("Download failed: Browser restrictions",5e3)}}}),t.classList.remove("hidden"),d&&setTimeout(()=>{d.classList.remove("scale-95","opacity-0"),d.classList.add("scale-100","opacity-100")},10)}if(typeof le<"u"){if(window.wsClient=new le,console.log("WebSocket client initialized at application level"),window.wsClient){console.log("Initial WebSocket connection state:",{connected:window.wsClient.isConnected(),clientId:window.wsClient.getClientId()});const o=window.wsClient.connect;window.wsClient.connect=function(){const t=o.apply(this,arguments);if(this.socket){const n=this.socket.onopen;this.socket.onopen=a=>{console.log("WebSocket connection opened at application level"),n&&n.call(this,a)};const s=this.socket.onerror;this.socket.onerror=a=>{console.error("WebSocket error at application level:",a),s&&s.call(this,a)};const r=this.socket.onclose;this.socket.onclose=a=>{console.log("WebSocket connection closed at application level: ".concat(a.code," ").concat(a.reason)),r&&r.call(this,a)};const i=this.socket.onmessage;this.socket.onmessage=a=>{a.data.includes('"type":"welcome"')||console.log("WebSocket message received at application level"),i&&i.call(this,a)}}return t};const e=window.wsClient.handleMessage;window.wsClient.handleMessage=function(t){const n=this.clientId;e.call(this,t);const s=this.clientId;n!==s&&s&&console.log("WebSocket client ID changed at application level: ".concat(s))}}typeof He<"u"&&(window.batchDeleteClient=new He(window.wsClient),console.log("Batch delete client initialized"))}function de(o={}){let e={...o};const t=new Set;return{getState:()=>e,setState:n=>{typeof n=="function"?e=n(e):e={...e,...n},t.forEach(s=>s(e))},subscribe:n=>(t.add(n),()=>{t.delete(n)})}}de({message:"",visible:!1,timeout:null,type:"success"});de({imageUrl:"",title:""});de({videoUrl:"",title:"",downloadUrl:""});const Qt=de({client:window.wsClient||null,connected:window.wsClient?window.wsClient.isConnected():!1,clientId:window.wsClient?window.wsClient.getClientId():null});window.wsClient&&setInterval(()=>{if(window.wsClient){const o=window.wsClient.isConnected(),e=window.wsClient.getClientId();Qt.setState({connected:o,clientId:e}),!o&&!window.wsClient.connecting&&window.wsClient.reconnectAttempts<window.wsClient.maxReconnectAttempts&&(console.log("WebSocket not connected, attempting to reconnect from application level"),window.wsClient.connect())}},5e3);function Gt(){const o=window.location.pathname.split("/").pop();let e="";switch(o){case"index.html":e="nav-live";break;case"recordings.html":case"timeline.html":e="nav-recordings";break;case"streams.html":e="nav-streams";break;case"settings.html":e="nav-settings";break;case"users.html":e="nav-users";break;case"system.html":e="nav-system";break}qt(e),Ft(),o==="index.html"?P(()=>import("./WebRTCView-D4ltvR8q.js"),__vite__mapDeps([0,1]),import.meta.url).then(t=>{t.loadWebRTCView()}):o==="hls.html"?P(()=>import("./LiveView-Knzss1em.js"),__vite__mapDeps([2,3,1]),import.meta.url).then(t=>{t.loadLiveView()}):o==="recordings.html"?P(()=>import("./RecordingsView-P6SOlVPp.js"),__vite__mapDeps([4,3,5]),import.meta.url).then(t=>{t.loadRecordingsView()}):o==="timeline.html"?P(()=>import("./TimelineView-516kV7ag.js"),__vite__mapDeps([6,3]),import.meta.url).then(t=>{t.loadTimelineView()}):o==="settings.html"?P(()=>import("./SettingsView-kpuWY95R.js"),__vite__mapDeps([7,3,5]),import.meta.url).then(t=>{t.loadSettingsView()}):o==="streams.html"?P(()=>import("./StreamsView-BrCYI90M.js"),__vite__mapDeps([8,3,5]),import.meta.url).then(t=>{t.loadStreamsView()}):o==="system.html"?P(()=>import("./SystemView-DYNBiZyH.js"),__vite__mapDeps([9,3,5]),import.meta.url).then(t=>{t.loadSystemView()}):o==="login.html"?P(()=>import("./LoginView-DDkBfhKS.js"),__vite__mapDeps([10,5]),import.meta.url).then(t=>{t.loadLoginView()}):o==="users.html"?P(()=>import("./UsersView-HFTpPmEh.js"),__vite__mapDeps([11,5]),import.meta.url).then(t=>{t.loadUsersView()}):o===""&&P(()=>import("./WebRTCView-D4ltvR8q.js"),__vite__mapDeps([0,1]),import.meta.url).then(t=>{t.loadWebRTCView()}),jt(),zt(),Jt(),P(async()=>{const{initToastContainer:t}=await import("./toast-Do6XSKgM.js");return{initToastContainer:t}},[],import.meta.url).then(({initToastContainer:t})=>{t(!1),console.log("Toast container initialized from preact-app.js"),window.testToastFromApp=(n="info")=>{const s="App test ".concat(n," toast at ").concat(new Date().toLocaleTimeString());return window.showToast&&window.showToast(s,n),"App toast triggered"}}).catch(t=>{console.error("Error initializing toast container:",t)})}document.addEventListener("DOMContentLoaded",Gt);export{Xt as A,eo as D,P as _,zt as a,Jt as b,z as c,se as d,oo as e,to as f,Wt as g,V as h,gt as p,Zt as q,jt as s,Kt as y};
//# sourceMappingURL=preact-app-DCtIDuD6.js.map
