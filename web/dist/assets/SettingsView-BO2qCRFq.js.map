{"version":3,"mappings":"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","names":["SettingsView","settings","setSettings","useState","isLoading","setIsLoading","hasData","setHasData","requestControllerRef","useRef","useEffect","createRequestController","loadSettings","data","fetchJSON","_a","mappedData","_b","_c","_d","_e","_f","_g","_h","_i","prev","error","showStatusMessage","saveSettings","mappedSettings","enhancedFetch","handleInputChange","e","name","value","type","checked","handleThresholdChange","html","__template","ContentLoader","loadSettingsView","mainContent","__vitePreload","render","n"],"ignoreList":[],"sources":["../../js/components/preact/SettingsView.js"],"sourcesContent":["/**\n * LightNVR Web Interface SettingsView Component\n * Preact component for the settings page\n */\n\nimport { h } from '../../preact.min.js';\nimport { html } from '../../html-helper.js';\nimport { useState, useEffect, useRef } from '../../preact.hooks.module.js';\nimport { showStatusMessage } from './UI.js';\nimport { ContentLoader } from './LoadingIndicator.js';\nimport { fetchJSON, enhancedFetch, createRequestController } from '../../fetch-utils.js';\n\n/**\n * SettingsView component\n * @returns {JSX.Element} SettingsView component\n */\nexport function SettingsView() {\n  const [settings, setSettings] = useState({\n    logLevel: '2',\n    storagePath: '/var/lib/lightnvr/recordings',\n    storagePathHls: '', // New field for HLS storage path\n    maxStorage: '0',\n    retention: '30',\n    autoDelete: true,\n    dbPath: '/var/lib/lightnvr/lightnvr.db',\n    webPort: '8080',\n    authEnabled: true,\n    username: 'admin',\n    password: 'admin',\n    bufferSize: '1024',\n    useSwap: true,\n    swapSize: '128',\n    detectionModelsPath: '',\n    defaultDetectionThreshold: 50,\n    defaultPreBuffer: 5,\n    defaultPostBuffer: 10\n  });\n  \n  // State for loading and data status\n  const [isLoading, setIsLoading] = useState(true);\n  const [hasData, setHasData] = useState(false);\n\n  // Request controller for cancelling requests on unmount\n  const requestControllerRef = useRef(null);\n\n  // Load settings on mount\n  useEffect(() => {\n    // Create a new request controller\n    requestControllerRef.current = createRequestController();\n    \n    loadSettings();\n    \n    // Clean up and cancel pending requests on unmount\n    return () => {\n      if (requestControllerRef.current) {\n        requestControllerRef.current.abort();\n      }\n    };\n  }, []);\n  \n  // Load settings from API\n  const loadSettings = async () => {\n    try {\n      setIsLoading(true);\n      \n      const data = await fetchJSON('/api/settings', {\n        signal: requestControllerRef.current?.signal,\n        timeout: 15000, // 15 second timeout\n        retries: 2,     // Retry twice\n        retryDelay: 1000 // 1 second between retries\n      });\n      console.log('Settings loaded:', data);\n      \n      // Map backend property names to frontend property names\n      const mappedData = {\n        logLevel: data.log_level?.toString() || '',\n        storagePath: data.storage_path || '',\n        storagePathHls: data.storage_path_hls || '', // Map the HLS storage path\n        maxStorage: data.max_storage_size?.toString() || '',\n        retention: data.retention_days?.toString() || '',\n        autoDelete: data.auto_delete_oldest || false,\n        dbPath: data.db_path || '',\n        webPort: data.web_port?.toString() || '',\n        authEnabled: data.web_auth_enabled || false,\n        username: data.web_username || '',\n        password: data.web_password || '',\n        bufferSize: data.buffer_size?.toString() || '',\n        useSwap: data.use_swap || false,\n        swapSize: data.swap_size?.toString() || '',\n        detectionModelsPath: data.models_path || '',\n        defaultDetectionThreshold: data.default_detection_threshold || 50,\n        defaultPreBuffer: data.pre_detection_buffer?.toString() || '5',\n        defaultPostBuffer: data.post_detection_buffer?.toString() || '10'\n      };\n      \n      // Update state with loaded settings\n      setSettings(prev => ({\n        ...prev,\n        ...mappedData\n      }));\n      \n      setHasData(true);\n    } catch (error) {\n      console.error('Error loading settings:', error);\n      showStatusMessage('Error loading settings: ' + error.message);\n      setHasData(false);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  \n  // Save settings\n  const saveSettings = async () => {\n    try {\n      // Map frontend property names to backend property names\n      const mappedSettings = {\n        log_level: parseInt(settings.logLevel, 10),\n        storage_path: settings.storagePath,\n        storage_path_hls: settings.storagePathHls, // Include the HLS storage path\n        max_storage_size: parseInt(settings.maxStorage, 10),\n        retention_days: parseInt(settings.retention, 10),\n        auto_delete_oldest: settings.autoDelete,\n        db_path: settings.dbPath,\n        web_port: parseInt(settings.webPort, 10),\n        web_auth_enabled: settings.authEnabled,\n        web_username: settings.username,\n        web_password: settings.password,\n        buffer_size: parseInt(settings.bufferSize, 10),\n        use_swap: settings.useSwap,\n        swap_size: parseInt(settings.swapSize, 10),\n        models_path: settings.detectionModelsPath,\n        default_detection_threshold: settings.defaultDetectionThreshold,\n        pre_detection_buffer: parseInt(settings.defaultPreBuffer, 10),\n        post_detection_buffer: parseInt(settings.defaultPostBuffer, 10)\n      };\n      \n      await enhancedFetch('/api/settings', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(mappedSettings),\n        signal: requestControllerRef.current?.signal,\n        timeout: 20000, // 20 second timeout for saving settings\n        retries: 1,     // Retry once\n        retryDelay: 2000 // 2 seconds between retries\n      });\n      \n      showStatusMessage('Settings saved successfully');\n    } catch (error) {\n      console.error('Error saving settings:', error);\n      showStatusMessage('Error saving settings: ' + error.message);\n    }\n  };\n  \n  // Handle input change\n  const handleInputChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    \n    setSettings(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n  \n  // Handle threshold slider change\n  const handleThresholdChange = (e) => {\n    const value = parseInt(e.target.value, 10);\n    setSettings(prev => ({\n      ...prev,\n      defaultDetectionThreshold: value\n    }));\n  };\n  \n  return html`\n    <section id=\"settings-page\" class=\"page\">\n      <div class=\"page-header flex justify-between items-center mb-4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow\">\n        <h2 class=\"text-xl font-bold\">Settings</h2>\n        <div class=\"controls\">\n          <button \n            id=\"save-settings-btn\" \n            class=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800\"\n            onClick=${saveSettings}\n          >\n            Save Settings\n          </button>\n        </div>\n      </div>\n      \n      <${ContentLoader}\n        isLoading=${isLoading}\n        hasData=${hasData}\n        loadingMessage=\"Loading settings...\"\n        emptyMessage=\"No settings available. Please try again later.\"\n      >\n        <div class=\"settings-container space-y-6\">\n          <div class=\"settings-group bg-white dark:bg-gray-800 rounded-lg shadow p-4\">\n            <h3 class=\"text-lg font-semibold mb-4 pb-2 border-b border-gray-200 dark:border-gray-700\">General Settings</h3>\n            <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n              <label for=\"setting-log-level\" class=\"font-medium\">Log Level</label>\n              <select \n                id=\"setting-log-level\" \n                name=\"logLevel\"\n                class=\"col-span-2 p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                value=${settings.logLevel}\n                onChange=${handleInputChange}\n              >\n                <option value=\"0\">Error</option>\n                <option value=\"1\">Warning</option>\n                <option value=\"2\">Info</option>\n                <option value=\"3\">Debug</option>\n              </select>\n            </div>\n          </div>\n          <div class=\"settings-group bg-white dark:bg-gray-800 rounded-lg shadow p-4\">\n          <h3 class=\"text-lg font-semibold mb-4 pb-2 border-b border-gray-200 dark:border-gray-700\">Storage Settings</h3>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-storage-path\" class=\"font-medium\">Storage Path</label>\n            <input \n              type=\"text\" \n              id=\"setting-storage-path\" \n              name=\"storagePath\"\n              class=\"col-span-2 p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              value=${settings.storagePath}\n              onChange=${handleInputChange}\n            />\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-storage-path-hls\" class=\"font-medium\">HLS Storage Path</label>\n            <div class=\"col-span-2\">\n              <input \n                type=\"text\" \n                id=\"setting-storage-path-hls\" \n                name=\"storagePathHls\"\n                class=\"w-full p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                value=${settings.storagePathHls}\n                onChange=${handleInputChange}\n              />\n              <span class=\"hint text-sm text-gray-500 dark:text-gray-400\">Optional path for HLS segments. If not specified, Storage Path will be used.</span>\n            </div>\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-max-storage\" class=\"font-medium\">Maximum Storage Size (GB)</label>\n            <div class=\"col-span-2 flex items-center\">\n              <input \n                type=\"number\" \n                id=\"setting-max-storage\" \n                name=\"maxStorage\"\n                min=\"0\" \n                class=\"p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                value=${settings.maxStorage}\n                onChange=${handleInputChange}\n              />\n              <span class=\"hint ml-2 text-sm text-gray-500 dark:text-gray-400\">0 = unlimited</span>\n            </div>\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-retention\" class=\"font-medium\">Retention Period (days)</label>\n            <input \n              type=\"number\" \n              id=\"setting-retention\" \n              name=\"retention\"\n              min=\"1\" \n              class=\"col-span-2 p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              value=${settings.retention}\n              onChange=${handleInputChange}\n            />\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-auto-delete\" class=\"font-medium\">Auto Delete Oldest</label>\n            <div class=\"col-span-2\">\n              <input \n                type=\"checkbox\" \n                id=\"setting-auto-delete\" \n                name=\"autoDelete\"\n                class=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:bg-gray-700 dark:border-gray-600\"\n                checked=${settings.autoDelete}\n                onChange=${handleInputChange}\n              />\n            </div>\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-db-path\" class=\"font-medium\">Database Path</label>\n            <input \n              type=\"text\" \n              id=\"setting-db-path\" \n              name=\"dbPath\"\n              class=\"col-span-2 p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              value=${settings.dbPath}\n              onChange=${handleInputChange}\n            />\n          </div>\n          </div>\n          \n          <div class=\"settings-group bg-white dark:bg-gray-800 rounded-lg shadow p-4\">\n          <h3 class=\"text-lg font-semibold mb-4 pb-2 border-b border-gray-200 dark:border-gray-700\">Web Interface Settings</h3>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-web-port\" class=\"font-medium\">Web Port</label>\n            <input \n              type=\"number\" \n              id=\"setting-web-port\" \n              name=\"webPort\"\n              min=\"1\" \n              max=\"65535\" \n              class=\"col-span-2 p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              value=${settings.webPort}\n              onChange=${handleInputChange}\n            />\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-auth-enabled\" class=\"font-medium\">Enable Authentication</label>\n            <div class=\"col-span-2\">\n              <input \n                type=\"checkbox\" \n                id=\"setting-auth-enabled\" \n                name=\"authEnabled\"\n                class=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:bg-gray-700 dark:border-gray-600\"\n                checked=${settings.authEnabled}\n                onChange=${handleInputChange}\n              />\n            </div>\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-username\" class=\"font-medium\">Username</label>\n            <input \n              type=\"text\" \n              id=\"setting-username\" \n              name=\"username\"\n              class=\"col-span-2 p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              value=${settings.username}\n              onChange=${handleInputChange}\n            />\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-password\" class=\"font-medium\">Password</label>\n            <input \n              type=\"password\" \n              id=\"setting-password\" \n              name=\"password\"\n              class=\"col-span-2 p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              value=${settings.password}\n              onChange=${handleInputChange}\n            />\n          </div>\n          </div>\n          \n          <div class=\"settings-group bg-white dark:bg-gray-800 rounded-lg shadow p-4\">\n          <h3 class=\"text-lg font-semibold mb-4 pb-2 border-b border-gray-200 dark:border-gray-700\">Memory Optimization</h3>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-buffer-size\" class=\"font-medium\">Buffer Size (KB)</label>\n            <input \n              type=\"number\" \n              id=\"setting-buffer-size\" \n              name=\"bufferSize\"\n              min=\"128\" \n              class=\"col-span-2 p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              value=${settings.bufferSize}\n              onChange=${handleInputChange}\n            />\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-use-swap\" class=\"font-medium\">Use Swap File</label>\n            <div class=\"col-span-2\">\n              <input \n                type=\"checkbox\" \n                id=\"setting-use-swap\" \n                name=\"useSwap\"\n                class=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:bg-gray-700 dark:border-gray-600\"\n                checked=${settings.useSwap}\n                onChange=${handleInputChange}\n              />\n            </div>\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-swap-size\" class=\"font-medium\">Swap Size (MB)</label>\n            <input \n              type=\"number\" \n              id=\"setting-swap-size\" \n              name=\"swapSize\"\n              min=\"32\" \n              class=\"col-span-2 p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              value=${settings.swapSize}\n              onChange=${handleInputChange}\n            />\n          </div>\n          </div>\n          \n          <div class=\"settings-group bg-white dark:bg-gray-800 rounded-lg shadow p-4\">\n          <h3 class=\"text-lg font-semibold mb-4 pb-2 border-b border-gray-200 dark:border-gray-700\">Detection-Based Recording</h3>\n          <div class=\"setting mb-4\">\n            <p class=\"setting-description mb-2 text-gray-700 dark:text-gray-300\">\n              Configure detection-based recording for streams. When enabled, recordings will only be saved when objects are detected.\n            </p>\n            <p class=\"setting-description mb-2 text-gray-700 dark:text-gray-300\">\n              <strong>Motion Detection:</strong> Built-in motion detection is available without requiring any external models. \n              Select \"motion\" as the detection model in stream settings to use this feature.\n            </p>\n            <p class=\"setting-description mb-2 text-gray-700 dark:text-gray-300\">\n              <strong>Optimized Motion Detection:</strong> Memory and CPU optimized motion detection for embedded devices.\n              Select \"motion\" as the detection model in stream settings to use this feature.\n            </p>\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-detection-models-path\" class=\"font-medium\">Detection Models Path</label>\n            <div class=\"col-span-2\">\n              <input \n                type=\"text\" \n                id=\"setting-detection-models-path\" \n                name=\"detectionModelsPath\"\n                placeholder=\"/var/lib/lightnvr/models\" \n                class=\"w-full p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                value=${settings.detectionModelsPath}\n                onChange=${handleInputChange}\n              />\n              <span class=\"hint text-sm text-gray-500 dark:text-gray-400\">Directory where detection models are stored</span>\n            </div>\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-default-detection-threshold\" class=\"font-medium\">Default Detection Threshold</label>\n            <div class=\"col-span-2\">\n              <div class=\"flex items-center\">\n                <input \n                  type=\"range\" \n                  id=\"setting-default-detection-threshold\" \n                  name=\"defaultDetectionThreshold\"\n                  min=\"0\" \n                  max=\"100\" \n                  step=\"1\" \n                  class=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700\"\n                  value=${settings.defaultDetectionThreshold}\n                  onChange=${handleThresholdChange}\n                />\n                <span id=\"threshold-value\" class=\"ml-2 min-w-[3rem] text-center\">${settings.defaultDetectionThreshold}%</span>\n              </div>\n              <span class=\"hint text-sm text-gray-500 dark:text-gray-400\">Confidence threshold for detection (0-100%)</span>\n            </div>\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-default-pre-buffer\" class=\"font-medium\">Default Pre-detection Buffer (seconds)</label>\n            <div class=\"col-span-2\">\n              <input \n                type=\"number\" \n                id=\"setting-default-pre-buffer\" \n                name=\"defaultPreBuffer\"\n                min=\"0\" \n                max=\"60\" \n                class=\"p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                value=${settings.defaultPreBuffer}\n                onChange=${handleInputChange}\n              />\n              <span class=\"hint text-sm text-gray-500 dark:text-gray-400\">Seconds of video to keep before detection</span>\n            </div>\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-default-post-buffer\" class=\"font-medium\">Default Post-detection Buffer (seconds)</label>\n            <div class=\"col-span-2\">\n              <input \n                type=\"number\" \n                id=\"setting-default-post-buffer\" \n                name=\"defaultPostBuffer\"\n                min=\"0\" \n                max=\"300\" \n                class=\"p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                value=${settings.defaultPostBuffer}\n                onChange=${handleInputChange}\n              />\n              <span class=\"hint text-sm text-gray-500 dark:text-gray-400\">Seconds of video to keep after detection</span>\n            </div>\n          </div>\n          </div>\n        </div>\n      <//>\n    </section>\n  `;\n}\n\n/**\n * Load SettingsView component\n */\nexport function loadSettingsView() {\n  const mainContent = document.getElementById('main-content');\n  if (!mainContent) return;\n  \n  // Render the SettingsView component to the container\n  import('../../preact.min.js').then(({ render }) => {\n    render(html`<${SettingsView} />`, mainContent);\n  });\n}\n"],"file":"assets/SettingsView-BO2qCRFq.js"}