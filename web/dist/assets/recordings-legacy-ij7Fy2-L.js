System.register(["./preact-app-legacy-CQDN8K9F.js"],(function(e,t){"use strict";return{setters:[null],execute:function(){var e=document.createElement("style");function t(e,t=3e3){let n=document.getElementById("status-message-container");n||(n=document.createElement("div"),n.id="status-message-container",n.className="fixed bottom-4 left-1/2 transform -translate-x-1/2 z-50 flex flex-col items-center",document.body.appendChild(n));const o=document.createElement("div");o.className="bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg mb-2 transition-all duration-300 opacity-0 transform translate-y-2",o.textContent=e,n.appendChild(o),setTimeout((()=>{o.classList.remove("opacity-0","translate-y-2")}),10),setTimeout((()=>{o.classList.add("opacity-0","translate-y-2"),setTimeout((()=>{o.parentNode===n&&n.removeChild(o),0===n.children.length&&document.body.removeChild(n)}),300)}),t)}function n(){let e=document.getElementById("batch-delete-modal-container");e||(e=document.createElement("div"),e.id="batch-delete-modal-container",document.body.appendChild(e)),e.innerHTML='\n        <div id="batch-delete-modal" class="modal hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50">\n            <div class="modal-content relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md mx-auto p-6 w-full">\n                <div class="modal-header flex justify-between items-center mb-4 pb-2 border-b border-gray-200 dark:border-gray-700">\n                    <h3 id="batch-delete-modal-title" class="text-xl font-bold text-gray-900 dark:text-white">Batch Delete Progress</h3>\n                    <button id="batch-delete-close-btn" class="close text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-2xl font-bold">&times;</button>\n                </div>\n                <div class="modal-body">\n                    <div id="batch-delete-status" class="mb-4 text-gray-700 dark:text-gray-300">\n                        Preparing to delete recordings...\n                    </div>\n                    <div class="progress-container bg-gray-200 dark:bg-gray-700 rounded-full h-4 mb-4">\n                        <div id="batch-delete-progress-bar" class="bg-green-500 h-4 rounded-full text-center text-xs text-white" style="width: 0%"></div>\n                    </div>\n                    <div class="flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-6">\n                        <div id="batch-delete-count">0 / 0</div>\n                        <div id="batch-delete-percentage">0%</div>\n                    </div>\n                    <div id="batch-delete-details" class="mb-4">\n                        <div class="flex justify-between mb-2">\n                            <span class="text-gray-700 dark:text-gray-300">Succeeded:</span>\n                            <span id="batch-delete-succeeded" class="font-bold text-green-600 dark:text-green-400">0</span>\n                        </div>\n                        <div class="flex justify-between">\n                            <span class="text-gray-700 dark:text-gray-300">Failed:</span>\n                            <span id="batch-delete-failed" class="font-bold text-red-600 dark:text-red-400">0</span>\n                        </div>\n                    </div>\n                    <div id="batch-delete-message" class="text-sm italic text-gray-600 dark:text-gray-400 mb-4"></div>\n                </div>\n                <div class="modal-footer flex justify-end pt-2 border-t border-gray-200 dark:border-gray-700">\n                    <button id="batch-delete-done-btn" class="btn btn-primary hidden">Done</button>\n                    <button id="batch-delete-cancel-btn" class="btn btn-secondary">Cancel</button>\n                </div>\n            </div>\n        </div>\n    ';const t=document.getElementById("batch-delete-modal"),n=document.getElementById("batch-delete-close-btn"),o=document.getElementById("batch-delete-done-btn"),r=document.getElementById("batch-delete-cancel-btn");n&&n.addEventListener("click",a),o&&o.addEventListener("click",a),r&&r.addEventListener("click",d),window.addEventListener("click",(e=>{e.target===t&&a()}))}function o(){const e=document.getElementById("batch-delete-modal");e||n(),function(){const e=document.getElementById("batch-delete-progress-bar");e&&(e.style.width="0%");const t=document.getElementById("batch-delete-status");t&&(t.textContent="Preparing to delete recordings...");const n=document.getElementById("batch-delete-count");n&&(n.textContent="0 / 0");const o=document.getElementById("batch-delete-percentage");o&&(o.textContent="0%");const a=document.getElementById("batch-delete-succeeded");a&&(a.textContent="0");const d=document.getElementById("batch-delete-failed");d&&(d.textContent="0");const r=document.getElementById("batch-delete-message");r&&(r.textContent="");const s=document.getElementById("batch-delete-done-btn");s&&s.classList.add("hidden");const l=document.getElementById("batch-delete-cancel-btn");l&&l.classList.remove("hidden")}(),e.classList.remove("hidden")}function a(){const e=document.getElementById("batch-delete-modal");e&&e.classList.add("hidden")}function d(){a(),t("Batch delete operation cancelled",5e3)}e.textContent=".sortable{position:relative;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}.sortable:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}@media (prefers-color-scheme: dark){.sortable:hover{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}}.sort-icon{margin-left:.375rem;display:inline-block;width:.625rem;opacity:.5}.sort-asc .sort-icon,.sort-desc .sort-icon{opacity:1}.filters-sidebar{width:100%;flex-shrink:0;border-radius:.5rem;padding:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}@media (min-width: 768px){.filters-sidebar{width:18rem}}.filters-sidebar{transition:transform .3s ease,opacity .3s ease,width .3s ease}.filters-sidebar.collapsed{margin-top:0;margin-bottom:0;max-height:0px;overflow:hidden;padding-top:0;padding-bottom:0;opacity:0}.filter-tag{display:inline-flex;align-items:center;border-radius:9999px;--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1));padding:.25rem .75rem;font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}@media (prefers-color-scheme: dark){.filter-tag{background-color:rgba(30,58,138,.3);--tw-text-opacity: 1;color:rgb(147 197 253 / var(--tw-text-opacity, 1))}}.filter-tag .remove-filter{margin-left:.5rem;cursor:pointer;font-size:1rem;line-height:1.5rem;font-weight:700;line-height:1}@media (max-width: 576px){#recordings-table{min-width:500px;max-width:100%}.recordings-container,.overflow-x-auto{max-width:100%}}\n/*$vite$:1*/",document.head.appendChild(e),window.updateBatchDeleteProgress=function(e){console.log("Updating batch delete progress UI:",e),o();const t=document.getElementById("batch-delete-progress-bar");if(t){if(console.log(`Updating progress bar: current=${e.current}, total=${e.total}`),e.total>0){const n=Math.round(e.current/e.total*100);console.log(`Setting progress bar width to ${n}%`),t.style.width=`${n}%`,t.classList.remove("animate-pulse"),t.offsetWidth}else if(e.current>0){const n=Math.min(90,e.current/10);console.log(`Setting progress bar width to ${n}% (estimated)`),t.style.width=`${n}%`,t.classList.add("animate-pulse"),t.offsetWidth}else e.complete?(console.log("Setting progress bar to 100% (complete)"),t.style.width="100%",t.classList.remove("animate-pulse"),t.offsetWidth):(console.log("Setting progress bar to 50% (indeterminate)"),t.style.width="50%",t.classList.add("animate-pulse"),t.offsetWidth);e.error?(t.classList.add("bg-red-500"),t.classList.remove("bg-blue-500")):(t.classList.add("bg-blue-500"),t.classList.remove("bg-red-500"))}const n=document.getElementById("batch-delete-status");n&&e.status&&(n.textContent=e.status);const a=document.getElementById("batch-delete-count");a&&(e.total>0?a.textContent=`${e.current} / ${e.total}`:a.textContent=`${e.current} / ?`);const d=document.getElementById("batch-delete-percentage");if(d)if(e.total>0){const t=Math.round(e.current/e.total*100);d.textContent=`${t}%`}else e.complete?d.textContent="100%":d.textContent="In progress";const r=document.getElementById("batch-delete-succeeded");r&&(r.textContent=e.succeeded||"0");const s=document.getElementById("batch-delete-failed");if(s&&(s.textContent=e.failed||"0"),e.complete){const o=document.getElementById("batch-delete-done-btn");o&&o.classList.remove("hidden");const a=document.getElementById("batch-delete-cancel-btn");a&&a.classList.add("hidden"),!n||e.status&&"Preparing to delete recordings..."!==e.status||(n.textContent="Batch delete operation complete"),t&&(t.style.width="100%",t.classList.remove("animate-pulse"))}},window.batchDeleteRecordingsByHttpRequest=function(e){return console.log("Using HTTP fallback for batch delete with params:",e),new Promise(((n,a)=>{o();let d=0;e.ids?d=e.ids.length:e.filter&&e.totalCount&&(d=e.totalCount),updateBatchDeleteProgress({current:0,total:d,status:"Using HTTP fallback for batch delete operation",succeeded:0,failed:0}),fetch("/api/recordings/batch-delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{if(!e.ok)throw new Error(`HTTP error ${e.status}: ${e.statusText}`);return e.json()})).then((e=>{console.log("HTTP batch delete result:",e);const o=e.total||d||0,a=e.succeeded||0,r=e.failed||0;updateBatchDeleteProgress({current:o,total:o,succeeded:a,failed:r,status:"Batch delete operation complete",complete:!0}),t(e.success?`Successfully deleted ${a} recordings`:`Deleted ${a} recordings with ${r} failures`,5e3),setTimeout((()=>{"function"==typeof loadRecordings&&loadRecordings()}),1e3),n(e)})).catch((e=>{console.error("HTTP batch delete error:",e),updateBatchDeleteProgress({current:0,total:0,succeeded:0,failed:0,status:`Error: ${e.message||"Unknown error"}`,complete:!0,error:!0}),t(`Error: ${e.message||"Unknown error"}`,5e3),a(e)}))}))},document.addEventListener("DOMContentLoaded",(()=>{if(console.log("Initializing batch delete modal"),n(),!document.getElementById("batch-delete-modal-container")){console.error("Batch delete modal container not found, creating it");const e=document.createElement("div");e.id="batch-delete-modal-container",document.body.appendChild(e),n()}"function"!=typeof window.updateBatchDeleteProgress&&(console.error("updateBatchDeleteProgress function not available, setting it up"),window.updateBatchDeleteProgress=updateBatchDeleteProgress),"function"!=typeof window.showBatchDeleteModal&&(console.error("showBatchDeleteModal function not available, setting it up"),window.showBatchDeleteModal=o)})),window.showBatchDeleteModal=o,window.updateBatchDeleteProgress=updateBatchDeleteProgress,window.initBatchDeleteModal=n}}}));
//# sourceMappingURL=recordings-legacy-ij7Fy2-L.js.map
