const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./preact-app-BK3T3Wjb.js","../css/preact-app.css"])))=>i.map(i=>d[i]);
var f=Object.freeze,v=Object.defineProperty;var i=(e,o)=>f(v(e,"raw",{value:f(o||e.slice())}));import{d as n,A as x,h as u,_ as P}from"./preact-app-BK3T3Wjb.js";var p,h;function S(){const[e,o]=n(""),[a,w]=n(""),[c,l]=n(!1),[g,s]=n("");n(()=>{const t=new URLSearchParams(window.location.search);t.has("error")?s("Invalid username or password"):t.has("auth_required")&&s("Authentication required. Please log in to continue.")}),x(null);const d=()=>{const r=new URLSearchParams(window.location.search).get("redirect");r?window.location.href=r:window.location.href="/index.html?t="+new Date().getTime()},y=async t=>{if(t.preventDefault(),!e||!a){s("Please enter both username and password");return}l(!0),s("");try{const r=btoa("".concat(e,":").concat(a));localStorage.setItem("auth",r);const m=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic ".concat(r)},body:JSON.stringify({username:e,password:a}),timeout:1e4});m.ok||m.status===302?d():(l(!1),s("Invalid username or password"),localStorage.removeItem("auth"))}catch(r){console.error("Login error:",r),r.message==="Request timed out"&&localStorage.getItem("auth")?(console.log("Login request timed out, proceeding with stored credentials"),d()):localStorage.getItem("auth")?(console.log("Login API error, but proceeding with stored credentials"),d()):(l(!1),s("Login failed. Please try again."))}};return u(h||(h=i(['\n    <section id="login-page" class="page flex items-center justify-center min-h-screen">\n      <div class="login-container w-full max-w-md p-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg">\n        <div class="text-center mb-8">\n          <h1 class="text-2xl font-bold">LightNVR</h1>\n          <p class="text-gray-600 dark:text-gray-400">Please sign in to continue</p>\n        </div>\n        \n        ','\n        \n        <form id="login-form" class="space-y-6" action="/api/auth/login" method="POST" onSubmit=','>\n          <div class="form-group">\n            <label for="username" class="block text-sm font-medium mb-1">Username</label>\n            <input \n              type="text" \n              id="username" \n              name="username"\n              class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"\n              placeholder="Enter your username" \n              value=',"\n              onChange=",'\n              required\n              autocomplete="username"\n            />\n          </div>\n          <div class="form-group">\n            <label for="password" class="block text-sm font-medium mb-1">Password</label>\n            <input \n              type="password" \n              id="password" \n              name="password"\n              class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"\n              placeholder="Enter your password" \n              value=',"\n              onChange=",'\n              required\n              autocomplete="current-password"\n            />\n          </div>\n          <div class="form-group">\n            <button \n              type="submit" \n              class="w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed"\n              disabled=',"\n            >\n              ",'\n            </button>\n          </div>\n        </form>\n        \n        <div class="mt-6 text-center text-sm text-gray-600 dark:text-gray-400">\n          <p>Default credentials: admin / admin</p>\n          <p class="mt-2">You can change these in Settings after login</p>\n        </div>\n      </div>\n    </section>\n  '])),g&&u(p||(p=i(['\n          <div class="mb-4 p-3 bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-200 rounded-lg">\n            ',"\n          </div>\n        "])),g),y,e,t=>o(t.target.value),a,t=>w(t.target.value),c,c?"Signing in...":"Sign In")}var b;function L(){const e=document.getElementById("main-content");e&&P(async()=>{const{render:o}=await import("./preact-app-BK3T3Wjb.js").then(a=>a.p);return{render:o}},__vite__mapDeps([0,1]),import.meta.url).then(({render:o})=>{o(u(b||(b=i(["<"," />"])),S),e)})}export{S as LoginView,L as loadLoginView};
//# sourceMappingURL=LoginView-CL0Be1TZ.js.map
