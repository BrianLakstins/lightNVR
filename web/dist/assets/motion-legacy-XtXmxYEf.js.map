{"version":3,"file":"motion-legacy-XtXmxYEf.js","sources":["../../js/components/preact/MotionView.jsx","../../js/pages/motion-page.jsx"],"sourcesContent":["/**\n * LightNVR Web Interface MotionView Component\n * Component for managing motion recording settings\n */\n\nimport { useState } from 'react';\nimport { showStatusMessage } from './ToastContainer.jsx';\nimport { ContentLoader } from './LoadingIndicator.jsx';\nimport {\n  useQuery,\n  useMutation,\n  useQueryClient,\n  fetchJSON\n} from '../../query-client.js';\n\n/**\n * MotionView component\n * @returns {JSX.Element} MotionView component\n */\nexport function MotionView() {\n  const queryClient = useQueryClient();\n  const [selectedStream, setSelectedStream] = useState(null);\n  const [configModalVisible, setConfigModalVisible] = useState(false);\n  const [currentConfig, setCurrentConfig] = useState({\n    enabled: true,\n    pre_buffer_seconds: 5,\n    post_buffer_seconds: 10,\n    max_file_duration: 300,\n    codec: 'h264',\n    quality: 'medium',\n    retention_days: 7\n  });\n\n  // Fetch streams data\n  const {\n    data: streamsResponse = [],\n    isLoading: streamsLoading\n  } = useQuery(['streams'], '/api/streams', {\n    timeout: 10000,\n    retries: 2,\n    retryDelay: 1000\n  });\n\n  // Fetch storage statistics\n  const {\n    data: storageStats,\n    isLoading: storageLoading\n  } = useQuery(['motionStorage'], '/api/motion/storage', {\n    timeout: 5000,\n    retries: 1,\n    retryDelay: 1000\n  });\n\n  // Process streams response\n  const streams = Array.isArray(streamsResponse) ? streamsResponse : (streamsResponse.streams || []);\n\n  // Mutation for saving motion config\n  const saveConfigMutation = useMutation({\n    mutationFn: async (data) => {\n      const { streamName, ...configData } = data;\n      const url = `/api/motion/config/${encodeURIComponent(streamName)}`;\n      return await fetchJSON(url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(configData),\n        timeout: 10000\n      });\n    },\n    onSuccess: () => {\n      showStatusMessage('Motion recording configuration saved');\n      setConfigModalVisible(false);\n      queryClient.invalidateQueries({ queryKey: ['motionConfig'] });\n      queryClient.invalidateQueries({ queryKey: ['motionStats'] });\n    },\n    onError: (error) => {\n      showStatusMessage(`Error saving configuration: ${error.message}`, 5000, 'error');\n    }\n  });\n\n  // Mutation for deleting motion config\n  const deleteConfigMutation = useMutation({\n    mutationFn: async (streamName) => {\n      const url = `/api/motion/config/${encodeURIComponent(streamName)}`;\n      return await fetchJSON(url, {\n        method: 'DELETE',\n        timeout: 10000\n      });\n    },\n    onSuccess: () => {\n      showStatusMessage('Motion recording disabled');\n      queryClient.invalidateQueries({ queryKey: ['motionConfig'] });\n      queryClient.invalidateQueries({ queryKey: ['motionStats'] });\n    },\n    onError: (error) => {\n      showStatusMessage(`Error disabling motion recording: ${error.message}`, 5000, 'error');\n    }\n  });\n\n  // Open configuration modal\n  const openConfigModal = async (stream) => {\n    setSelectedStream(stream);\n    \n    // Try to load existing configuration\n    try {\n      const config = await fetchJSON(`/api/motion/config/${encodeURIComponent(stream.name)}`, {\n        timeout: 5000\n      });\n      setCurrentConfig(config);\n    } catch (error) {\n      // No existing config, use defaults\n      setCurrentConfig({\n        enabled: true,\n        pre_buffer_seconds: 5,\n        post_buffer_seconds: 10,\n        max_file_duration: 300,\n        codec: 'h264',\n        quality: 'medium',\n        retention_days: 7\n      });\n    }\n    \n    setConfigModalVisible(true);\n  };\n\n  // Save configuration\n  const handleSaveConfig = () => {\n    if (!selectedStream) return;\n    \n    saveConfigMutation.mutate({\n      streamName: selectedStream.name,\n      ...currentConfig\n    });\n  };\n\n  // Disable motion recording\n  const handleDisableMotion = (streamName) => {\n    if (confirm(`Disable motion recording for ${streamName}?`)) {\n      deleteConfigMutation.mutate(streamName);\n    }\n  };\n\n  // Format bytes to human readable\n  const formatBytes = (bytes) => {\n    if (bytes === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return Math.round((bytes / Math.pow(k, i)) * 100) / 100 + ' ' + sizes[i];\n  };\n\n  // Format timestamp\n  const formatDate = (timestamp) => {\n    if (!timestamp) return 'N/A';\n    return new Date(timestamp * 1000).toLocaleString();\n  };\n\n  if (streamsLoading) {\n    return <ContentLoader />;\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold mb-2\">Motion Recording</h1>\n        <p className=\"text-gray-600 dark:text-gray-400\">\n          Configure ONVIF motion detection recording for your cameras\n        </p>\n      </div>\n\n      {/* Storage Statistics */}\n      {storageStats && (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8\">\n          <h2 className=\"text-xl font-semibold mb-4\">Storage Statistics</h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div className=\"bg-gray-50 dark:bg-gray-700 p-4 rounded\">\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">Total Recordings</div>\n              <div className=\"text-2xl font-bold\">{storageStats.total_recordings || 0}</div>\n            </div>\n            <div className=\"bg-gray-50 dark:bg-gray-700 p-4 rounded\">\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">Total Size</div>\n              <div className=\"text-2xl font-bold\">{formatBytes(storageStats.total_size_bytes || 0)}</div>\n            </div>\n            <div className=\"bg-gray-50 dark:bg-gray-700 p-4 rounded\">\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">Disk Usage</div>\n              <div className=\"text-2xl font-bold\">{(storageStats.disk_space_used_percent || 0).toFixed(1)}%</div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Streams List */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden\">\n        <div className=\"p-6 border-b border-gray-200 dark:border-gray-700\">\n          <h2 className=\"text-xl font-semibold\">Camera Motion Settings</h2>\n        </div>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n            <thead className=\"bg-gray-50 dark:bg-gray-700\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Camera\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Status\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Pre-Buffer\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Post-Buffer\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Retention\n                </th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Actions\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n              {streams.map((stream) => (\n                <StreamRow\n                  key={stream.name}\n                  stream={stream}\n                  onConfigure={openConfigModal}\n                  onDisable={handleDisableMotion}\n                />\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Configuration Modal */}\n      {configModalVisible && selectedStream && (\n        <ConfigModal\n          stream={selectedStream}\n          config={currentConfig}\n          onConfigChange={setCurrentConfig}\n          onSave={handleSaveConfig}\n          onClose={() => setConfigModalVisible(false)}\n          isSaving={saveConfigMutation.isPending}\n        />\n      )}\n    </div>\n  );\n}\n\n/**\n * StreamRow component for displaying individual stream motion settings\n */\nfunction StreamRow({ stream, onConfigure, onDisable }) {\n  const [stats, setStats] = useState(null);\n  const [config, setConfig] = useState(null);\n\n  // Fetch motion stats for this stream\n  const { data: statsData } = useQuery(\n    ['motionStats', stream.name],\n    `/api/motion/stats/${encodeURIComponent(stream.name)}`,\n    {\n      timeout: 5000,\n      retries: 1,\n      retryDelay: 1000,\n      onError: () => {\n        // No stats available, motion recording not configured\n      }\n    }\n  );\n\n  // Fetch motion config for this stream\n  const { data: configData } = useQuery(\n    ['motionConfig', stream.name],\n    `/api/motion/config/${encodeURIComponent(stream.name)}`,\n    {\n      timeout: 5000,\n      retries: 1,\n      retryDelay: 1000,\n      onError: () => {\n        // No config available\n      }\n    }\n  );\n\n  const isEnabled = configData?.enabled || false;\n\n  return (\n    <tr>\n      <td className=\"px-6 py-4 whitespace-nowrap\">\n        <div className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">{stream.name}</div>\n      </td>\n      <td className=\"px-6 py-4 whitespace-nowrap\">\n        <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${\n          isEnabled\n            ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200'\n            : 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300'\n        }`}>\n          {isEnabled ? 'Enabled' : 'Disabled'}\n        </span>\n      </td>\n      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400\">\n        {configData?.pre_buffer_seconds || '-'}s\n      </td>\n      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400\">\n        {configData?.post_buffer_seconds || '-'}s\n      </td>\n      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400\">\n        {configData?.retention_days || '-'} days\n      </td>\n      <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n        <button\n          onClick={() => onConfigure(stream)}\n          className=\"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 mr-4\"\n        >\n          Configure\n        </button>\n        {isEnabled && (\n          <button\n            onClick={() => onDisable(stream.name)}\n            className=\"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300\"\n          >\n            Disable\n          </button>\n        )}\n      </td>\n    </tr>\n  );\n}\n\n/**\n * ConfigModal component for editing motion recording configuration\n */\nfunction ConfigModal({ stream, config, onConfigChange, onSave, onClose, isSaving }) {\n  const handleChange = (field, value) => {\n    onConfigChange({\n      ...config,\n      [field]: value\n    });\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\n        <div className=\"p-6 border-b border-gray-200 dark:border-gray-700\">\n          <h2 className=\"text-2xl font-bold\">Motion Recording Configuration</h2>\n          <p className=\"text-gray-600 dark:text-gray-400 mt-1\">Camera: {stream.name}</p>\n        </div>\n\n        <div className=\"p-6 space-y-6\">\n          {/* Enabled Toggle */}\n          <div className=\"flex items-center justify-between\">\n            <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n              Enable Motion Recording\n            </label>\n            <label className=\"relative inline-flex items-center cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={config.enabled}\n                onChange={(e) => handleChange('enabled', e.target.checked)}\n                className=\"sr-only peer\"\n              />\n              <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600\"></div>\n            </label>\n          </div>\n\n          {/* Pre-Buffer Seconds */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Pre-Event Buffer (seconds)\n            </label>\n            <input\n              type=\"number\"\n              min=\"0\"\n              max=\"30\"\n              value={config.pre_buffer_seconds}\n              onChange={(e) => handleChange('pre_buffer_seconds', parseInt(e.target.value))}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n            />\n            <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\n              Seconds of video to include before motion event (0-30)\n            </p>\n          </div>\n\n          {/* Post-Buffer Seconds */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Post-Event Buffer (seconds)\n            </label>\n            <input\n              type=\"number\"\n              min=\"0\"\n              max=\"60\"\n              value={config.post_buffer_seconds}\n              onChange={(e) => handleChange('post_buffer_seconds', parseInt(e.target.value))}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n            />\n            <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\n              Seconds to continue recording after motion stops (0-60)\n            </p>\n          </div>\n\n          {/* Max File Duration */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Maximum File Duration (seconds)\n            </label>\n            <input\n              type=\"number\"\n              min=\"60\"\n              max=\"3600\"\n              step=\"60\"\n              value={config.max_file_duration}\n              onChange={(e) => handleChange('max_file_duration', parseInt(e.target.value))}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n            />\n            <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\n              Maximum duration for a single recording file (60-3600 seconds)\n            </p>\n          </div>\n\n          {/* Codec */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Video Codec\n            </label>\n            <select\n              value={config.codec}\n              onChange={(e) => handleChange('codec', e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n            >\n              <option value=\"h264\">H.264</option>\n              <option value=\"h265\">H.265</option>\n            </select>\n          </div>\n\n          {/* Quality */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Recording Quality\n            </label>\n            <select\n              value={config.quality}\n              onChange={(e) => handleChange('quality', e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n            >\n              <option value=\"low\">Low</option>\n              <option value=\"medium\">Medium</option>\n              <option value=\"high\">High</option>\n            </select>\n          </div>\n\n          {/* Retention Days */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Retention Period (days)\n            </label>\n            <input\n              type=\"number\"\n              min=\"1\"\n              max=\"365\"\n              value={config.retention_days}\n              onChange={(e) => handleChange('retention_days', parseInt(e.target.value))}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n            />\n            <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\n              Automatically delete recordings older than this many days (1-365)\n            </p>\n          </div>\n        </div>\n\n        <div className=\"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3\">\n          <button\n            onClick={onClose}\n            disabled={isSaving}\n            className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={onSave}\n            disabled={isSaving}\n            className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\"\n          >\n            {isSaving ? 'Saving...' : 'Save Configuration'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n","/**\n * LightNVR Web Interface Motion Recording Page\n * Entry point for the motion recording page\n */\n\nimport { render } from 'preact';\nimport { MotionView } from '../components/preact/MotionView.jsx';\nimport { QueryClientProvider, queryClient } from '../query-client.js';\nimport { Header } from \"../components/preact/Header.jsx\";\nimport { Footer } from \"../components/preact/Footer.jsx\";\nimport { ToastContainer } from \"../components/preact/ToastContainer.jsx\";\n\n// Render the MotionView component when the DOM is loaded\ndocument.addEventListener('DOMContentLoaded', () => {\n  // Get the container element\n  const container = document.getElementById('main-content');\n\n  if (container) {\n    render(\n      <QueryClientProvider client={queryClient}>\n        <Header />\n        <ToastContainer />\n        <MotionView />\n        <Footer />\n      </QueryClientProvider>,\n      container\n    );\n  }\n});\n\n"],"names":["MotionView","queryClient","useQueryClient","selectedStream","setSelectedStream","useState","configModalVisible","setConfigModalVisible","currentConfig","setCurrentConfig","enabled","pre_buffer_seconds","post_buffer_seconds","max_file_duration","codec","quality","retention_days","data","streamsResponse","isLoading","streamsLoading","useQuery","timeout","retries","retryDelay","storageStats","storageLoading","streams","Array","isArray","saveConfigMutation","useMutation","mutationFn","async","streamName","configData","url","encodeURIComponent","fetchJSON","method","headers","body","JSON","stringify","onSuccess","showStatusMessage","invalidateQueries","queryKey","onError","error","message","deleteConfigMutation","openConfigModal","stream","config","name","handleDisableMotion","confirm","mutate","ContentLoader","jsxs","className","children","jsx","total_recordings","bytes","i","Math","floor","log","round","pow","total_size_bytes","disk_space_used_percent","toFixed","map","StreamRow","onConfigure","onDisable","ConfigModal","onConfigChange","onSave","handleSaveConfig","onClose","isSaving","isPending","stats","setStats","setConfig","statsData","isEnabled","onClick","handleChange","field","value","type","checked","onChange","e","target","min","max","parseInt","step","disabled","document","addEventListener","container","getElementById","render","QueryClientProvider","client","Header","ToastContainer","Footer"],"mappings":"kWAmBO,SAASA,IACd,MAAMC,EAAcC,KACbC,EAAgBC,GAAqBC,EAAS,OAC9CC,EAAoBC,GAAyBF,GAAS,IACtDG,EAAeC,GAAoBJ,EAAS,CACjDK,SAAS,EACTC,mBAAoB,EACpBC,oBAAqB,GACrBC,kBAAmB,IACnBC,MAAO,OACPC,QAAS,SACTC,eAAgB,KAKhBC,KAAMC,EAAkB,GACxBC,UAAWC,GACTC,EAAS,CAAC,WAAY,eAAgB,CACxCC,QAAS,IACTC,QAAS,EACTC,WAAY,OAKZP,KAAMQ,EACNN,UAAWO,GACTL,EAAS,CAAC,iBAAkB,sBAAuB,CACrDC,QAAS,IACTC,QAAS,EACTC,WAAY,MAIRG,EAAUC,MAAMC,QAAQX,GAAmBA,EAAmBA,EAAgBS,SAAW,GAGzFG,EAAqBC,EAAY,CACrCC,WAAYC,UACV,MAAMC,WAAEA,KAAeC,GAAelB,EAChCmB,EAAM,sBAAsBC,mBAAmBH,KAC9C,aAAMI,EAAUF,EAAK,CAC1BG,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAUR,GACrBb,QAAS,KACV,EAEHsB,UAAWA,KACTC,EAAkB,wCAClBtC,GAAsB,GACtBN,EAAY6C,kBAAkB,CAAEC,SAAU,CAAC,kBAC3C9C,EAAY6C,kBAAkB,CAAEC,SAAU,CAAC,gBAAgB,EAE7DC,QAAUC,IACRJ,EAAkB,+BAA+BI,EAAMC,UAAW,IAAM,QAAO,IAK7EC,EAAuBpB,EAAY,CACvCC,WAAYC,UACV,MAAMG,EAAM,sBAAsBC,mBAAmBH,KAC9C,aAAMI,EAAUF,EAAK,CAC1BG,OAAQ,SACRjB,QAAS,KACV,EAEHsB,UAAWA,KACTC,EAAkB,6BAClB5C,EAAY6C,kBAAkB,CAAEC,SAAU,CAAC,kBAC3C9C,EAAY6C,kBAAkB,CAAEC,SAAU,CAAC,gBAAgB,EAE7DC,QAAUC,IACRJ,EAAkB,qCAAqCI,EAAMC,UAAW,IAAM,QAAO,IAKnFE,EAAkBnB,UACtB7B,EAAkBiD,GAGd,IACI,MAAAC,QAAehB,EAAU,sBAAsBD,mBAAmBgB,EAAOE,QAAS,CACtFjC,QAAS,MAEXb,EAAiB6C,SACVL,GAEUxC,EAAA,CACfC,SAAS,EACTC,mBAAoB,EACpBC,oBAAqB,GACrBC,kBAAmB,IACnBC,MAAO,OACPC,QAAS,SACTC,eAAgB,GACjB,CAGHT,GAAsB,EAAI,EActBiD,EAAuBtB,IACvBuB,QAAQ,gCAAgCvB,OAC1CiB,EAAqBO,OAAOxB,EAAU,EAmB1C,OAAId,IACMuC,EAAc,IAItBC,EAAC,MAAI,CAAAC,UAAU,8BACbC,SAAA,CAACF,EAAA,MAAA,CAAIC,UAAU,OACbC,SAAA,CAACC,EAAA,KAAA,CAAGF,UAAU,0BAA0BC,SAAgB,qBACvDC,EAAA,IAAA,CAAEF,UAAU,mCAAmCC,SAEhD,mEAIDrC,GACCmC,EAAC,MAAI,CAAAC,UAAU,0DACbC,SAAA,CAACC,EAAA,KAAA,CAAGF,UAAU,6BAA6BC,SAAkB,uBAC7DF,EAAC,MAAI,CAAAC,UAAU,wCACbC,SAAA,CAACF,EAAA,MAAA,CAAIC,UAAU,0CACbC,SAAA,CAACC,EAAA,MAAA,CAAIF,UAAU,2CAA2CC,SAAgB,uBACzE,MAAI,CAAAD,UAAU,qBAAsBC,SAAArC,EAAauC,kBAAoB,OAExEJ,EAAC,MAAI,CAAAC,UAAU,0CACbC,SAAA,CAACC,EAAA,MAAA,CAAIF,UAAU,2CAA2CC,SAAU,eACpEC,EAAC,OAAIF,UAAU,qBAAsBC,SAtC5BG,KACf,GAAU,IAAVA,EAAoB,MAAA,MACxB,MAEMC,EAAIC,KAAKC,MAAMD,KAAKE,IAAIJ,GAASE,KAAKE,IAFlC,OAGV,OAAOF,KAAKG,MAAOL,EAAQE,KAAKI,IAHtB,KAG6BL,GAAM,KAAO,IAAM,IAF5C,CAAC,IAAK,KAAM,KAAM,KAAM,MAEgCA,EAAC,GAiCZzC,EAAa+C,kBAAoB,QAEpFZ,EAAC,MAAI,CAAAC,UAAU,0CACbC,SAAA,CAACC,EAAA,MAAA,CAAIF,UAAU,2CAA2CC,SAAU,eACpEF,EAAC,MAAI,CAAAC,UAAU,qBAAuBC,SAAA,EAAarC,EAAAgD,yBAA2B,GAAGC,QAAQ,GAAG,gBAOpGd,EAAC,MAAI,CAAAC,UAAU,iEACbC,SAAA,CAACC,EAAA,MAAA,CAAIF,UAAU,oDACbC,SAAAC,EAAC,MAAGF,UAAU,wBAAwBC,wCAGvC,MAAI,CAAAD,UAAU,kBACbC,SAACF,EAAA,QAAA,CAAMC,UAAU,2DACfC,SAAA,CAAAC,EAAC,QAAM,CAAAF,UAAU,8BACfC,SAAAF,EAAC,KACC,CAAAE,SAAA,CAACC,EAAA,KAAA,CAAGF,UAAU,oGAAoGC,SAElH,WACCC,EAAA,KAAA,CAAGF,UAAU,oGAAoGC,SAElH,WACCC,EAAA,KAAA,CAAGF,UAAU,oGAAoGC,SAElH,eACCC,EAAA,KAAA,CAAGF,UAAU,oGAAoGC,SAElH,gBACCC,EAAA,KAAA,CAAGF,UAAU,oGAAoGC,SAElH,cACCC,EAAA,KAAA,CAAGF,UAAU,qGAAqGC,SAEnH,mBAGH,QAAM,CAAAD,UAAU,0EACdC,SAAQnC,EAAAgD,KAAKtB,GACZU,EAACa,EAAA,CAECvB,SACAwB,YAAazB,EACb0B,UAAWtB,GAHNH,EAAOE,kBAYvBjD,GAAsBH,GACrB4D,EAACgB,EAAA,CACC1B,OAAQlD,EACRmD,OAAQ9C,EACRwE,eAAgBvE,EAChBwE,OAnHiBC,KAClB/E,GAEL2B,EAAmB4B,OAAO,CACxBxB,WAAY/B,EAAeoD,QACxB/C,GACJ,EA8GK2E,QAASA,IAAM5E,GAAsB,GACrC6E,SAAUtD,EAAmBuD,cAKvC,CAKA,SAAST,GAAUvB,OAAEA,EAAQwB,YAAAA,EAAAC,UAAaA,IACxC,MAAOQ,EAAOC,GAAYlF,EAAS,OAC5BiD,EAAQkC,GAAanF,EAAS,OAG7BY,KAAMwE,GAAcpE,EAC1B,CAAC,cAAegC,EAAOE,MACvB,qBAAqBlB,mBAAmBgB,EAAOE,QAC/C,CACEjC,QAAS,IACTC,QAAS,EACTC,WAAY,IACZwB,QAASA,UAOL/B,KAAMkB,GAAed,EAC3B,CAAC,eAAgBgC,EAAOE,MACxB,sBAAsBlB,mBAAmBgB,EAAOE,QAChD,CACEjC,QAAS,IACTC,QAAS,EACTC,WAAY,IACZwB,QAASA,SAMP0C,EAAYvD,GAAYzB,UAAW,EAEzC,SACG,KACC,CAAAoD,SAAA,CAACC,EAAA,KAAA,CAAGF,UAAU,8BACZC,SAAAC,EAAC,OAAIF,UAAU,uDAAwDC,SAAOT,EAAAE,SAE/EQ,EAAA,KAAA,CAAGF,UAAU,8BACZC,WAAC,OAAK,CAAAD,UAAW,kEACf6B,EACI,oEACA,iEAEH5B,SAAY4B,EAAA,UAAY,eAG7B9B,EAAC,KAAG,CAAAC,UAAU,uEACXC,SAAA,CAAA3B,GAAYxB,oBAAsB,IAAI,OAEzCiD,EAAC,KAAG,CAAAC,UAAU,uEACXC,SAAA,CAAA3B,GAAYvB,qBAAuB,IAAI,OAE1CgD,EAAC,KAAG,CAAAC,UAAU,uEACXC,SAAA,CAAA3B,GAAYnB,gBAAkB,IAAI,WAErC4C,EAAC,KAAG,CAAAC,UAAU,6DACZC,SAAA,CAAAC,EAAC,SAAA,CACC4B,QAASA,IAAMd,EAAYxB,GAC3BQ,UAAU,qFACXC,SAAA,cAGA4B,GACC3B,EAAC,SAAA,CACC4B,QAASA,IAAMb,EAAUzB,EAAOE,MAChCM,UAAU,4EACXC,SAAA,iBAOX,CAKA,SAASiB,GAAY1B,OAAEA,EAAQC,OAAAA,EAAA0B,eAAQA,SAAgBC,EAAQE,QAAAA,EAAAC,SAASA,IAChE,MAAAQ,EAAeA,CAACC,EAAOC,KACZd,EAAA,IACV1B,EACHuC,CAACA,GAAQC,GACV,EAGH,SACG,MAAI,CAAAjC,UAAU,6EACbC,SAACF,EAAA,MAAA,CAAIC,UAAU,oGACbC,SAAA,CAACF,EAAA,MAAA,CAAIC,UAAU,oDACbC,SAAA,CAACC,EAAA,KAAA,CAAGF,UAAU,qBAAqBC,SAA8B,mCACjEF,EAAC,IAAE,CAAAC,UAAU,wCAAwCC,SAAA,CAAA,WAAST,EAAOE,WAGvEK,EAAC,MAAI,CAAAC,UAAU,gBAEbC,SAAA,CAACF,EAAA,MAAA,CAAIC,UAAU,oCACbC,SAAA,CAACC,EAAA,QAAA,CAAMF,UAAU,uDAAuDC,SAExE,4BACAF,EAAC,QAAM,CAAAC,UAAU,mDACfC,SAAA,CAAAC,EAAC,QAAA,CACCgC,KAAK,WACLC,QAAS1C,EAAO5C,QAChBuF,SAAWC,GAAMN,EAAa,UAAWM,EAAEC,OAAOH,SAClDnC,UAAU,iBAEZE,EAAC,MAAI,CAAAF,UAAU,wcAKlB,MACC,CAAAC,SAAA,CAACC,EAAA,QAAA,CAAMF,UAAU,kEAAkEC,SAEnF,+BACAC,EAAC,QAAA,CACCgC,KAAK,SACLK,IAAI,IACJC,IAAI,KACJP,MAAOxC,EAAO3C,mBACdsF,SAAWC,GAAMN,EAAa,qBAAsBU,SAASJ,EAAEC,OAAOL,QACtEjC,UAAU,oLAEXE,EAAA,IAAA,CAAEF,UAAU,gDAAgDC,SAE7D,gEAID,MACC,CAAAA,SAAA,CAACC,EAAA,QAAA,CAAMF,UAAU,kEAAkEC,SAEnF,gCACAC,EAAC,QAAA,CACCgC,KAAK,SACLK,IAAI,IACJC,IAAI,KACJP,MAAOxC,EAAO1C,oBACdqF,SAAWC,GAAMN,EAAa,sBAAuBU,SAASJ,EAAEC,OAAOL,QACvEjC,UAAU,oLAEXE,EAAA,IAAA,CAAEF,UAAU,gDAAgDC,SAE7D,iEAID,MACC,CAAAA,SAAA,CAACC,EAAA,QAAA,CAAMF,UAAU,kEAAkEC,SAEnF,oCACAC,EAAC,QAAA,CACCgC,KAAK,SACLK,IAAI,KACJC,IAAI,OACJE,KAAK,KACLT,MAAOxC,EAAOzC,kBACdoF,SAAWC,GAAMN,EAAa,oBAAqBU,SAASJ,EAAEC,OAAOL,QACrEjC,UAAU,oLAEXE,EAAA,IAAA,CAAEF,UAAU,gDAAgDC,SAE7D,wEAID,MACC,CAAAA,SAAA,CAACC,EAAA,QAAA,CAAMF,UAAU,kEAAkEC,SAEnF,gBACAF,EAAC,SAAA,CACCkC,MAAOxC,EAAOxC,MACdmF,SAAWC,GAAMN,EAAa,QAASM,EAAEC,OAAOL,OAChDjC,UAAU,kLAEVC,SAAA,CAACC,EAAA,SAAA,CAAO+B,MAAM,OAAOhC,SAAK,UACzBC,EAAA,SAAA,CAAO+B,MAAM,OAAOhC,SAAK,kBAK7B,MACC,CAAAA,SAAA,CAACC,EAAA,QAAA,CAAMF,UAAU,kEAAkEC,SAEnF,sBACAF,EAAC,SAAA,CACCkC,MAAOxC,EAAOvC,QACdkF,SAAWC,GAAMN,EAAa,UAAWM,EAAEC,OAAOL,OAClDjC,UAAU,kLAEVC,SAAA,CAACC,EAAA,SAAA,CAAO+B,MAAM,MAAMhC,SAAG,QACtBC,EAAA,SAAA,CAAO+B,MAAM,SAAShC,SAAM,WAC5BC,EAAA,SAAA,CAAO+B,MAAM,OAAOhC,SAAI,iBAK5B,MACC,CAAAA,SAAA,CAACC,EAAA,QAAA,CAAMF,UAAU,kEAAkEC,SAEnF,4BACAC,EAAC,QAAA,CACCgC,KAAK,SACLK,IAAI,IACJC,IAAI,MACJP,MAAOxC,EAAOtC,eACdiF,SAAWC,GAAMN,EAAa,iBAAkBU,SAASJ,EAAEC,OAAOL,QAClEjC,UAAU,oLAEXE,EAAA,IAAA,CAAEF,UAAU,gDAAgDC,SAE7D,4EAIJF,EAAC,MAAI,CAAAC,UAAU,+EACbC,SAAA,CAAAC,EAAC,SAAA,CACC4B,QAASR,EACTqB,SAAUpB,EACVvB,UAAU,gSACXC,SAAA,WAGDC,EAAC,SAAA,CACC4B,QAASV,EACTuB,SAAUpB,EACVvB,UAAU,oNAETC,WAAW,YAAc,8BAMtC,CC9dA2C,SAASC,iBAAiB,oBAAoB,KAEtC,MAAAC,EAAYF,SAASG,eAAe,gBAEtCD,GACFE,EACEjD,EAACkD,EAAoB,CAAAC,OAAQ9G,EAC3B6D,SAAA,CAAAC,EAACiD,EAAO,MACPC,EAAe,MACfjH,EAAW,MACXkH,EAAO,CAAA,MAEVP,EACF"}