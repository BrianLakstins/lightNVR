import{d as C,A as j,y as T,u as a,E as z,q as U,Q as J,k as G}from"./query-client-mfCUf3pQ.js";/* empty css               */import{s as Q,c as K,t as X,L as Y}from"./LiveView-DCEzrYae.js";import{s as Z,a as ee,b as te,c as w,d as oe,H as ne,F as re}from"./Footer-BFueUtxh.js";function ae(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}function se(){const[g,k]=C([]),[f,$]=C(()=>new URLSearchParams(window.location.search).get("layout")||"4"),[y,v]=C(()=>new URLSearchParams(window.location.search).get("stream")||""),[R,_]=C(!1),[F,I]=C(!0),[b,P]=C(()=>{const r=new URLSearchParams(window.location.search).get("page");return r?Math.max(0,parseInt(r,10)-1):0}),x=j(null),h=j({}),N=j({});T(()=>{Z(),ee(),te();const e=()=>{M()},r=()=>{document.hidden?(console.log("Page hidden, pausing WebRTC streams"),Object.keys(h.current).forEach(o=>{const n=h.current[o];if(n&&n.connectionState!=="closed"){const i="video-".concat(o.replace(/\s+/g,"-")),t=document.getElementById(i);t&&t.pause()}})):(console.log("Page visible, resuming WebRTC streams"),Object.keys(h.current).forEach(o=>{const n=h.current[o];if(n&&n.connectionState!=="closed"){const i="video-".concat(o.replace(/\s+/g,"-")),t=document.getElementById(i);t&&t.play().catch(s=>{console.warn("Could not resume video for ".concat(o,":"),s)})}}))};window.addEventListener("beforeunload",e),document.addEventListener("visibilitychange",r);const l=setInterval(()=>{Object.keys(h.current).forEach(o=>{const n=h.current[o];if(n&&(console.debug("WebRTC connection state for ".concat(o,": ").concat(n.connectionState,", ICE state: ").concat(n.iceConnectionState)),n.iceConnectionState==="failed"||n.iceConnectionState==="disconnected")){console.warn("WebRTC connection for ".concat(o," is in ").concat(n.iceConnectionState," state, will attempt reconnect")),S(o);const i=g.find(t=>t.name===o);i&&(console.log("Attempting to reconnect WebRTC for stream ".concat(o)),L(i))}})},3e4);return()=>{window.removeEventListener("beforeunload",e),document.removeEventListener("visibilitychange",r),clearInterval(l),M()}},[g]),T(()=>{I(!0);const e=setTimeout(()=>{console.warn("Stream loading timed out"),I(!1),w("Loading streams timed out. Please try refreshing the page.")},15e3);O().then(r=>{if(clearTimeout(e),r&&r.length>0){k(r);const o=new URLSearchParams(window.location.search).get("stream");o&&r.some(n=>n.name===o)?v(o):(!y||!r.some(n=>n.name===y))&&v(r[0].name)}else console.warn("No streams returned from API");I(!1)}).catch(r=>{clearTimeout(e),console.error("Error loading streams:",r),w("Error loading streams: "+r.message),I(!1)})},[]),T(()=>{B()},[f,y,g,b]),T(()=>{const e=new URL(window.location);b===0?e.searchParams.delete("page"):e.searchParams.set("page",b+1),f&&f!=="4"?e.searchParams.set("layout",f):f==="4"&&e.searchParams.delete("layout"),f==="1"&&y?e.searchParams.set("stream",y):e.searchParams.delete("stream"),window.history.replaceState({},"",e)},[b,f,y]);const O=async()=>{try{const e=new Promise((m,d)=>{setTimeout(()=>d(new Error("Request timed out")),5e3)}),r=fetch("/api/streams"),l=await Promise.race([r,e]);if(!l.ok)throw new Error("Failed to load streams");const o=new Promise((m,d)=>{setTimeout(()=>d(new Error("JSON parsing timed out")),3e3)}),n=l.json(),t=(await Promise.race([n,o])||[]).map(m=>{const d=new Promise((u,H)=>{setTimeout(()=>H(new Error("Timeout fetching details for stream ".concat(m.name))),3e3)}),p=fetch("/api/streams/".concat(encodeURIComponent(m.id||m.name))).then(u=>{if(!u.ok)throw new Error("Failed to load details for stream ".concat(m.name));return u.json()});return Promise.race([p,d]).catch(u=>(console.error("Error loading details for stream ".concat(m.name,":"),u),m))}),s=await Promise.all(t);console.log("Loaded detailed streams for WebRTC view:",s);const c=s.filter(m=>m.is_deleted?(console.log("Stream ".concat(m.name," is soft deleted, filtering out")),!1):m.enabled?m.streaming_enabled?!0:(console.log("Stream ".concat(m.name," is not configured for HLS, filtering out")),!1):(console.log("Stream ".concat(m.name," is inactive, filtering out")),!1));return console.log("Filtered streams for WebRTC view:",c),c||[]}catch(e){return console.error("Error loading streams for WebRTC view:",e),w("Error loading streams: "+e.message),[]}},E=()=>{switch(f){case"1":return 1;case"2":return 2;case"4":return 4;case"6":return 6;case"9":return 9;case"16":return 16;default:return 4}},B=()=>{if(!x.current)return;const e=x.current.querySelector(".placeholder");if(x.current.innerHTML="",e&&g.length===0){x.current.appendChild(e);return}let r=g;if(f==="1"&&y)r=g.filter(o=>o.name===y);else{const o=E(),n=Math.ceil(g.length/o);if(b>=n){P(Math.max(0,n-1));return}const i=b*o,t=Math.min(i+o,g.length);r=g.slice(i,t)}const l=r.map(o=>o.name);Object.keys(h.current).forEach(o=>{l.includes(o)||(console.log("Cleaning up WebRTC connection for stream ".concat(o," as it's not on the current page")),S(o))}),r.forEach((o,n)=>{q(o),h.current[o.name]?console.log("WebRTC connection for stream ".concat(o.name," already exists, reusing")):setTimeout(()=>{L(o)},n*500)})},q=e=>{const r=e.id||e.name,l=document.createElement("div");l.className="video-cell",l.dataset.streamName=e.name,l.dataset.streamId=r,l.style.position="relative";const o=document.createElement("video");o.id="video-".concat(e.name.replace(/\s+/g,"-")),o.className="video-element",o.playsInline=!0,o.autoplay=!0,o.muted=!0,o.style.pointerEvents="none";const n=document.createElement("div");n.className="loading-indicator",n.innerHTML='\n      <div className="spinner"></div>\n      <p>Connecting...</p>\n    ',n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",n.style.display="flex",n.style.flexDirection="column",n.style.justifyContent="center",n.style.alignItems="center",n.style.backgroundColor="rgba(0, 0, 0, 0.7)",n.style.color="white",n.style.zIndex="20";const i=document.createElement("div");i.className="error-indicator",i.style.display="none",i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%",i.style.flexDirection="column",i.style.justifyContent="center",i.style.alignItems="center",i.style.backgroundColor="rgba(0, 0, 0, 0.7)",i.style.color="white",i.style.zIndex="20";const t=document.createElement("div");t.className="stream-name-overlay",t.textContent=e.name,t.style.position="absolute",t.style.top="10px",t.style.left="10px",t.style.padding="5px 10px",t.style.backgroundColor="rgba(0, 0, 0, 0.5)",t.style.color="white",t.style.borderRadius="4px",t.style.fontSize="14px",t.style.zIndex="15";const s=document.createElement("div");s.className="stream-controls",s.innerHTML='\n      <button class="snapshot-btn" title="Take Snapshot" data-id="'.concat(r,'" data-name="').concat(e.name,'">\n        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg>\n      </button>\n      <button class="fullscreen-btn" title="Toggle Fullscreen" data-id="').concat(r,'" data-name="').concat(e.name,'">\n        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path></svg>\n      </button>\n    '),s.style.position="absolute",s.style.bottom="10px",s.style.right="10px",s.style.display="flex",s.style.gap="10px",s.style.zIndex="30",s.style.backgroundColor="rgba(0, 0, 0, 0.5)",s.style.padding="5px",s.style.borderRadius="4px",s.style.pointerEvents="auto";const c=document.createElement("canvas");c.id="canvas-".concat(e.name.replace(/\s+/g,"-")),c.className="detection-overlay",c.style.position="absolute",c.style.top="0",c.style.left="0",c.style.width="100%",c.style.height="100%",c.style.pointerEvents="none",c.style.zIndex="5",l.appendChild(o),l.appendChild(n),l.appendChild(i),l.appendChild(t),l.appendChild(s),l.appendChild(c),x.current.appendChild(l),l.querySelectorAll("button").forEach(u=>{u.style.position="relative",u.style.zIndex="30",u.style.pointerEvents="auto",u.style.cursor="pointer",u.style.backgroundColor="transparent",u.style.border="none",u.style.padding="5px",u.style.borderRadius="4px",u.style.color="white",u.style.transition="background-color 0.2s",u.addEventListener("mouseover",()=>{u.style.backgroundColor="rgba(255, 255, 255, 0.2)"}),u.addEventListener("mouseout",()=>{u.style.backgroundColor="transparent"})});const d=l.querySelector(".snapshot-btn");d&&d.addEventListener("click",u=>{console.log("Snapshot button clicked for stream:",e.name),u.preventDefault(),u.stopPropagation(),A(r,u)});const p=l.querySelector(".fullscreen-btn");p&&p.addEventListener("click",u=>{console.log("Fullscreen button clicked for stream:",e.name),u.preventDefault(),u.stopPropagation(),V(e.name)})},L=e=>{const r="video-".concat(e.name.replace(/\s+/g,"-")),l=document.getElementById(r),o=l?l.closest(".video-cell"):null;if(!l||!o)return;const n=o.querySelector(".loading-indicator");n&&(n.style.display="flex");const i="canvas-".concat(e.name.replace(/\s+/g,"-"));let t=document.getElementById(i);t||(t=document.createElement("canvas"),t.id=i,t.className="detection-overlay",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",o.appendChild(t));const s=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}],iceTransportPolicy:"all",bundlePolicy:"balanced",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});h.current[e.name]=s,s.ontrack=d=>{console.log("Track received for stream ".concat(e.name,":"),d),d.track.kind==="video"&&(l.srcObject=d.streams[0],l.onloadeddata=()=>{n&&(n.style.display="none")})},s.onicecandidate=d=>{d.candidate&&console.log("ICE candidate for stream ".concat(e.name,":"),d.candidate)},s.oniceconnectionstatechange=()=>{console.log("ICE connection state for stream ".concat(e.name,":"),s.iceConnectionState),(s.iceConnectionState==="failed"||s.iceConnectionState==="disconnected")&&W(e.name,"WebRTC connection failed")},s.addTransceiver("video",{direction:"recvonly"}),s.addTransceiver("audio",{direction:"recvonly"});const c={offerToReceiveAudio:!0,offerToReceiveVideo:!0},m=setTimeout(()=>{console.warn("WebRTC setup timed out for stream ".concat(e.name)),W(e.name,"WebRTC setup timed out"),h.current[e.name]&&S(e.name)},15e3);s.createOffer(c).then(d=>(console.log("Created offer for stream ".concat(e.name,":"),d),console.log("Original SDP for stream ".concat(e.name,":"),d.sdp),(!d.sdp.includes("a=ice-ufrag:")||!d.sdp.includes("a=ice-pwd:"))&&console.warn("SDP for stream ".concat(e.name," is missing ice-ufrag or ice-pwd!")),console.log("Using original offer for stream ".concat(e.name)),s.setLocalDescription(d))).then(()=>(console.log("Set local description for stream ".concat(e.name)),D(e.name,s.localDescription))).then(d=>(console.log("Received answer for stream ".concat(e.name,":"),d),s.setRemoteDescription(new RTCSessionDescription(d)))).then(()=>{console.log("Set remote description for stream ".concat(e.name)),clearTimeout(m),console.log("Stream ".concat(e.name," detection settings:"),{detection_based_recording:e.detection_based_recording,detection_model:e.detection_model,detection_threshold:e.detection_threshold}),e.detection_based_recording&&e.detection_model?(console.log("Starting detection polling for stream ".concat(e.name)),Q(e.name,t,l,N.current)):console.log("Detection not enabled for stream ".concat(e.name))}).catch(d=>{clearTimeout(m),console.error("Error setting up WebRTC for stream ".concat(e.name,":"),d),W(e.name,d.message)})},D=async(e,r)=>{try{const l=localStorage.getItem("auth"),o={type:r.type,sdp:r.sdp};console.log("Sending formatted offer for stream ".concat(e,":"),o);const n=new AbortController,i=n.signal,t=setTimeout(()=>{console.warn("Aborting WebRTC offer request for stream ".concat(e," due to timeout")),n.abort()},8e3);try{const s=await fetch("/api/webrtc?src=".concat(encodeURIComponent(e)),{method:"POST",headers:{"Content-Type":"application/json",...l?{Authorization:"Basic "+l}:{}},body:JSON.stringify(o),signal:i});if(clearTimeout(t),!s.ok)throw new Error("Failed to send offer: ".concat(s.status," ").concat(s.statusText));const c=new AbortController,m=c.signal,d=setTimeout(()=>{console.warn("Aborting JSON parsing for stream ".concat(e," due to timeout")),c.abort()},5e3);try{const p=await s.text();clearTimeout(d);try{return JSON.parse(p)}catch(u){throw console.error("Error parsing JSON for stream ".concat(e,":"),u),console.log("Raw response text: ".concat(p)),new Error("Failed to parse WebRTC answer: ".concat(u.message))}}catch(p){throw clearTimeout(d),p.name==="AbortError"?new Error("WebRTC answer parsing timed out for stream ".concat(e)):p}}catch(s){throw clearTimeout(t),s.name==="AbortError"?new Error("WebRTC offer request timed out for stream ".concat(e)):s}}catch(l){throw console.error("Error sending offer for stream ".concat(e,":"),l),l}},W=(e,r)=>{console.error("WebRTC error for stream ".concat(e,":"),r);const l="video-".concat(e.replace(/\s+/g,"-")),o=document.getElementById(l);if(!o)return;const n=o.closest(".video-cell");if(!n)return;const i=n.querySelector(".loading-indicator");i&&(i.style.display="none");let t=n.querySelector(".error-indicator");t||(t=document.createElement("div"),t.className="error-indicator",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.display="flex",t.style.flexDirection="column",t.style.justifyContent="center",t.style.alignItems="center",t.style.backgroundColor="rgba(0, 0, 0, 0.7)",t.style.color="white",t.style.zIndex="20",n.appendChild(t)),t.innerHTML='\n      <div className="error-icon">!</div>\n      <p>'.concat(r||"WebRTC connection failed",'</p>\n      <button className="retry-button mt-4 px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors">Retry</button>\n    '),t.style.display="flex";const s=t.querySelector(".retry-button");s&&(s.style.position="relative",s.style.zIndex="30",s.style.pointerEvents="auto",s.addEventListener("click",()=>{i&&(i.style.display="flex"),t.style.display="none",S(e),fetch("/api/streams/".concat(encodeURIComponent(e))).then(c=>c.json()).then(c=>{L(c)}).catch(c=>{console.error("Error fetching stream info:",c),t.style.display="flex";const m=t.querySelector("p");m&&(m.textContent="Could not reconnect: "+c.message),i&&(i.style.display="none")})}))},S=e=>{h.current[e]&&(h.current[e].close(),delete h.current[e]);const r="video-".concat(e.replace(/\s+/g,"-")),l=document.getElementById(r);l&&(l.srcObject=null),K(e,N.current)},M=()=>{Object.keys(h.current).forEach(e=>{S(e)})},A=(e,r)=>{console.log("Taking snapshot of stream with ID: ".concat(e),r);const l=document.querySelector('.snapshot-btn[data-id="'.concat(e,'"]'));let o;if(l)o=l.getAttribute("data-name"),console.log("Found stream name from button attribute: ".concat(o));else{const c=r?r.currentTarget||r.target:null;console.log("Clicked button:",c);const m=c?c.closest(".video-cell"):null;if(console.log("Video cell:",m),m&&(o=m.dataset.streamName,console.log("Found stream name from video cell: ".concat(o))),!o){const d=g.find(p=>p.id===e||p.name===e);d&&(o=d.name,console.log("Found stream name from streams array: ".concat(o)))}}if(!o){console.error("Stream name not found for snapshot"),w("Cannot take snapshot: Stream not identified");return}const n="video-".concat(o.replace(/\s+/g,"-")),i=document.getElementById(n);if(!i){console.error("Video element not found for stream:",o),w("Cannot take snapshot: Video element not found");return}const t=document.createElement("canvas");if(t.width=i.videoWidth,t.height=i.videoHeight,t.width===0||t.height===0){console.error("Invalid video dimensions:",t.width,t.height),w("Cannot take snapshot: Video not loaded or has invalid dimensions");return}t.getContext("2d").drawImage(i,0,0,t.width,t.height);try{window.__snapshotCanvas=t;const c=new Date().toISOString().replace(/[:.]/g,"-"),m="snapshot-".concat(o.replace(/\s+/g,"-"),"-").concat(c,".jpg");window.__snapshotFileName=m,oe(t.toDataURL("image/jpeg",.95),"Snapshot: ".concat(o)),w("Snapshot taken successfully")}catch(c){console.error("Error creating snapshot:",c),w("Failed to create snapshot: "+c.message)}},V=e=>{console.log("Toggling fullscreen for stream: ".concat(e));const r="video-".concat(e.replace(/\s+/g,"-")),l=document.getElementById(r),o=l?l.closest(".video-cell"):null;if(!o){console.error("Stream not found:",e);return}document.fullscreenElement?(console.log("Exiting fullscreen mode"),document.exitFullscreen()):(console.log("Entering fullscreen mode for video cell"),o.requestFullscreen().catch(n=>{console.error("Error attempting to enable fullscreen: ".concat(n.message)),w("Could not enable fullscreen mode: ".concat(n.message))}))};return a("section",{id:"live-page",className:"page ".concat(R?"fullscreen-mode":""),children:[a("div",{className:"page-header flex justify-between items-center mb-4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow",children:[a("div",{className:"flex items-center space-x-2",children:[a("h2",{className:"text-xl font-bold mr-4",children:"Live View"}),a("div",{className:"flex space-x-2",children:a("button",{id:"hls-toggle-btn",className:"px-3 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800",onClick:()=>window.location.href="/hls.html",children:"HLS View"})})]}),a("div",{className:"controls flex items-center space-x-2",children:[a("div",{className:"flex items-center",children:[a("label",{for:"layout-selector",className:"mr-2",children:"Layout:"}),a("select",{id:"layout-selector",className:"px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600",value:f,onChange:e=>{const r=e.target.value;$(r),P(0)},children:[a("option",{value:"1",children:"1 Stream"}),a("option",{value:"2",children:"2 Streams"}),a("option",{value:"4",selected:!0,children:"4 Streams"}),a("option",{value:"6",children:"6 Streams"}),a("option",{value:"9",children:"9 Streams"}),a("option",{value:"16",children:"16 Streams"})]})]}),f==="1"&&a("div",{className:"flex items-center",children:[a("label",{for:"stream-selector",className:"mr-2",children:"Stream:"}),a("select",{id:"stream-selector",className:"px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600",value:y,onChange:e=>{const r=e.target.value;v(r)},children:g.map(e=>a("option",{value:e.name,children:e.name},e.name))})]}),a("button",{id:"fullscreen-btn",className:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 focus:outline-none",onClick:()=>X(R,_),title:"Toggle Fullscreen",children:a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:a("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})})})]})]}),a("div",{className:"flex flex-col space-y-4",children:[a("div",{id:"video-grid",className:"video-container layout-".concat(f),ref:x,children:F?a("div",{className:"flex justify-center items-center col-span-full row-span-full h-64 w-full",children:a("div",{className:"flex flex-col items-center justify-center py-8",children:[a("div",{className:"inline-block animate-spin rounded-full border-4 border-gray-300 dark:border-gray-600 border-t-blue-600 dark:border-t-blue-500 w-16 h-16"}),a("p",{className:"mt-4 text-gray-700 dark:text-gray-300",children:"Loading streams..."})]})}):g.length===0?a("div",{className:"placeholder flex flex-col justify-center items-center col-span-full row-span-full bg-white dark:bg-gray-800 rounded-lg shadow-md text-center p-8",children:[a("p",{className:"mb-6 text-gray-600 dark:text-gray-300 text-lg",children:"No streams configured"}),a("a",{href:"streams.html",className:"btn-primary px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Configure Streams"})]}):null}),f!=="1"&&g.length>E()?a("div",{className:"pagination-controls flex justify-center items-center space-x-4 mt-4",children:[a("button",{className:"px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>P(Math.max(0,b-1)),disabled:b===0,children:"Previous"}),a("span",{className:"text-gray-700 dark:text-gray-300",children:["Page ",b+1," of ",Math.ceil(g.length/E())]}),a("button",{className:"px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>P(Math.min(Math.ceil(g.length/E())-1,b+1)),disabled:b>=Math.ceil(g.length/E())-1,children:"Next"})]}):null]})]})}function le(){const[g,k]=C(!1),[f,$]=C(!0);return T(()=>{async function y(){try{const v=await fetch("/api/settings");if(!v.ok){console.error("Failed to fetch settings:",v.status,v.statusText),$(!1);return}(await v.json()).webrtc_disabled?(console.log("WebRTC is disabled, using HLS view"),k(!0)):(console.log("WebRTC is enabled, using WebRTC view"),k(!1))}catch(v){console.error("Error checking WebRTC status:",v)}finally{$(!1)}}y()},[]),f?a("div",{className:"loading",children:"Loading..."}):a(G,{children:[a(ne,{}),g?a(Y,{isWebRTCDisabled:!0}):a(se,{}),a(re,{})]})}document.addEventListener("DOMContentLoaded",()=>{const g=document.getElementById("main-content");g&&z(a(J,{client:U,children:a(le,{})}),g)});export{ae as __vite_legacy_guard};
//# sourceMappingURL=index-BGDcycGQ.js.map
