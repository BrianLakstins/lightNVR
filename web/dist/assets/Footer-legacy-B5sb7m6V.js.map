{"version":3,"file":"Footer-legacy-B5sb7m6V.js","sources":["../../js/components/preact/UI.js","../../js/components/preact/Footer.jsx","../../js/components/preact/Header.jsx","../../node_modules/htm/dist/htm.module.js","../../js/html-helper.js","../../js/version.js"],"sourcesContent":["/**\n * UI utility functions for LiveView\n */\n\n\nimport { html } from '../../html-helper.js';\nimport { useQuery, QueryClientProvider, queryClient } from '../../query-client.js';\n\n/**\n * Set up modals for the application\n */\nexport function setupModals() {\n  // Create snapshot modal container if it doesn't exist\n  let snapshotModalContainer = document.getElementById('snapshot-modal-container');\n  if (!snapshotModalContainer) {\n    snapshotModalContainer = document.createElement('div');\n    snapshotModalContainer.id = 'snapshot-modal-container';\n    document.body.appendChild(snapshotModalContainer);\n  }\n\n  // Create snapshot preview modal\n  const snapshotModal = document.createElement('div');\n  snapshotModal.id = 'snapshot-preview-modal';\n  snapshotModal.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden';\n\n  snapshotModal.innerHTML = `\n    <div class=\"modal-content bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl max-h-[90vh] flex flex-col transform transition-all duration-300 ease-out scale-95 opacity-0\" style=\"width: 90%;\">\n      <div class=\"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700\">\n        <h3 id=\"snapshot-preview-title\" class=\"text-lg font-semibold text-gray-900 dark:text-white\">Snapshot</h3>\n        <button class=\"close text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\">✕</button>\n      </div>\n      <div class=\"p-4 overflow-auto flex-grow\">\n        <img id=\"snapshot-preview-image\" class=\"max-w-full max-h-[70vh] mx-auto\" src=\"\" alt=\"Snapshot\">\n      </div>\n      <div class=\"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-2\">\n        <button id=\"snapshot-download-btn\" class=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors\">Download</button>\n        <button id=\"snapshot-close-btn\" class=\"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition-colors dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600\">Close</button>\n      </div>\n    </div>\n  `;\n\n  snapshotModalContainer.appendChild(snapshotModal);\n\n  // Create video modal container if it doesn't exist\n  let videoModalContainer = document.getElementById('video-modal-container');\n  if (!videoModalContainer) {\n    videoModalContainer = document.createElement('div');\n    videoModalContainer.id = 'video-modal-container';\n    document.body.appendChild(videoModalContainer);\n  }\n\n  // Create video preview modal\n  const videoModal = document.createElement('div');\n  videoModal.id = 'video-preview-modal';\n  videoModal.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden';\n\n  videoModal.innerHTML = `\n    <div class=\"modal-content bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl max-h-[90vh] flex flex-col transform transition-all duration-300 ease-out scale-95 opacity-0 w-full md:w-[90%]\">\n      <div class=\"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700\">\n        <h3 id=\"video-preview-title\" class=\"text-lg font-semibold text-gray-900 dark:text-white\">Video</h3>\n        <button class=\"close text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\">✕</button>\n      </div>\n      <div class=\"p-4 flex-grow\">\n        <video id=\"video-preview-player\" class=\"w-full h-auto max-w-full object-contain mx-auto\" controls autoplay></video>\n      </div>\n      <div class=\"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-2\">\n        <a id=\"video-download-btn\" class=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors\" href=\"#\" download>Download</a>\n        <button id=\"video-close-btn\" class=\"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition-colors dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600\">Close</button>\n      </div>\n    </div>\n  `;\n\n  videoModalContainer.appendChild(videoModal);\n\n  // Set up event listeners for modals\n  document.addEventListener('keydown', (e) => {\n    if (e.key === 'Escape') {\n      // Close any open modals\n      const modals = document.querySelectorAll('.fixed.inset-0.bg-black.bg-opacity-75');\n      modals.forEach(modal => {\n        if (!modal.classList.contains('hidden')) {\n          modal.classList.add('hidden');\n        }\n      });\n    }\n  });\n}\n\n/**\n * Add status message styles to the document\n */\nexport function addStatusMessageStyles() {\n  // Import the toast module to ensure it's loaded\n  import('./toast.js').then(({ initToastContainer }) => {\n    // Initialize the toast container\n    initToastContainer(false);\n  }).catch(error => {\n    console.error('Error loading toast module:', error);\n\n    // Fallback to basic styles if toast module fails to load\n    if (document.getElementById('status-message-styles')) {\n      return;\n    }\n\n    // Create style element\n    const style = document.createElement('style');\n    style.id = 'status-message-styles';\n\n    // Add CSS rules\n    style.textContent = `\n      #status-message-container {\n        position: fixed;\n        top: 1rem;\n        left: 50%;\n        transform: translateX(-50%);\n        z-index: 50;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n      }\n\n      .status-message {\n        background-color: #1f2937;\n        color: white;\n        padding: 0.5rem 1rem;\n        border-radius: 0.375rem;\n        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n        margin-bottom: 0.5rem;\n        transition: all 0.3s ease;\n        opacity: 0;\n        transform: translateY(-0.5rem);\n      }\n\n      .status-message.show {\n        opacity: 1;\n        transform: translateY(0);\n      }\n\n      .status-message.success {\n        background-color: #10b981;\n      }\n\n      .status-message.error {\n        background-color: #ef4444;\n      }\n\n      .status-message.warning {\n        background-color: #f59e0b;\n      }\n\n      .status-message.info {\n        background-color: #3b82f6;\n      }\n    `;\n\n    // Add to document head\n    document.head.appendChild(style);\n  });\n}\n\n/**\n * Add modal styles to the document\n */\nexport function addModalStyles() {\n  // Check if styles already exist\n  if (document.getElementById('modal-styles')) {\n    return;\n  }\n\n  // Create style element\n  const style = document.createElement('style');\n  style.id = 'modal-styles';\n\n  // Add CSS rules\n  style.textContent = `\n    .modal-content {\n      transition: all 0.3s ease-out;\n    }\n\n    .modal-content.scale-95 {\n      transform: scale(0.95);\n      opacity: 0;\n    }\n\n    .modal-content.scale-100 {\n      transform: scale(1);\n      opacity: 1;\n    }\n  `;\n\n  // Add to document head\n  document.head.appendChild(style);\n}\n\n/**\n * DeleteConfirmationModal component for Preact\n * This is the declarative version for use with Preact JSX\n * @param {Object} props - Component props\n * @param {boolean} props.isOpen - Whether the modal is open\n * @param {Function} props.onClose - Function to call when the modal is closed\n * @param {Function} props.onConfirm - Function to call when delete is confirmed\n * @param {string} props.mode - Delete mode ('selected' or 'all')\n * @param {number} props.count - Number of items selected (for 'selected' mode)\n * @returns {JSX.Element} DeleteConfirmationModal component\n */\nexport function DeleteConfirmationModal(props) {\n  const { isOpen, onClose, onConfirm, mode, count } = props;\n\n  if (!isOpen) return null;\n\n  // Determine title and message based on mode\n  let title = 'Confirm Delete';\n  let message = 'Are you sure you want to delete this item?';\n\n  if (mode === 'selected') {\n    title = 'Delete Selected Recordings';\n    message = `Are you sure you want to delete ${count} selected recording${count !== 1 ? 's' : ''}?`;\n  } else if (mode === 'all') {\n    title = 'Delete All Filtered Recordings';\n    message = 'Are you sure you want to delete all recordings matching the current filters? This action cannot be undone.';\n  }\n\n  // Handle escape key\n  const handleKeyDown = (e) => {\n    if (e.key === 'Escape') {\n      onClose();\n    }\n  };\n\n  // Handle background click\n  const handleBackgroundClick = (e) => {\n    if (e.target === e.currentTarget) {\n      onClose();\n    }\n  };\n\n  return html`\n    <div\n      class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\"\n      onClick=${handleBackgroundClick}\n      onKeyDown=${handleKeyDown}\n    >\n      <div class=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 max-w-md mx-auto\">\n        <div class=\"mb-4\">\n          <h3 class=\"text-lg font-semibold text-gray-900 dark:text-white\">${title}</h3>\n        </div>\n\n        <p class=\"text-gray-600 dark:text-gray-300 mb-6\">${message}</p>\n\n        <div class=\"flex justify-end space-x-3\">\n          <button\n            class=\"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition-colors dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600\"\n            onClick=${onClose}\n          >\n            Cancel\n          </button>\n          <button\n            class=\"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors\"\n            onClick=${onConfirm}\n          >\n            Delete\n          </button>\n        </div>\n      </div>\n    </div>\n  `;\n}\n\n/**\n * Show a video modal\n * @param {string} videoUrl - URL of the video to display\n * @param {string} title - Title for the video\n * @param {string} downloadUrl - Optional URL for downloading the video\n */\nexport function showVideoModal(videoUrl, title, downloadUrl) {\n  // Create overlay container\n  const overlay = document.createElement('div');\n  overlay.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50';\n  overlay.id = 'video-modal-overlay';\n\n  // Create modal container with responsive classes\n  const modalContainer = document.createElement('div');\n  modalContainer.className = 'bg-gray-50 dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl flex flex-col w-full md:w-[90%]';\n\n  // Create header\n  const header = document.createElement('div');\n  header.className = 'flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700';\n\n  const titleElement = document.createElement('h3');\n  titleElement.className = 'text-lg font-semibold text-gray-900 dark:text-white';\n  titleElement.textContent = title || 'Video';\n\n  const closeButton = document.createElement('button');\n  closeButton.className = 'text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200';\n  closeButton.innerHTML = '✕';\n  closeButton.addEventListener('click', () => {\n    document.body.removeChild(overlay);\n  });\n\n  header.appendChild(titleElement);\n  header.appendChild(closeButton);\n\n  // Create video container with responsive classes\n  const videoContainer = document.createElement('div');\n  videoContainer.className = 'p-4';\n\n  const video = document.createElement('video');\n  video.src = videoUrl;\n  video.className = 'w-full h-auto max-w-full object-contain mx-auto';\n  video.controls = true;\n  video.autoplay = true;\n\n  videoContainer.appendChild(video);\n\n  // Create controls container with responsive Tailwind classes\n  const controlsContainer = document.createElement('div');\n  controlsContainer.id = 'recordings-controls';\n  controlsContainer.className = 'mx-4 mb-4 p-4 border border-green-500 rounded-lg bg-white dark:bg-gray-700 shadow-md relative z-10';\n\n  // Create heading\n  const heading = document.createElement('h3');\n  heading.className = 'text-lg font-bold text-center mb-4 text-gray-800 dark:text-white';\n  heading.textContent = 'PLAYBACK CONTROLS';\n  controlsContainer.appendChild(heading);\n\n  // Create controls grid container\n  const controlsGrid = document.createElement('div');\n  controlsGrid.className = 'grid grid-cols-1 md:grid-cols-2 gap-4 mb-2';\n\n  // Create speed controls section\n  const speedControlsSection = document.createElement('div');\n  speedControlsSection.className = 'border-b pb-4 md:border-b-0 md:border-r md:pr-4 md:pb-0';\n\n  // Create speed section heading\n  const speedHeading = document.createElement('h4');\n  speedHeading.className = 'font-bold text-center mb-3 text-gray-700 dark:text-gray-300';\n  speedHeading.textContent = 'Playback Speed';\n  speedControlsSection.appendChild(speedHeading);\n\n  // Create speed buttons container\n  const speedButtonsContainer = document.createElement('div');\n  speedButtonsContainer.className = 'flex flex-wrap justify-center gap-2';\n\n  // Create speed buttons\n  const speeds = [0.25, 0.5, 1.0, 1.5, 2.0, 4.0];\n  speeds.forEach(speed => {\n    const button = document.createElement('button');\n    button.textContent = speed === 1.0 ? '1× (Normal)' : `${speed}×`;\n    button.className = speed === 1.0\n      ? 'speed-btn px-3 py-2 rounded-full bg-green-500 text-white text-sm font-medium transition-all focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50'\n      : 'speed-btn px-3 py-2 rounded-full bg-gray-200 hover:bg-gray-300 text-sm font-medium transition-all focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50';\n    button.setAttribute('data-speed', speed);\n\n    // Add click event\n    button.addEventListener('click', () => {\n      // Set playback speed\n      video.playbackRate = speed;\n\n      // Update button styles\n      speedButtonsContainer.querySelectorAll('.speed-btn').forEach(btn => {\n        if (btn.getAttribute('data-speed') === speed.toString()) {\n          btn.classList.remove('bg-gray-200', 'hover:bg-gray-300');\n          btn.classList.add('bg-green-500', 'text-white');\n        } else {\n          btn.classList.remove('bg-green-500', 'text-white');\n          btn.classList.add('bg-gray-200', 'hover:bg-gray-300');\n        }\n      });\n\n      // Update current speed indicator\n      currentSpeedIndicator.textContent = `Current Speed: ${speed}× ${speed === 1.0 ? '(Normal)' : ''}`;\n    });\n\n    speedButtonsContainer.appendChild(button);\n  });\n\n  // Add buttons container to speed controls section\n  speedControlsSection.appendChild(speedButtonsContainer);\n\n  // Add current speed indicator\n  const currentSpeedIndicator = document.createElement('div');\n  currentSpeedIndicator.id = 'current-speed-indicator';\n  currentSpeedIndicator.className = 'mt-3 text-center font-medium text-green-600 dark:text-green-400 text-sm';\n  currentSpeedIndicator.textContent = 'Current Speed: 1× (Normal)';\n  speedControlsSection.appendChild(currentSpeedIndicator);\n\n  // Add speed controls section to grid\n  controlsGrid.appendChild(speedControlsSection);\n\n  // Create detection overlay section\n  const detectionSection = document.createElement('div');\n  detectionSection.className = 'pt-4 md:pt-0 md:pl-4';\n\n  // Create detection section heading\n  const detectionHeading = document.createElement('h4');\n  detectionHeading.className = 'font-bold text-center mb-2 text-gray-700 dark:text-gray-300';\n  detectionHeading.textContent = 'Detection Overlays';\n  detectionSection.appendChild(detectionHeading);\n\n  // Create detection controls container\n  const detectionControlsContainer = document.createElement('div');\n  detectionControlsContainer.className = 'flex flex-col items-center gap-2';\n\n  // Create detection checkbox container\n  const detectionCheckboxContainer = document.createElement('div');\n  detectionCheckboxContainer.className = 'flex items-center gap-2 mb-2';\n\n  // Create detection checkbox\n  const detectionCheckbox = document.createElement('input');\n  detectionCheckbox.type = 'checkbox';\n  detectionCheckbox.id = 'detection-overlay-checkbox';\n  detectionCheckbox.className = 'w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600';\n\n  // Create detection checkbox label\n  const detectionCheckboxLabel = document.createElement('label');\n  detectionCheckboxLabel.htmlFor = 'detection-overlay-checkbox';\n  detectionCheckboxLabel.className = 'text-sm font-medium text-gray-700 dark:text-gray-300';\n  detectionCheckboxLabel.textContent = 'Show Detection Overlays';\n\n  // Add checkbox and label to container\n  detectionCheckboxContainer.appendChild(detectionCheckbox);\n  detectionCheckboxContainer.appendChild(detectionCheckboxLabel);\n\n  // Add checkbox container to detection controls\n  detectionControlsContainer.appendChild(detectionCheckboxContainer);\n\n  // Create sensitivity slider container\n  const sensitivityContainer = document.createElement('div');\n  sensitivityContainer.className = 'flex flex-col w-full mt-2 mb-2';\n\n  // Create sensitivity label\n  const sensitivityLabel = document.createElement('label');\n  sensitivityLabel.htmlFor = 'detection-sensitivity-slider';\n  sensitivityLabel.className = 'text-sm font-medium text-gray-700 dark:text-gray-300 mb-1';\n  sensitivityLabel.textContent = 'Detection Sensitivity';\n\n  // Create sensitivity value display\n  const sensitivityValue = document.createElement('div');\n  sensitivityValue.id = 'detection-sensitivity-value';\n  sensitivityValue.className = 'text-xs text-gray-600 dark:text-gray-400 text-center mb-1';\n  sensitivityValue.textContent = 'Time Window: 2 seconds';\n\n  // Create sensitivity slider\n  const sensitivitySlider = document.createElement('input');\n  sensitivitySlider.type = 'range';\n  sensitivitySlider.id = 'detection-sensitivity-slider';\n  sensitivitySlider.className = 'w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700';\n  sensitivitySlider.min = '1';\n  sensitivitySlider.max = '10';\n  sensitivitySlider.step = '1';\n  sensitivitySlider.value = '2';\n\n  // Add elements to sensitivity container\n  sensitivityContainer.appendChild(sensitivityLabel);\n  sensitivityContainer.appendChild(sensitivitySlider);\n  sensitivityContainer.appendChild(sensitivityValue);\n\n  // Add event listener to the sensitivity slider\n  sensitivitySlider.addEventListener('input', () => {\n    // Update the time window value\n    timeWindow = parseInt(sensitivitySlider.value);\n\n    // Update the sensitivity value display\n    sensitivityValue.textContent = `Time Window: ${timeWindow} second${timeWindow !== 1 ? 's' : ''}`;\n\n    // Redraw detections if enabled\n    if (detectionOverlayEnabled) {\n      drawDetections();\n    }\n  });\n\n  // Add sensitivity container to detection controls\n  detectionControlsContainer.appendChild(sensitivityContainer);\n\n  // Create detection status indicator\n  const detectionStatusIndicator = document.createElement('div');\n  detectionStatusIndicator.id = 'detection-status-indicator';\n  detectionStatusIndicator.className = 'text-center text-sm text-gray-600 dark:text-gray-400';\n  detectionStatusIndicator.textContent = 'No detections loaded';\n\n  // Add status indicator to detection controls\n  detectionControlsContainer.appendChild(detectionStatusIndicator);\n\n  // Add detection controls to detection section\n  detectionSection.appendChild(detectionControlsContainer);\n\n  // Add detection section to grid\n  controlsGrid.appendChild(detectionSection);\n\n  // Add controls grid to container\n  controlsContainer.appendChild(controlsGrid);\n\n  // Add download button to controls container\n  if (downloadUrl) {\n    const downloadSection = document.createElement('div');\n    downloadSection.className = 'flex justify-center mt-4 pt-2 border-t border-gray-200 dark:border-gray-700';\n\n    const downloadButton = document.createElement('a');\n    downloadButton.className = 'px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors flex items-center text-sm';\n    downloadButton.innerHTML = `\n      <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4 mr-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\" />\n      </svg>\n      Download Video\n    `;\n    downloadButton.href = downloadUrl;\n    downloadButton.download = `video-${Date.now()}.mp4`;\n\n    downloadSection.appendChild(downloadButton);\n    controlsContainer.appendChild(downloadSection);\n  }\n\n  // Create empty footer for spacing\n  const footer = document.createElement('div');\n  footer.className = 'p-2';\n\n  // Create detection overlay canvas container\n  const canvasContainer = document.createElement('div');\n  canvasContainer.className = 'relative';\n  canvasContainer.style.position = 'relative';\n  canvasContainer.style.width = '100%';\n  canvasContainer.style.height = '100%';\n\n  // Create detection overlay canvas\n  const detectionCanvas = document.createElement('canvas');\n  detectionCanvas.id = 'detection-overlay-canvas';\n  detectionCanvas.className = 'absolute top-0 left-0 w-full h-full pointer-events-none';\n  detectionCanvas.style.position = 'absolute';\n  detectionCanvas.style.top = '0';\n  detectionCanvas.style.left = '0';\n  detectionCanvas.style.width = '100%';\n  detectionCanvas.style.height = '100%';\n  detectionCanvas.style.pointerEvents = 'none';\n  detectionCanvas.style.display = 'none'; // Hidden by default\n\n  // Wrap video in canvas container\n  canvasContainer.appendChild(video);\n  canvasContainer.appendChild(detectionCanvas);\n  videoContainer.appendChild(canvasContainer);\n\n  // Store recording data for detection overlay\n  let recordingData = null;\n  let detections = [];\n  let detectionOverlayEnabled = false;\n  let timeWindow = parseInt(sensitivitySlider.value); // Time window in seconds for detection visibility\n\n  // Extract recording ID from URL\n  const recordingIdMatch = videoUrl.match(/\\/play\\/(\\d+)/);\n  if (recordingIdMatch && recordingIdMatch[1]) {\n    const recordingId = parseInt(recordingIdMatch[1], 10);\n\n    // Create a container for the query client\n    const queryContainer = document.createElement('div');\n    queryContainer.id = 'query-container';\n    queryContainer.style.display = 'none';\n    document.body.appendChild(queryContainer);\n\n    // Import preact for rendering\n    import('preact').then(({ render, h }) => {\n      // Create a component to fetch the data\n      const RecordingDataFetcher = () => {\n        // Fetch recording data\n        const { data: recording, isLoading: isLoadingRecording, error: recordingError } =\n          useQuery(['recording', recordingId], `/api/recordings/${recordingId}`);\n\n        // When recording data is loaded, fetch detections\n        let detectionQueryEnabled = false;\n        let startTime, endTime, streamName;\n\n        if (recording && recording.stream && recording.start_time && recording.end_time) {\n          recordingData = recording;\n          console.log('Recording data:', recording);\n\n          // Convert timestamps to seconds\n          startTime = Math.floor(new Date(recording.start_time).getTime() / 1000);\n          endTime = Math.floor(new Date(recording.end_time).getTime() / 1000);\n          streamName = recording.stream;\n          detectionQueryEnabled = true;\n        }\n\n        // Fetch detections if recording data is available\n        const { data: detectionData, isLoading: isLoadingDetections, error: detectionError } =\n          useQuery(\n            ['detections', streamName, startTime, endTime],\n            detectionQueryEnabled ? `/api/detection/results/${streamName}?start=${startTime}&end=${endTime}` : null,\n            {},\n            { enabled: detectionQueryEnabled }\n          );\n\n        // Process detection data when it's loaded\n        if (detectionData && detectionData.detections) {\n          console.log('Detection data:', detectionData);\n          detections = detectionData.detections || [];\n\n          // Update detection status\n          if (detectionStatusIndicator) {\n            if (detections.length > 0) {\n              detectionStatusIndicator.textContent = `${detections.length} detection${detections.length !== 1 ? 's' : ''} available`;\n              detectionStatusIndicator.className = 'text-center text-sm font-medium text-green-600 dark:text-green-400';\n              // Enable detection checkbox\n              if (detectionCheckbox) {\n                detectionCheckbox.disabled = false;\n              }\n            } else {\n              // No detections found\n              detectionStatusIndicator.textContent = 'No detections found for this recording';\n              // Disable detection checkbox\n              if (detectionCheckbox) {\n                detectionCheckbox.disabled = true;\n              }\n            }\n          }\n        }\n\n        // Handle errors\n        if (recordingError) {\n          console.error('Error loading recording data:', recordingError);\n        }\n\n        if (detectionError) {\n          console.error('Error loading detection data:', detectionError);\n          // Update detection status\n          if (detectionStatusIndicator) {\n            detectionStatusIndicator.textContent = 'Error loading detections';\n            detectionStatusIndicator.className = 'text-center text-sm font-medium text-red-600 dark:text-red-400';\n          }\n          // Disable detection checkbox\n          if (detectionCheckbox) {\n            detectionCheckbox.disabled = true;\n          }\n        }\n\n        return null; // This component doesn't render anything\n      };\n\n      // Render the component with QueryClientProvider\n      render(\n        h(QueryClientProvider, { client: queryClient },\n          h(RecordingDataFetcher)\n        ),\n        queryContainer\n      );\n    }).catch(err => {\n      console.error('Error loading preact for data fetching:', err);\n\n      // Fallback to traditional fetch if preact-query fails\n      fetch(`/api/recordings/${recordingId}`)\n        .then(response => response.json())\n        .then(data => {\n          recordingData = data;\n\n          if (recordingData && recordingData.stream && recordingData.start_time && recordingData.end_time) {\n            const startTime = Math.floor(new Date(recordingData.start_time).getTime() / 1000);\n            const endTime = Math.floor(new Date(recordingData.end_time).getTime() / 1000);\n\n            const params = new URLSearchParams({\n              start: startTime,\n              end: endTime\n            });\n\n            return fetch(`/api/detection/results/${recordingData.stream}?${params.toString()}`);\n          }\n\n          throw new Error('Recording data incomplete');\n        })\n        .then(response => response.json())\n        .then(data => {\n          detections = data.detections || [];\n\n          if (detections.length > 0) {\n            detectionStatusIndicator.textContent = `${detections.length} detection${detections.length !== 1 ? 's' : ''} available`;\n            detectionStatusIndicator.className = 'text-center text-sm font-medium text-green-600 dark:text-green-400';\n            detectionCheckbox.disabled = false;\n          } else {\n            detectionStatusIndicator.textContent = 'No detections found for this recording';\n            detectionCheckbox.disabled = true;\n          }\n        })\n        .catch(error => {\n          console.error('Error fetching detection data:', error);\n          detectionStatusIndicator.textContent = 'Error loading detections';\n          detectionStatusIndicator.className = 'text-center text-sm font-medium text-red-600 dark:text-red-400';\n          detectionCheckbox.disabled = true;\n        });\n    });\n  }\n\n  // Handle detection overlay checkbox change\n  detectionCheckbox.addEventListener('change', () => {\n    detectionOverlayEnabled = detectionCheckbox.checked;\n\n    if (detectionOverlayEnabled) {\n      // Show canvas\n      detectionCanvas.style.display = 'block';\n\n      // Draw detections\n      drawDetections();\n\n      // Update status\n      detectionStatusIndicator.textContent = `Showing ${detections.length} detection${detections.length !== 1 ? 's' : ''}`;\n    } else {\n      // Hide canvas\n      detectionCanvas.style.display = 'none';\n\n      // Update status\n      detectionStatusIndicator.textContent = `${detections.length} detection${detections.length !== 1 ? 's' : ''} available`;\n    }\n  });\n\n  // Function to draw detections on canvas\n  function drawDetections() {\n    if (!detectionOverlayEnabled || !video || !detectionCanvas || detections.length === 0) {\n      return;\n    }\n\n    // Get video dimensions\n    const videoWidth = video.videoWidth;\n    const videoHeight = video.videoHeight;\n\n    if (videoWidth === 0 || videoHeight === 0) {\n      // Video dimensions not available yet, try again later\n      requestAnimationFrame(drawDetections);\n      return;\n    }\n\n    // Set canvas dimensions to match video\n    detectionCanvas.width = videoWidth;\n    detectionCanvas.height = videoHeight;\n\n    // Get canvas context\n    const ctx = detectionCanvas.getContext('2d');\n    ctx.clearRect(0, 0, detectionCanvas.width, detectionCanvas.height);\n\n    // Get current video time in seconds\n    const currentTime = video.currentTime;\n\n    // Calculate the timestamp for the current video position\n    // We need to convert from video time (seconds from start of video) to unix timestamp\n    if (!recordingData || !recordingData.start_time) {\n      return;\n    }\n\n    // Convert recording start time to seconds\n    const recordingStartTime = Math.floor(new Date(recordingData.start_time).getTime() / 1000);\n\n    // Calculate current timestamp in the video\n    const currentTimestamp = recordingStartTime + Math.floor(currentTime);\n\n    // Use the time window value from the slider\n    // timeWindow is already defined at the top level\n\n    // Filter detections to only show those within the time window\n    const visibleDetections = detections.filter(detection => {\n      if (!detection.timestamp) return false;\n\n      // Check if detection is within the time window\n      return Math.abs(detection.timestamp - currentTimestamp) <= timeWindow;\n    });\n\n    // Update status indicator with count of visible detections\n    if (detectionStatusIndicator) {\n      if (visibleDetections.length > 0) {\n        detectionStatusIndicator.textContent = `Showing ${visibleDetections.length} detection${visibleDetections.length !== 1 ? 's' : ''} at current time`;\n      } else {\n        detectionStatusIndicator.textContent = `No detections at current time (${detections.length} total)`;\n      }\n    }\n\n    // Draw each visible detection\n    visibleDetections.forEach(detection => {\n      // Calculate coordinates based on relative positions\n      const x = detection.x * videoWidth;\n      const y = detection.y * videoHeight;\n      const width = detection.width * videoWidth;\n      const height = detection.height * videoHeight;\n\n      // Draw bounding box\n      ctx.strokeStyle = 'rgba(0, 255, 0, 0.8)';\n      ctx.lineWidth = 2;\n      ctx.strokeRect(x, y, width, height);\n\n      // Draw label background\n      ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';\n      const labelText = `${detection.label} (${Math.round(detection.confidence * 100)}%)`;\n      const labelWidth = ctx.measureText(labelText).width + 10;\n      ctx.fillRect(x, y - 20, labelWidth, 20);\n\n      // Draw label text\n      ctx.fillStyle = 'white';\n      ctx.font = '12px Arial';\n      ctx.fillText(labelText, x + 5, y - 5);\n    });\n\n    // Request next frame if video is playing\n    if (!video.paused && !video.ended) {\n      requestAnimationFrame(drawDetections);\n    }\n  }\n\n  // Handle video events\n  video.addEventListener('play', () => {\n    if (detectionOverlayEnabled) {\n      drawDetections();\n    }\n  });\n\n  video.addEventListener('seeked', () => {\n    if (detectionOverlayEnabled) {\n      drawDetections();\n    }\n  });\n\n  // Add timeupdate event to update detections as video plays\n  video.addEventListener('timeupdate', () => {\n    if (detectionOverlayEnabled) {\n      // Don't redraw on every timeupdate as it's too frequent\n      // Instead, redraw every 0.5 seconds\n      const currentTime = Math.floor(video.currentTime * 2) / 2;\n      if (video.lastDrawnTime !== currentTime) {\n        video.lastDrawnTime = currentTime;\n        drawDetections();\n      }\n    }\n  });\n\n  // Assemble the modal\n  modalContainer.appendChild(header);\n  modalContainer.appendChild(videoContainer);\n  modalContainer.appendChild(controlsContainer); // Add controls\n  modalContainer.appendChild(footer);\n  overlay.appendChild(modalContainer);\n\n  // Add to document\n  document.body.appendChild(overlay);\n\n  // Add event listener to close on escape key\n  const handleEscape = (e) => {\n    if (e.key === 'Escape') {\n      if (document.body.contains(overlay)) {\n        document.body.removeChild(overlay);\n      }\n      document.removeEventListener('keydown', handleEscape);\n    }\n  };\n\n  document.addEventListener('keydown', handleEscape);\n\n  // Add event listener to close on background click\n  overlay.addEventListener('click', (e) => {\n    if (e.target === overlay) {\n      document.body.removeChild(overlay);\n    }\n  });\n}\n\n/**\n * Show a status message to the user\n * @param {string} message - Message to display\n * @param {string} type - Message type ('success', 'error', 'warning', 'info')\n * @param {number} duration - Duration in milliseconds (default: 4000)\n */\nexport function showStatusMessage(message, type = 'info', duration = 4000) {\n  console.log(`Showing status message: ${message} (${type})`);\n\n  // Try to use the global toast functions first (they should be available)\n  if (window.showToast) {\n    window.showToast(message, type, duration);\n    return;\n  }\n\n  // If global functions aren't available, import the toast module dynamically\n  import('./toast.js').then(({ showStatusMessage: showToast }) => {\n    // Use the toast system\n    showToast(message, type, duration);\n  }).catch(error => {\n    console.error('Error loading toast module:', error);\n\n    // Fallback to basic implementation if toast module fails to load\n    let statusContainer = document.getElementById('status-message-container');\n\n    // Create container if it doesn't exist\n    if (!statusContainer) {\n      statusContainer = document.createElement('div');\n      statusContainer.id = 'status-message-container';\n      statusContainer.className = 'fixed top-4 left-1/2 transform -translate-x-1/2 z-50 flex flex-col items-center';\n      document.body.appendChild(statusContainer);\n    }\n\n    // Create message element\n    const messageElement = document.createElement('div');\n\n    // Set class based on type\n    let typeClass = 'bg-blue-500'; // Default for info\n    if (type === 'success') {\n      typeClass = 'bg-green-500';\n    } else if (type === 'error') {\n      typeClass = 'bg-red-500';\n    } else if (type === 'warning') {\n      typeClass = 'bg-yellow-500';\n    }\n\n    messageElement.className = `${typeClass} text-white px-4 py-2 rounded-lg shadow-lg mb-2 transition-all duration-300 opacity-0 transform translate-y-2`;\n    messageElement.textContent = message;\n\n    // Add to container\n    statusContainer.appendChild(messageElement);\n\n    // Trigger animation to show message\n    setTimeout(() => {\n      messageElement.classList.remove('opacity-0', 'translate-y-2');\n    }, 10);\n\n    // Set timeout to remove message\n    setTimeout(() => {\n      // Trigger animation to hide message\n      messageElement.classList.add('opacity-0', 'translate-y-2');\n\n      // Remove element after animation completes\n      setTimeout(() => {\n        if (messageElement.parentNode === statusContainer) {\n          statusContainer.removeChild(messageElement);\n        }\n\n        // Remove container if no more messages\n        if (statusContainer.children.length === 0 && statusContainer.parentNode === document.body) {\n          document.body.removeChild(statusContainer);\n        }\n      }, 300);\n    }, duration);\n  });\n}\n\n/**\n * Show a snapshot preview in a modal\n * @param {string} imageData - The image data URL\n * @param {string} streamName - The name of the stream\n */\nexport function showSnapshotPreview(imageData, streamName) {\n  // Get the existing snapshot modal created by setupModals()\n  const snapshotModal = document.getElementById('snapshot-preview-modal');\n\n  if (!snapshotModal) {\n    console.error('Snapshot modal not found. Make sure setupModals() has been called.');\n    return;\n  }\n\n  // Get modal elements\n  const snapshotTitle = document.getElementById('snapshot-preview-title');\n  const snapshotImage = document.getElementById('snapshot-preview-image');\n  const snapshotDownloadBtn = document.getElementById('snapshot-download-btn');\n  const snapshotCloseBtn = document.getElementById('snapshot-close-btn');\n  const closeButtons = snapshotModal.querySelectorAll('.close');\n  const modalContent = snapshotModal.querySelector('.modal-content');\n\n  // Set the title and image\n  if (snapshotTitle) snapshotTitle.textContent = `Snapshot: ${streamName}`;\n\n  // Store the image data directly on the modal for later access\n  snapshotModal.dataset.imageData = imageData;\n  snapshotModal.dataset.streamName = streamName;\n\n  // Ensure the image is properly displayed\n  if (snapshotImage) {\n    snapshotImage.src = imageData;\n    snapshotImage.style.display = 'block'; // Make sure it's visible\n    snapshotImage.onload = () => {\n      console.log('Snapshot image loaded successfully');\n    };\n    snapshotImage.onerror = (e) => {\n      console.error('Error loading snapshot image:', e);\n    };\n  }\n\n  // Define close modal function\n  function closeModal() {\n    snapshotModal.classList.add('hidden');\n    if (modalContent) {\n      modalContent.classList.remove('scale-100');\n      modalContent.classList.add('scale-95');\n    }\n  }\n\n  // Set up close button event handlers\n  if (snapshotCloseBtn) {\n    snapshotCloseBtn.onclick = closeModal;\n  }\n\n  closeButtons.forEach(button => {\n    button.onclick = closeModal;\n  });\n\n  // Close on click outside\n  snapshotModal.onclick = function(event) {\n    if (event.target === snapshotModal) {\n      closeModal();\n    }\n  };\n\n  // Close on escape key\n  document.addEventListener('keydown', function(event) {\n    if (event.key === 'Escape' && !snapshotModal.classList.contains('hidden')) {\n      closeModal();\n    }\n  });\n\n  // Set up download button\n  if (snapshotDownloadBtn) {\n    snapshotDownloadBtn.onclick = function() {\n      // Get the stored image data from the modal\n      const storedImageData = snapshotModal.dataset.imageData;\n      const storedStreamName = snapshotModal.dataset.streamName || streamName;\n\n      if (!storedImageData) {\n        console.error('No image data available for download');\n        showStatusMessage('Download failed: No image data available', 5000);\n        return;\n      }\n\n      console.log('Downloading snapshot with data URL length:', storedImageData.length);\n\n      try {\n        // Create a temporary download iframe - this approach often works better on HTTP\n        console.log('Using iframe download method');\n\n        // Create a canvas to resize and optimize the image\n        const canvas = document.createElement('canvas');\n        const img = new Image();\n\n        img.onload = function() {\n          try {\n            console.log('Image loaded for optimization, original dimensions:', img.width, 'x', img.height);\n\n            // Use original dimensions as requested by the user\n            const newWidth = img.width;\n            const newHeight = img.height;\n            console.log('Using original image dimensions for maximum quality:', newWidth, 'x', newHeight);\n\n            // Set canvas dimensions to the new size\n            canvas.width = newWidth;\n            canvas.height = newHeight;\n\n            // Draw the image on the canvas with the new dimensions\n            const ctx = canvas.getContext('2d');\n            ctx.fillStyle = 'black';\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\n            ctx.drawImage(img, 0, 0, newWidth, newHeight);\n\n            // Convert to JPEG with maximum quality for best image quality\n            const optimizedJpegData = canvas.toDataURL('image/jpeg', 1.0);\n            console.log('Optimized JPEG data URL length:', optimizedJpegData.length);\n\n            // Create a download link with the optimized image\n            const filename = `snapshot_${storedStreamName}_${new Date().toISOString().replace(/[:.]/g, '-')}.jpg`;\n\n            // Method 1: Try the iframe approach\n            const iframe = document.createElement('iframe');\n            iframe.style.display = 'none';\n            document.body.appendChild(iframe);\n\n            try {\n              // Write a simple HTML document to the iframe with a download link\n              const iframeDoc = iframe.contentWindow.document;\n              iframeDoc.open();\n              iframeDoc.write(`\n                <!DOCTYPE html>\n                <html>\n                <head>\n                  <title>Downloading...</title>\n                  <script>\n                    function startDownload() {\n                      const a = document.getElementById('download-link');\n                      a.click();\n                      setTimeout(function() {\n                        window.parent.postMessage('download-complete', '*');\n                      }, 1000);\n                    }\n                  </script>\n                </head>\n                <body onload=\"startDownload()\">\n                  <a id=\"download-link\" href=\"${optimizedJpegData}\" download=\"${filename}\">Download</a>\n                </body>\n                </html>\n              `);\n              iframeDoc.close();\n\n              // Listen for the download complete message\n              window.addEventListener('message', function onMessage(e) {\n                if (e.data === 'download-complete') {\n                  window.removeEventListener('message', onMessage);\n                  document.body.removeChild(iframe);\n                  showStatusMessage('Snapshot downloaded successfully', 3000);\n                }\n              }, { once: true });\n\n              // Fallback cleanup in case the message isn't received\n              setTimeout(() => {\n                if (document.body.contains(iframe)) {\n                  document.body.removeChild(iframe);\n                }\n              }, 5000);\n\n            } catch (iframeError) {\n              console.error('Iframe download method failed:', iframeError);\n              document.body.removeChild(iframe);\n\n              // Fallback to direct link method\n              tryDirectLinkDownload(optimizedJpegData, filename);\n            }\n          } catch (canvasError) {\n            console.error('Canvas processing error:', canvasError);\n            showStatusMessage('Download failed: Error processing image', 5000);\n\n            // Try direct download with original data\n            tryDirectLinkDownload(storedImageData, `snapshot_${storedStreamName}_${new Date().toISOString().replace(/[:.]/g, '-')}.jpg`);\n          }\n        };\n\n        img.onerror = function(e) {\n          console.error('Error loading image for optimization:', e);\n          showStatusMessage('Download failed: Could not load image', 5000);\n\n          // Try direct download with original data\n          tryDirectLinkDownload(storedImageData, `snapshot_${storedStreamName}_${new Date().toISOString().replace(/[:.]/g, '-')}.jpg`);\n        };\n\n        // Set the source to trigger loading\n        img.src = storedImageData;\n\n      } catch (error) {\n        console.error('Error in snapshot download process:', error);\n        showStatusMessage('Download failed: ' + error.message, 5000);\n\n        // Try direct download with original data as last resort\n        tryDirectLinkDownload(storedImageData, `snapshot_${storedStreamName}_${new Date().toISOString().replace(/[:.]/g, '-')}.jpg`);\n      }\n\n      // Helper function for direct link download\n      function tryDirectLinkDownload(dataUrl, filename) {\n        console.log('Attempting direct link download');\n        try {\n          const link = document.createElement('a');\n          link.href = dataUrl;\n          link.download = filename;\n          link.target = '_blank'; // Try opening in a new tab\n          link.rel = 'noopener noreferrer';\n          document.body.appendChild(link);\n          link.click();\n\n          // Clean up\n          setTimeout(() => {\n            document.body.removeChild(link);\n          }, 100);\n\n          showStatusMessage('Download initiated', 3000);\n        } catch (linkError) {\n          console.error('Direct link download failed:', linkError);\n          showStatusMessage('Download failed: Browser restrictions', 5000);\n        }\n      }\n    };\n  }\n\n  // Show the modal\n  snapshotModal.classList.remove('hidden');\n\n  // Animate the modal content\n  if (modalContent) {\n    setTimeout(() => {\n      modalContent.classList.remove('scale-95', 'opacity-0');\n      modalContent.classList.add('scale-100', 'opacity-100');\n    }, 10);\n  }\n}\n","/**\n * LightNVR Web Interface Footer Component\n * Preact component for the site footer\n */\n\nimport { h } from 'preact';\nimport { useState } from 'preact/hooks';\n\n/**\n * Footer component\n * @param {Object} props - Component props\n * @returns {JSX.Element} Footer component\n */\nexport function Footer() {\n  const [year] = useState(new Date().getFullYear());\n\n  return (\n    <footer class=\"bg-gray-800 text-white py-3 px-4 mt-4 shadow-inner\">\n      <div class=\"container mx-auto flex flex-col sm:flex-row justify-between items-center\">\n        <div class=\"text-center sm:text-left mb-2 sm:mb-0\">\n          <p class=\"text-sm\">© {year} LightNVR ·\n            <a href=\"https://github.com/opensensor/lightnvr\" class=\"text-blue-300 hover:text-blue-100 text-sm\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub</a>\n          </p>\n          <p class=\"text-xs text-gray-400 mt-1 hidden sm:block\">Lightweight Network Video Recorder</p>\n        </div>\n      </div>\n    </footer>\n  );\n}\n\n","/**\n * LightNVR Web Interface Header Component\n * Preact component for the site header\n */\n\nimport { h } from 'preact';\nimport { useState, useEffect } from 'preact/hooks';\nimport {VERSION} from '../../version.js';\n\n/**\n * Header component\n * @param {Object} props - Component props\n * @param {string} props.version - System version\n * @returns {JSX.Element} Header component\n */\nexport function Header({ version = VERSION }) {\n  // Get active navigation from data attribute on header container\n  const headerContainer = document.getElementById('header-container');\n  const activeNav = headerContainer?.dataset?.activeNav || '';\n  const [username, setUsername] = useState('');\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n\n  // Get the current username from localStorage\n  useEffect(() => {\n    const auth = localStorage.getItem('auth');\n    if (auth) {\n      try {\n        // Decode the base64 auth string (username:password)\n        const decoded = atob(auth);\n        // Extract the username (everything before the colon)\n        const extractedUsername = decoded.split(':')[0];\n        setUsername(extractedUsername);\n      } catch (error) {\n        console.error('Error decoding auth token:', error);\n        setUsername('User');\n      }\n    } else {\n      setUsername('User');\n    }\n  }, []);\n\n  // Handle logout\n  const handleLogout = (e) => {\n    e.preventDefault();\n\n    // Clear localStorage\n    localStorage.removeItem('auth');\n\n    // Clear cookies\n    document.cookie = \"auth=; Path=/; Expires=Thu, 01 Jan 1970 00:00:00 GMT; SameSite=Strict\";\n    document.cookie = \"session=; Path=/; Expires=Thu, 01 Jan 1970 00:00:00 GMT; SameSite=Strict\";\n\n    // Call the logout endpoint to clear browser's basic auth cache\n    fetch('/api/auth/logout', {\n      method: 'POST'\n    }).then(() => {\n      window.location.href = 'login.html?auth_required=true&logout=true';\n    }).catch(() => {\n      // Redirect even if the request fails\n      window.location.href = 'login.html?auth_required=true&logout=true';\n    });\n  };\n\n  // Toggle mobile menu\n  const toggleMobileMenu = () => {\n    setMobileMenuOpen(!mobileMenuOpen);\n  };\n\n  // Special handling for Live View link to handle both index.html and root URL\n  const getLiveViewHref = () => {\n    // Check if we're on the root URL or index.html\n    const isRoot = window.location.pathname === '/' || window.location.pathname.endsWith('/');\n\n    // If we're on the root URL, stay on the root URL\n    if (isRoot) {\n      return './';\n    }\n\n    // Otherwise, default to index.html\n    return 'index.html';\n  };\n\n  // Navigation items - don't preserve query parameters when navigating via header\n  const navItems = [\n    { id: 'nav-live', href: getLiveViewHref(), label: 'Live View' },\n    { id: 'nav-recordings', href: 'recordings.html', label: 'Recordings' },\n    { id: 'nav-streams', href: 'streams.html', label: 'Streams' },\n    { id: 'nav-settings', href: 'settings.html', label: 'Settings' },\n    { id: 'nav-users', href: 'users.html', label: 'Users' },\n    { id: 'nav-system', href: 'system.html', label: 'System' }\n  ];\n\n  // Render navigation item\n  const renderNavItem = (item) => {\n    const isActive = activeNav === item.id;\n    const baseClasses = \"text-white no-underline rounded transition-colors\";\n    const desktopClasses = \"px-3 py-2\";\n    const mobileClasses = \"block w-full px-4 py-3 text-left\";\n    const activeClass = isActive ? 'bg-blue-600' : 'hover:bg-blue-700';\n\n    return (\n      <li className={mobileMenuOpen ? \"w-full\" : \"mx-1\"}>\n        <a\n          href={item.href}\n          id={item.id}\n          className={`${baseClasses} ${mobileMenuOpen ? mobileClasses : desktopClasses} ${activeClass}`}\n          onClick={mobileMenuOpen ? toggleMobileMenu : null}\n        >\n          {item.label}\n        </a>\n      </li>\n    );\n  };\n\n  return (\n    <header className=\"bg-gray-800 text-white py-2 shadow-md mb-4 w-full\">\n      <div className=\"container mx-auto px-4 flex justify-between items-center\">\n        <div className=\"logo flex items-center\">\n          <h1 className=\"text-xl font-bold m-0\">LightNVR</h1>\n          <span className=\"version text-blue-200 text-xs ml-2\">v{version}</span>\n        </div>\n\n        {/* Desktop Navigation */}\n        <nav className=\"hidden md:block\">\n          <ul className=\"flex list-none m-0 p-0\">\n            {navItems.map(renderNavItem)}\n          </ul>\n        </nav>\n\n        {/* User Menu (Desktop) */}\n        <div className=\"user-menu hidden md:flex items-center\">\n          <span className=\"mr-2\">{username}</span>\n          <a href=\"#\" onClick={handleLogout} className=\"logout-link text-white no-underline hover:bg-blue-700 px-3 py-1 rounded transition-colors\">Logout</a>\n        </div>\n\n        {/* Mobile Menu Button */}\n        <button\n          className=\"md:hidden text-white p-2 focus:outline-none\"\n          onClick={toggleMobileMenu}\n          aria-label=\"Toggle menu\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d={mobileMenuOpen ? \"M6 18L18 6M6 6l12 12\" : \"M4 6h16M4 12h16M4 18h16\"} />\n          </svg>\n        </button>\n      </div>\n\n      {/* Mobile Navigation */}\n      {mobileMenuOpen && (\n        <div className=\"md:hidden mt-2 border-t border-gray-700 pt-2 container mx-auto px-4\">\n          <ul className=\"list-none m-0 p-0 flex flex-col w-full\">\n            {navItems.map(renderNavItem)}\n            <li className=\"w-full mt-2 pt-2 border-t border-gray-700\">\n              <div className=\"flex justify-between items-center px-4 py-2\">\n                <span>{username}</span>\n                <a href=\"#\" onClick={handleLogout} className=\"logout-link text-white no-underline hover:bg-blue-700 px-3 py-1 rounded transition-colors\">Logout</a>\n              </div>\n            </li>\n          </ul>\n        </div>\n      )}\n    </header>\n  );\n}","var n=function(t,s,r,e){var u;s[0]=0;for(var h=1;h<s.length;h++){var p=s[h++],a=s[h]?(s[0]|=p?1:2,r[s[h++]]):s[++h];3===p?e[0]=a:4===p?e[1]=Object.assign(e[1]||{},a):5===p?(e[1]=e[1]||{})[s[++h]]=a:6===p?e[1][s[++h]]+=a+\"\":p?(u=t.apply(a,n(t,a,r,[\"\",null])),e.push(u),a[0]?s[0]|=2:(s[h-2]=0,s[h]=u)):e.push(a)}return e},t=new Map;export default function(s){var r=t.get(this);return r||(r=new Map,t.set(this,r)),(r=n(this,r.get(s)||(r.set(s,r=function(n){for(var t,s,r=1,e=\"\",u=\"\",h=[0],p=function(n){1===r&&(n||(e=e.replace(/^\\s*\\n\\s*|\\s*\\n\\s*$/g,\"\")))?h.push(0,n,e):3===r&&(n||e)?(h.push(3,n,e),r=2):2===r&&\"...\"===e&&n?h.push(4,n,0):2===r&&e&&!n?h.push(5,0,!0,e):r>=5&&((e||!n&&5===r)&&(h.push(r,0,e,s),r=6),n&&(h.push(r,n,0,s),r=6)),e=\"\"},a=0;a<n.length;a++){a&&(1===r&&p(),p(a));for(var l=0;l<n[a].length;l++)t=n[a][l],1===r?\"<\"===t?(p(),h=[h],r=3):e+=t:4===r?\"--\"===e&&\">\"===t?(r=1,e=\"\"):e=t+e[0]:u?t===u?u=\"\":e+=t:'\"'===t||\"'\"===t?u=t:\">\"===t?(p(),r=1):r&&(\"=\"===t?(r=5,s=e,e=\"\"):\"/\"===t&&(r<5||\">\"===n[a][l+1])?(p(),3===r&&(h=h[0]),r=h,(h=h[0]).push(2,0,r),r=0):\" \"===t||\"\\t\"===t||\"\\n\"===t||\"\\r\"===t?(p(),r=2):e+=t),3===r&&\"!--\"===e&&(r=4,h=h[0])}return p(),h}(s)),r),arguments,[])).length>1?r:r[0]}\n","/**\n * LightNVR Web Interface HTML Helper\n * Provides the html template literal function for Preact components\n */\n\nimport { h } from 'preact';\nimport htm from 'htm';\n\n// Initialize htm with Preact's h\nexport const html = htm.bind(h);\n","/**\n * LightNVR version information\n * This file is auto-generated from CMakeLists.txt during the build process\n * DO NOT EDIT MANUALLY\n */\n\nexport const VERSION = '0.11.16';\n"],"names":["props","isOpen","onClose","onConfirm","mode","count","title","message","html","e","target","currentTarget","key","year","useState","Date","getFullYear","jsx","class","children","jsxs","href","rel","version","VERSION","headerContainer","document","getElementById","activeNav","dataset","username","setUsername","mobileMenuOpen","setMobileMenuOpen","useEffect","auth","localStorage","getItem","extractedUsername","atob","split","error","console","handleLogout","preventDefault","removeItem","cookie","fetch","method","then","window","location","catch","toggleMobileMenu","navItems","id","pathname","endsWith","label","renderNavItem","item","activeClass","className","onClick","map","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","__vitePreload","async","initToastContainer","module","import","meta","url","style","createElement","textContent","head","appendChild","videoUrl","downloadUrl","overlay","modalContainer","header","titleElement","closeButton","innerHTML","addEventListener","body","removeChild","videoContainer","video","src","controls","autoplay","controlsContainer","heading","controlsGrid","speedControlsSection","speedHeading","speedButtonsContainer","forEach","speed","button","setAttribute","playbackRate","querySelectorAll","btn","getAttribute","toString","classList","remove","add","currentSpeedIndicator","detectionSection","detectionHeading","detectionControlsContainer","detectionCheckboxContainer","detectionCheckbox","type","detectionCheckboxLabel","htmlFor","sensitivityContainer","sensitivityLabel","sensitivityValue","sensitivitySlider","min","max","step","value","timeWindow","parseInt","detectionOverlayEnabled","drawDetections","detectionStatusIndicator","downloadSection","downloadButton","download","now","footer","canvasContainer","position","width","height","detectionCanvas","top","left","pointerEvents","display","recordingData","detections","recordingIdMatch","match","recordingId","queryContainer","render","h","QueryClientProvider","client","queryClient","RecordingDataFetcher","data","recording","isLoading","isLoadingRecording","recordingError","useQuery","startTime","endTime","streamName","detectionQueryEnabled","stream","start_time","end_time","log","Math","floor","getTime","detectionData","isLoadingDetections","detectionError","enabled","length","disabled","err","response","json","params","URLSearchParams","start","end","Error","videoWidth","videoHeight","requestAnimationFrame","ctx","getContext","clearRect","currentTime","currentTimestamp","visibleDetections","filter","detection","timestamp","abs","x","y","strokeStyle","lineWidth","strokeRect","fillStyle","labelText","round","confidence","labelWidth","measureText","fillRect","font","fillText","paused","ended","checked","lastDrawnTime","handleEscape","contains","removeEventListener","imageData","snapshotModal","snapshotTitle","snapshotImage","snapshotDownloadBtn","snapshotCloseBtn","closeButtons","modalContent","querySelector","closeModal","onload","onerror","onclick","event","storedImageData","storedStreamName","showStatusMessage","canvas","img","Image","newWidth","newHeight","drawImage","optimizedJpegData","toDataURL","filename","toISOString","replace","iframe","iframeDoc","contentWindow","open","write","close","onMessage","once","setTimeout","iframeError","tryDirectLinkDownload","canvasError","dataUrl","link","click","linkError","snapshotModalContainer","videoModalContainer","videoModal","modal","n","t","s","r","u","p","a","Object","assign","apply","push","Map","exports","get","this","set","l","arguments","bind","duration","showToast","statusContainer","messageElement","typeClass","parentNode"],"mappings":"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","x_google_ignoreList":[3]}