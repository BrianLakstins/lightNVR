System.register(["./query-client-legacy-DpGFWkK1.js","./layout-legacy-TbEyfw4s.js","./Footer-legacy-DqOCiyV5.js","./LoadingIndicator-legacy-CgixVNwJ.js","./websocket-client-legacy-BO-Yc0A6.js"],(function(e,t){"use strict";var s,n,o,r,l,a,i,d,c,g,m,u,b,h,y;return{setters:[e=>{s=e.c,n=e.d,o=e.A,r=e.y,l=e.b,a=e.u,i=e.g,d=e.E,c=e.e,g=e.Q},null,e=>{m=e.c,u=e.H,b=e.F},e=>{h=e.C},e=>{y=e.W}],execute:function(){function e({restartSystem:e,shutdownSystem:t,isRestarting:n,isShuttingDown:o}){return s("div",{className:"page-header flex justify-between items-center mb-4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow",children:[s("h2",{className:"text-xl font-bold",children:"System"}),s("div",{className:"controls space-x-2",children:[s("button",{id:"restart-btn",className:"px-4 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700 transition-colors focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",onClick:e,disabled:n||o,children:"Restart"}),s("button",{id:"shutdown-btn",className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",onClick:t,disabled:n||o,children:"Shutdown"})]})]})}function t({systemInfo:e,formatUptime:t}){return s("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[s("h3",{className:"text-lg font-semibold mb-4 pb-2 border-b border-gray-200 dark:border-gray-700",children:"System Information"}),s("div",{className:"space-y-2",children:[s("div",{className:"flex justify-between",children:[s("span",{className:"font-medium",children:"Version:"}),s("span",{children:e.version||"Unknown"})]}),s("div",{className:"flex justify-between",children:[s("span",{className:"font-medium",children:"Uptime:"}),s("span",{children:e.uptime?t(e.uptime):"Unknown"})]}),s("div",{className:"flex justify-between",children:[s("span",{className:"font-medium",children:"CPU Model:"}),s("span",{children:e.cpu?.model||"Unknown"})]}),s("div",{className:"flex justify-between",children:[s("span",{className:"font-medium",children:"CPU Cores:"}),s("span",{children:e.cpu?.cores||"Unknown"})]}),s("div",{className:"flex justify-between items-center",children:[s("span",{className:"font-medium",children:"CPU Usage:"}),s("div",{className:"w-32 bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:s("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${e.cpu?.usage||0}%`}})}),s("span",{children:e.cpu?.usage?`${e.cpu.usage.toFixed(1)}%`:"Unknown"})]})]})]})}function f({systemInfo:e,formatBytes:t}){const n=e.memory?.used||0,o=e.go2rtcMemory?.used||0,r=e.memory?.total||0,l=n+o,a=r?(l/r*100).toFixed(1):0,i=l?(n/l*100).toFixed(1):0,d=l?(o/l*100).toFixed(1):0;return s("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[s("h3",{className:"text-lg font-semibold mb-4 pb-2 border-b border-gray-200 dark:border-gray-700",children:"Memory & Storage"}),s("div",{className:"space-y-4",children:[s("div",{children:[s("div",{className:"flex justify-between mb-1",children:[s("span",{className:"font-medium",children:"Process Memory:"}),s("div",{children:[s("span",{className:"inline-block px-2 py-0.5 mr-1 text-xs rounded bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:["LightNVR: ",t(n)]}),s("span",{className:"inline-block px-2 py-0.5 text-xs rounded bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:["go2rtc: ",t(o)]})]})]}),s("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mb-1",children:[s("span",{children:["Combined: ",t(l)," / ",t(r)]}),s("span",{children:[a,"% of total memory"]})]}),s("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700 overflow-hidden",children:s("div",{className:"flex h-full",style:{width:`${a}%`},children:[s("div",{className:"bg-blue-600 h-2.5",style:{width:`${i}%`}}),s("div",{className:"bg-green-500 h-2.5",style:{width:`${d}%`}})]})})]}),s("div",{children:[s("div",{className:"flex justify-between mb-1",children:[s("span",{className:"font-medium",children:"System Memory:"}),s("span",{children:[e.systemMemory?.used?t(e.systemMemory.used):"0"," /",e.systemMemory?.total?t(e.systemMemory.total):"0"]})]}),s("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:s("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${e.systemMemory?.total?(e.systemMemory.used/e.systemMemory.total*100).toFixed(1):0}%`}})})]}),s("div",{children:[s("div",{className:"flex justify-between mb-1",children:[s("span",{className:"font-medium",children:"LightNVR Storage:"}),s("span",{children:[e.disk?.used?t(e.disk.used):"0"," /",e.disk?.total?t(e.disk.total):"0"]})]}),s("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:s("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${e.disk?.total?(e.disk.used/e.disk.total*100).toFixed(1):0}%`}})})]}),s("div",{children:[s("div",{className:"flex justify-between mb-1",children:[s("span",{className:"font-medium",children:"System Storage:"}),s("span",{children:[e.systemDisk?.used?t(e.systemDisk.used):"0"," /",e.systemDisk?.total?t(e.systemDisk.total):"0"]})]}),s("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:s("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${e.systemDisk?.total?(e.systemDisk.used/e.systemDisk.total*100).toFixed(1):0}%`}})})]})]})]})}function w({systemInfo:e,formatBytes:t}){if(!e.streamStorage||!Array.isArray(e.streamStorage)||0===e.streamStorage.length)return s("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[s("h3",{className:"text-lg font-semibold mb-4 pb-2 border-b border-gray-200 dark:border-gray-700",children:"Stream Storage"}),s("div",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No stream storage information available"})]});const n=e.streamStorage.reduce(((e,t)=>e+t.size),0),o=e.disk?.total||0,r=o?(n/o*100).toFixed(1):0,l=e.streamStorage.map((e=>({name:e.name,size:e.size,count:e.count,slicePercent:n?(e.size/n*100).toFixed(1):0})));l.sort(((e,t)=>t.size-e.size));const a=["bg-blue-600","bg-green-500","bg-yellow-500","bg-red-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500"];return s("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[s("h3",{className:"text-lg font-semibold mb-4 pb-2 border-b border-gray-200 dark:border-gray-700",children:"Stream Storage"}),s("div",{className:"space-y-4",children:s("div",{children:[s("div",{className:"flex justify-between mb-1",children:[s("span",{className:"font-medium",children:"Storage per Stream:"}),s("div",{className:"flex flex-wrap justify-end gap-1",children:l.map(((e,n)=>s("span",{className:`inline-block px-2 py-0.5 text-xs rounded ${a[n%a.length].replace("bg-","bg-opacity-20 bg-")} ${a[n%a.length].replace("bg-","text-")}`,children:[e.name,": ",t(e.size)]},e.name)))})]}),s("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mb-1",children:[s("span",{children:["Combined: ",t(n)," / ",t(o)]}),s("span",{children:[r,"% of total storage"]})]}),s("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700 overflow-hidden",children:s("div",{className:"flex h-full",style:{width:`${r}%`},children:l.map(((e,t)=>s("div",{className:`${a[t%a.length]} h-2.5`,style:{width:`${e.slicePercent}%`}},e.name)))})}),s("div",{className:"mt-4",children:[s("h4",{className:"font-medium mb-2",children:"Stream Details:"}),s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:l.map(((e,n)=>s("a",{href:`recordings.html?stream=${encodeURIComponent(e.name)}`,className:"flex items-center p-2 rounded bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors cursor-pointer",children:[s("div",{className:`w-3 h-3 rounded-full mr-2 ${a[n%a.length]}`}),s("div",{children:[s("div",{className:"font-medium",children:e.name}),s("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[t(e.size)," (",e.slicePercent,"%) â€¢ ",e.count," recordings"]})]})]},e.name)))})]})]})})]})}function p({systemInfo:e}){return s("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[s("h3",{className:"text-lg font-semibold mb-4 pb-2 border-b border-gray-200 dark:border-gray-700",children:"Network Interfaces"}),s("div",{className:"space-y-2",children:e.network?.interfaces?.length?e.network.interfaces.map((e=>s("div",{className:"mb-2 pb-2 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[s("div",{className:"flex justify-between",children:[s("span",{className:"font-medium",children:[e.name,":"]}),s("span",{children:e.address||"No IP"})]}),s("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["MAC: ",e.mac||"Unknown"," | ",e.up?"Up":"Down"]})]},e.name))):s("div",{className:"text-gray-500 dark:text-gray-400",children:"No network interfaces found"})})]})}function v({systemInfo:e,formatBytes:t}){return s("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[s("h3",{className:"text-lg font-semibold mb-4 pb-2 border-b border-gray-200 dark:border-gray-700",children:"Streams & Recordings"}),s("div",{className:"space-y-2",children:[s("div",{className:"flex justify-between",children:[s("span",{className:"font-medium",children:"Active Streams:"}),s("span",{children:[e.streams?.active||0," / ",e.streams?.total||0]})]}),s("div",{className:"flex justify-between",children:[s("span",{className:"font-medium",children:"Recordings:"}),s("span",{children:e.recordings?.count||0})]}),s("div",{className:"flex justify-between",children:[s("span",{className:"font-medium",children:"Recordings Size:"}),s("span",{children:e.recordings?.size?t(e.recordings.size):"0"})]})]})]})}function k(e){if(null==e)return s("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:"UNKNOWN"});const t=String(e).toLowerCase().trim();if("error"===t||"err"===t)return s("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:"ERROR"});if("warning"===t||"warn"===t)return s("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",children:"WARN"});if("info"===t)return s("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"INFO"});if("debug"===t||"dbg"===t)return s("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:"DEBUG"});{const t=String(e).toUpperCase();return s("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:t})}}function x({logs:e,logLevel:t,logCount:n,setLogLevel:o,setLogCount:r,loadLogs:l,clearLogs:a}){return s("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-4",children:[s("div",{className:"flex justify-between items-center mb-4 pb-2 border-b border-gray-200 dark:border-gray-700",children:[s("h3",{className:"text-lg font-semibold",children:"System Logs"}),s("div",{className:"flex space-x-2",children:[s("select",{id:"log-level",className:"px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:t,onChange:e=>{const s=e.target.value;console.log(`LogsView: Log level changed from ${t} to ${s}`),o(s)},children:[s("option",{value:"error",children:"Error"}),s("option",{value:"warning",children:"Warning"}),s("option",{value:"info",children:"Info"}),s("option",{value:"debug",children:"Debug"})]}),s("select",{id:"log-count",className:"px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:n,onChange:e=>r(parseInt(e.target.value,10)),children:[s("option",{value:"50",children:"50 lines"}),s("option",{value:"100",children:"100 lines"}),s("option",{value:"200",children:"200 lines"}),s("option",{value:"500",children:"500 lines"})]}),s("button",{id:"refresh-logs-btn",className:"px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800",onClick:l,children:"Refresh"}),s("button",{id:"clear-logs-btn",className:"px-3 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800",onClick:a,children:"Clear Logs"})]})]}),s("div",{className:"logs-container bg-gray-100 dark:bg-gray-900 rounded p-4 overflow-auto max-h-96 font-mono text-sm",children:0===e.length?s("div",{className:"text-gray-500 dark:text-gray-400",children:"No logs found"}):e.map(((e,t)=>s("div",{className:"log-entry mb-1 last:mb-0",children:[s("span",{className:"text-gray-500 dark:text-gray-400",children:e.timestamp}),s("span",{className:"mx-2",children:k(e.level)}),s("span",{className:"log-message "+("error"===e.level?"text-red-600 dark:text-red-400":""),children:e.message})]},t)))})]})}function N(e,t=1){if(0===e)return"0 Bytes";const s=t<0?0:t,n=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,n)).toFixed(s))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}function S(e){const t=Math.floor(e/86400),s=Math.floor(e%86400/3600),n=Math.floor(e%3600/60);let o="";return t>0&&(o+=`${t}d `),(s>0||t>0)&&(o+=`${s}h `),(n>0||s>0||t>0)&&(o+=`${n}m `),o+=`${Math.floor(e%60)}s`,o}function C({logLevel:e,logCount:t,onLogsReceived:s}){const[l,a]=n(!1),i=o(null),d=o(null);r((()=>{const e=localStorage.getItem("lastLogTimestamp");e&&(console.log("Loaded last log timestamp from localStorage:",e),d.current=e)}),[]);const c=()=>{if(!window.wsClient)return void console.log("WebSocket client not available, will retry on next poll");if(!window.wsClient.isConnected())return console.log("WebSocket not connected, attempting to connect"),void window.wsClient.connect();if(!document.getElementById("system-page"))return void console.log("Not on system page, skipping log fetch");console.log("Fetching logs via WebSocket with level: debug (to get all logs, will filter on frontend)");const e={level:"debug",count:t};d.current&&(e.last_timestamp=d.current),window.wsClient.getClientId&&(e.client_id=window.wsClient.getClientId()),console.log("Sending fetch request with payload:",e);try{window.wsClient.send("fetch","system/logs",e)?console.log("Fetch request sent successfully"):console.warn("Failed to send fetch request, will retry on next poll")}catch(s){console.error("Error sending fetch request:",s)}};return r((()=>{if(window.wsClient)return e();{console.log("WebSocket client not available, will check again later");const t=setInterval((()=>{window.wsClient&&(console.log("WebSocket client now available, setting up handlers"),clearInterval(t),e())}),1e3);return()=>{clearInterval(t)}}function e(){return console.log("Setting up WebSocket handlers for logs"),console.log("Registering handler for system/logs via WebSocket (once on mount)"),window.wsClient.on("update","system/logs",(e=>{if(console.log("Received logs update via WebSocket:",e),document.getElementById("system-page")){if(e&&e.logs&&Array.isArray(e.logs)){const t=e.logs.map((e=>{const t={timestamp:e.timestamp||"Unknown",level:e.level||"info",message:e.message||""};return t.level&&(t.level=t.level.toLowerCase()),"warn"===t.level&&(t.level="warning"),t}));e.latest_timestamp&&(d.current=e.latest_timestamp,localStorage.setItem("lastLogTimestamp",e.latest_timestamp),console.log("Updated and saved last log timestamp:",e.latest_timestamp)),t.length>0?(console.log(`Received ${t.length} logs via WebSocket`),t.sort(((e,t)=>new Date(t.timestamp)-new Date(e.timestamp))),s(t)):console.log("No logs received via WebSocket")}}else console.log("Not on system page, ignoring log update")})),()=>{console.log("Unregistering handler for system/logs via WebSocket (component unmounting)"),window.wsClient.off("update","system/logs"),i.current&&(clearInterval(i.current),i.current=null)}}}),[]),r((()=>{if(l&&!i.current){if(console.log("Starting log polling"),window.wsClient&&"function"==typeof window.wsClient.subscribe){console.log("Subscribing to system/logs via WebSocket for polling");const e={level:"debug",...d.current?{since:d.current}:{}};window.wsClient.subscribe("system/logs",e),console.log(`Subscribed to system/logs with level: debug and last_timestamp: ${d.current||"NULL"}`)}c(),console.log("Setting up polling interval for logs (every 5 seconds)"),i.current=setInterval((()=>{console.log("Polling interval triggered, fetching logs..."),c()}),5e3)}else!l&&i.current&&(console.log("Stopping log polling"),window.wsClient&&"function"==typeof window.wsClient.unsubscribe&&(console.log("Unsubscribing from system/logs via WebSocket"),window.wsClient.unsubscribe("system/logs")),clearInterval(i.current),i.current=null);return()=>{i.current&&(clearInterval(i.current),i.current=null),window.wsClient&&"function"==typeof window.wsClient.unsubscribe&&(console.log("Unsubscribing from system/logs via WebSocket on cleanup"),window.wsClient.unsubscribe("system/logs"))}}),[l,e]),r((()=>{const e=()=>{console.log("Received refresh-logs-websocket event, triggering fetch"),c()};return window.addEventListener("refresh-logs-websocket",e),()=>{window.removeEventListener("refresh-logs-websocket",e)}}),[]),r((()=>(console.log(`LogsPoller: Setting up polling with log level ${e}`),a(!1),setTimeout((()=>{a(!0)}),100),()=>{console.log("LogsPoller: Cleaning up on unmount"),a(!1)})),[e,t]),null}function L(){const[d,c]=n({version:"",uptime:"",cpu:{model:"",cores:0,usage:0},memory:{total:0,used:0,free:0},go2rtcMemory:{total:0,used:0,free:0},systemMemory:{total:0,used:0,free:0},disk:{total:0,used:0,free:0},systemDisk:{total:0,used:0,free:0},network:{interfaces:[]},streams:{active:0,total:0},recordings:{count:0,size:0}}),[g,u]=n([]),[b,k]=n("debug"),L=o("debug"),[I,M]=n(100),[$,W]=n(!1),[j,U]=n(!1),[E,R]=n(!1),{data:B,isLoading:D,error:F,refetch:P}=l(["systemInfo"],"/api/system/info",{timeout:15e3,retries:2,retryDelay:1e3}),z=a({mutationKey:["clearLogs"],mutationFn:async()=>await i("/api/system/logs/clear",{method:"POST",timeout:1e4,retries:1}),onSuccess:()=>{m("Logs cleared successfully"),u([])},onError:e=>{console.error("Error clearing logs:",e),m(`Error clearing logs: ${e.message}`)}});r((()=>{B&&R(!0)}),[B]);const A=a({mutationFn:async()=>await i("/api/system/restart",{method:"POST",timeout:3e4,retries:0}),onMutate:()=>{W(!0),m("Restarting system...")},onSuccess:()=>{m("System is restarting. Please wait..."),setTimeout((()=>{window.location.reload()}),1e4)},onError:e=>{console.error("Error restarting system:",e),m(`Error restarting system: ${e.message}`),W(!1)}}),T=a({mutationFn:async()=>await i("/api/system/shutdown",{method:"POST",timeout:3e4,retries:0}),onMutate:()=>{U(!0),m("Shutting down system...")},onSuccess:()=>{m("System is shutting down. You will need to manually restart it.")},onError:e=>{console.error("Error shutting down system:",e),m(`Error shutting down system: ${e.message}`),U(!1)}});return r((()=>{B&&c(B)}),[B]),r((()=>()=>{window.wsClient&&"function"==typeof window.wsClient.unsubscribe&&(console.log("Cleaning up any WebSocket subscriptions on unmount"),window.wsClient.unsubscribe("system/logs"))}),[]),r((()=>{if(void 0!==y){if(window.wsClient=new y,console.log("WebSocket client initialized at application level"),window.wsClient){console.log("Initial WebSocket connection state:",{connected:window.wsClient.isConnected(),clientId:window.wsClient.getClientId()});const e=window.wsClient.connect;window.wsClient.connect=function(){const t=e.apply(this,arguments);if(this.socket){const e=this.socket.onopen;this.socket.onopen=t=>{console.log("WebSocket connection opened at application level"),e&&e.call(this,t)};const t=this.socket.onerror;this.socket.onerror=e=>{console.error("WebSocket error at application level:",e),t&&t.call(this,e)};const s=this.socket.onclose;this.socket.onclose=e=>{console.log(`WebSocket connection closed at application level: ${e.code} ${e.reason}`),s&&s.call(this,e)};const n=this.socket.onmessage;this.socket.onmessage=e=>{e.data.includes('"type":"welcome"')||console.log("WebSocket message received at application level"),n&&n.call(this,e)}}return t};const t=window.wsClient.handleMessage;window.wsClient.handleMessage=function(e){const s=this.clientId;t.call(this,e);const n=this.clientId;s!==n&&n&&console.log(`WebSocket client ID changed at application level: ${n}`)}}}else console.log("WebSocketClient is not defined, cannot initialize WebSocket client")}),[]),s("section",{id:"system-page",className:"page",children:[s(e,{restartSystem:()=>{confirm("Are you sure you want to restart the system?")&&A.mutate()},shutdownSystem:()=>{confirm("Are you sure you want to shut down the system?")&&T.mutate()},isRestarting:$,isShuttingDown:j}),s(h,{isLoading:D,hasData:E,loadingMessage:"Loading system information...",emptyMessage:"System information not available. Please try again later.",children:[s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s(t,{systemInfo:d,formatUptime:S}),s(f,{systemInfo:d,formatBytes:N})]}),s("div",{className:"grid grid-cols-1 gap-4 mb-4",children:s(w,{systemInfo:d,formatBytes:N})}),s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s(p,{systemInfo:d}),s(v,{systemInfo:d,formatBytes:N})]}),s(x,{logs:g,logLevel:b,logCount:I,setLogLevel:e=>{console.log(`SystemView: Setting log level from ${b} to ${e}`),k(e),L.current=e},setLogCount:M,loadLogs:()=>{if(window.wsClient&&window.wsClient.isConnected()){console.log("Manually triggering WebSocket fetch for logs");const e=new CustomEvent("refresh-logs-websocket");window.dispatchEvent(e)}},clearLogs:()=>{confirm("Are you sure you want to clear all logs?")&&z.mutate()}}),s(C,{logLevel:b,logCount:I,onLogsReceived:e=>{console.log("SystemView received new logs:",e.length);const t=L.current,s=e.filter((e=>function(e,t){if("debug"===String(t||"").toLowerCase())return!0;let s=2,n=2;const o=String(e||"").toLowerCase(),r=String(t||"").toLowerCase();return"error"===o?s=0:"warning"===o||"warn"===o?s=1:"info"===o?s=2:"debug"===o&&(s=3),"error"===r?n=0:"warning"===r||"warn"===r?n=1:"info"===r?n=2:"debug"===r&&(n=3),s<=n}(e.level,t)));u(s)}})]})]})}document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("main-content");e&&d(s(g,{client:c,children:[s(u,{}),s(L,{}),s(b,{})]}),e)}))}}}));
//# sourceMappingURL=system-legacy-C0JqW-D6.js.map
