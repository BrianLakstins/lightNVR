{"version":3,"file":"motion-D5s_Pag0.js","sources":["../../js/components/preact/MotionView.jsx","../../js/pages/motion-page.jsx"],"sourcesContent":["/**\n * LightNVR Web Interface MotionView Component\n * Component for managing motion recording settings\n */\n\nimport { useState } from 'react';\nimport { showStatusMessage } from './ToastContainer.jsx';\nimport { ContentLoader } from './LoadingIndicator.jsx';\nimport {\n  useQuery,\n  useMutation,\n  useQueryClient,\n  fetchJSON\n} from '../../query-client.js';\n\n/**\n * MotionView component\n * @returns {JSX.Element} MotionView component\n */\nexport function MotionView() {\n  const queryClient = useQueryClient();\n  const [selectedStream, setSelectedStream] = useState(null);\n  const [configModalVisible, setConfigModalVisible] = useState(false);\n  const [currentConfig, setCurrentConfig] = useState({\n    enabled: true,\n    pre_buffer_seconds: 5,\n    post_buffer_seconds: 10,\n    max_file_duration: 300,\n    codec: 'h264',\n    quality: 'medium',\n    retention_days: 7\n  });\n\n  // Fetch streams data\n  const {\n    data: streamsResponse = [],\n    isLoading: streamsLoading\n  } = useQuery(['streams'], '/api/streams', {\n    timeout: 10000,\n    retries: 2,\n    retryDelay: 1000\n  });\n\n  // Fetch storage statistics\n  const {\n    data: storageStats,\n    isLoading: storageLoading\n  } = useQuery(['motionStorage'], '/api/motion/storage', {\n    timeout: 5000,\n    retries: 1,\n    retryDelay: 1000\n  });\n\n  // Process streams response\n  const streams = Array.isArray(streamsResponse) ? streamsResponse : (streamsResponse.streams || []);\n\n  // Mutation for saving motion config\n  const saveConfigMutation = useMutation({\n    mutationFn: async (data) => {\n      const { streamName, ...configData } = data;\n      const url = `/api/motion/config/${encodeURIComponent(streamName)}`;\n      return await fetchJSON(url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(configData),\n        timeout: 10000\n      });\n    },\n    onSuccess: () => {\n      showStatusMessage('Motion recording configuration saved');\n      setConfigModalVisible(false);\n      queryClient.invalidateQueries({ queryKey: ['motionConfig'] });\n      queryClient.invalidateQueries({ queryKey: ['motionStats'] });\n    },\n    onError: (error) => {\n      showStatusMessage(`Error saving configuration: ${error.message}`, 5000, 'error');\n    }\n  });\n\n  // Mutation for deleting motion config\n  const deleteConfigMutation = useMutation({\n    mutationFn: async (streamName) => {\n      const url = `/api/motion/config/${encodeURIComponent(streamName)}`;\n      return await fetchJSON(url, {\n        method: 'DELETE',\n        timeout: 10000\n      });\n    },\n    onSuccess: () => {\n      showStatusMessage('Motion recording disabled');\n      queryClient.invalidateQueries({ queryKey: ['motionConfig'] });\n      queryClient.invalidateQueries({ queryKey: ['motionStats'] });\n    },\n    onError: (error) => {\n      showStatusMessage(`Error disabling motion recording: ${error.message}`, 5000, 'error');\n    }\n  });\n\n  // Open configuration modal\n  const openConfigModal = async (stream) => {\n    setSelectedStream(stream);\n    \n    // Try to load existing configuration\n    try {\n      const config = await fetchJSON(`/api/motion/config/${encodeURIComponent(stream.name)}`, {\n        timeout: 5000\n      });\n      setCurrentConfig(config);\n    } catch (error) {\n      // No existing config, use defaults\n      setCurrentConfig({\n        enabled: true,\n        pre_buffer_seconds: 5,\n        post_buffer_seconds: 10,\n        max_file_duration: 300,\n        codec: 'h264',\n        quality: 'medium',\n        retention_days: 7\n      });\n    }\n    \n    setConfigModalVisible(true);\n  };\n\n  // Save configuration\n  const handleSaveConfig = () => {\n    if (!selectedStream) return;\n    \n    saveConfigMutation.mutate({\n      streamName: selectedStream.name,\n      ...currentConfig\n    });\n  };\n\n  // Disable motion recording\n  const handleDisableMotion = (streamName) => {\n    if (confirm(`Disable motion recording for ${streamName}?`)) {\n      deleteConfigMutation.mutate(streamName);\n    }\n  };\n\n  // Format bytes to human readable\n  const formatBytes = (bytes) => {\n    if (bytes === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return Math.round((bytes / Math.pow(k, i)) * 100) / 100 + ' ' + sizes[i];\n  };\n\n  // Format timestamp\n  const formatDate = (timestamp) => {\n    if (!timestamp) return 'N/A';\n    return new Date(timestamp * 1000).toLocaleString();\n  };\n\n  if (streamsLoading) {\n    return <ContentLoader />;\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold mb-2\">Motion Recording</h1>\n        <p className=\"text-gray-600 dark:text-gray-400\">\n          Configure ONVIF motion detection recording for your cameras\n        </p>\n      </div>\n\n      {/* Storage Statistics */}\n      {storageStats && (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8\">\n          <h2 className=\"text-xl font-semibold mb-4\">Storage Statistics</h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div className=\"bg-gray-50 dark:bg-gray-700 p-4 rounded\">\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">Total Recordings</div>\n              <div className=\"text-2xl font-bold\">{storageStats.total_recordings || 0}</div>\n            </div>\n            <div className=\"bg-gray-50 dark:bg-gray-700 p-4 rounded\">\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">Total Size</div>\n              <div className=\"text-2xl font-bold\">{formatBytes(storageStats.total_size_bytes || 0)}</div>\n            </div>\n            <div className=\"bg-gray-50 dark:bg-gray-700 p-4 rounded\">\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">Disk Usage</div>\n              <div className=\"text-2xl font-bold\">{(storageStats.disk_space_used_percent || 0).toFixed(1)}%</div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Streams List */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden\">\n        <div className=\"p-6 border-b border-gray-200 dark:border-gray-700\">\n          <h2 className=\"text-xl font-semibold\">Camera Motion Settings</h2>\n        </div>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n            <thead className=\"bg-gray-50 dark:bg-gray-700\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Camera\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Status\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Pre-Buffer\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Post-Buffer\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Retention\n                </th>\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  Actions\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n              {streams.map((stream) => (\n                <StreamRow\n                  key={stream.name}\n                  stream={stream}\n                  onConfigure={openConfigModal}\n                  onDisable={handleDisableMotion}\n                />\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Configuration Modal */}\n      {configModalVisible && selectedStream && (\n        <ConfigModal\n          stream={selectedStream}\n          config={currentConfig}\n          onConfigChange={setCurrentConfig}\n          onSave={handleSaveConfig}\n          onClose={() => setConfigModalVisible(false)}\n          isSaving={saveConfigMutation.isPending}\n        />\n      )}\n    </div>\n  );\n}\n\n/**\n * StreamRow component for displaying individual stream motion settings\n */\nfunction StreamRow({ stream, onConfigure, onDisable }) {\n  const [stats, setStats] = useState(null);\n  const [config, setConfig] = useState(null);\n\n  // Fetch motion stats for this stream\n  const { data: statsData } = useQuery(\n    ['motionStats', stream.name],\n    `/api/motion/stats/${encodeURIComponent(stream.name)}`,\n    {\n      timeout: 5000,\n      retries: 1,\n      retryDelay: 1000,\n      onError: () => {\n        // No stats available, motion recording not configured\n      }\n    }\n  );\n\n  // Fetch motion config for this stream\n  const { data: configData } = useQuery(\n    ['motionConfig', stream.name],\n    `/api/motion/config/${encodeURIComponent(stream.name)}`,\n    {\n      timeout: 5000,\n      retries: 1,\n      retryDelay: 1000,\n      onError: () => {\n        // No config available\n      }\n    }\n  );\n\n  const isEnabled = configData?.enabled || false;\n\n  return (\n    <tr>\n      <td className=\"px-6 py-4 whitespace-nowrap\">\n        <div className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">{stream.name}</div>\n      </td>\n      <td className=\"px-6 py-4 whitespace-nowrap\">\n        <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${\n          isEnabled\n            ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200'\n            : 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300'\n        }`}>\n          {isEnabled ? 'Enabled' : 'Disabled'}\n        </span>\n      </td>\n      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400\">\n        {configData?.pre_buffer_seconds || '-'}s\n      </td>\n      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400\">\n        {configData?.post_buffer_seconds || '-'}s\n      </td>\n      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400\">\n        {configData?.retention_days || '-'} days\n      </td>\n      <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n        <button\n          onClick={() => onConfigure(stream)}\n          className=\"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 mr-4\"\n        >\n          Configure\n        </button>\n        {isEnabled && (\n          <button\n            onClick={() => onDisable(stream.name)}\n            className=\"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300\"\n          >\n            Disable\n          </button>\n        )}\n      </td>\n    </tr>\n  );\n}\n\n/**\n * ConfigModal component for editing motion recording configuration\n */\nfunction ConfigModal({ stream, config, onConfigChange, onSave, onClose, isSaving }) {\n  const handleChange = (field, value) => {\n    onConfigChange({\n      ...config,\n      [field]: value\n    });\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\n        <div className=\"p-6 border-b border-gray-200 dark:border-gray-700\">\n          <h2 className=\"text-2xl font-bold\">Motion Recording Configuration</h2>\n          <p className=\"text-gray-600 dark:text-gray-400 mt-1\">Camera: {stream.name}</p>\n        </div>\n\n        <div className=\"p-6 space-y-6\">\n          {/* Enabled Toggle */}\n          <div className=\"flex items-center justify-between\">\n            <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n              Enable Motion Recording\n            </label>\n            <label className=\"relative inline-flex items-center cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={config.enabled}\n                onChange={(e) => handleChange('enabled', e.target.checked)}\n                className=\"sr-only peer\"\n              />\n              <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600\"></div>\n            </label>\n          </div>\n\n          {/* Pre-Buffer Seconds */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Pre-Event Buffer (seconds)\n            </label>\n            <input\n              type=\"number\"\n              min=\"0\"\n              max=\"30\"\n              value={config.pre_buffer_seconds}\n              onChange={(e) => handleChange('pre_buffer_seconds', parseInt(e.target.value))}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n            />\n            <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\n              Seconds of video to include before motion event (0-30)\n            </p>\n          </div>\n\n          {/* Post-Buffer Seconds */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Post-Event Buffer (seconds)\n            </label>\n            <input\n              type=\"number\"\n              min=\"0\"\n              max=\"60\"\n              value={config.post_buffer_seconds}\n              onChange={(e) => handleChange('post_buffer_seconds', parseInt(e.target.value))}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n            />\n            <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\n              Seconds to continue recording after motion stops (0-60)\n            </p>\n          </div>\n\n          {/* Max File Duration */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Maximum File Duration (seconds)\n            </label>\n            <input\n              type=\"number\"\n              min=\"60\"\n              max=\"3600\"\n              step=\"60\"\n              value={config.max_file_duration}\n              onChange={(e) => handleChange('max_file_duration', parseInt(e.target.value))}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n            />\n            <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\n              Maximum duration for a single recording file (60-3600 seconds)\n            </p>\n          </div>\n\n          {/* Codec */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Video Codec\n            </label>\n            <select\n              value={config.codec}\n              onChange={(e) => handleChange('codec', e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n            >\n              <option value=\"h264\">H.264</option>\n              <option value=\"h265\">H.265</option>\n            </select>\n          </div>\n\n          {/* Quality */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Recording Quality\n            </label>\n            <select\n              value={config.quality}\n              onChange={(e) => handleChange('quality', e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n            >\n              <option value=\"low\">Low</option>\n              <option value=\"medium\">Medium</option>\n              <option value=\"high\">High</option>\n            </select>\n          </div>\n\n          {/* Retention Days */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Retention Period (days)\n            </label>\n            <input\n              type=\"number\"\n              min=\"1\"\n              max=\"365\"\n              value={config.retention_days}\n              onChange={(e) => handleChange('retention_days', parseInt(e.target.value))}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n            />\n            <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\n              Automatically delete recordings older than this many days (1-365)\n            </p>\n          </div>\n        </div>\n\n        <div className=\"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3\">\n          <button\n            onClick={onClose}\n            disabled={isSaving}\n            className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={onSave}\n            disabled={isSaving}\n            className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\"\n          >\n            {isSaving ? 'Saving...' : 'Save Configuration'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n","/**\n * LightNVR Web Interface Motion Recording Page\n * Entry point for the motion recording page\n */\n\nimport { render } from 'preact';\nimport { MotionView } from '../components/preact/MotionView.jsx';\nimport { QueryClientProvider, queryClient } from '../query-client.js';\nimport { Header } from \"../components/preact/Header.jsx\";\nimport { Footer } from \"../components/preact/Footer.jsx\";\nimport { ToastContainer } from \"../components/preact/ToastContainer.jsx\";\n\n// Render the MotionView component when the DOM is loaded\ndocument.addEventListener('DOMContentLoaded', () => {\n  // Get the container element\n  const container = document.getElementById('main-content');\n\n  if (container) {\n    render(\n      <QueryClientProvider client={queryClient}>\n        <Header />\n        <ToastContainer />\n        <MotionView />\n        <Footer />\n      </QueryClientProvider>,\n      container\n    );\n  }\n});\n\n"],"names":["MotionView","queryClient","useQueryClient","selectedStream","setSelectedStream","useState","configModalVisible","setConfigModalVisible","currentConfig","setCurrentConfig","streamsResponse","streamsLoading","useQuery","storageStats","storageLoading","streams","saveConfigMutation","useMutation","data","streamName","configData","url","fetchJSON","showStatusMessage","error","deleteConfigMutation","openConfigModal","stream","config","handleSaveConfig","handleDisableMotion","formatBytes","bytes","k","sizes","i","ContentLoader","jsxs","jsx","StreamRow","ConfigModal","onConfigure","onDisable","stats","setStats","setConfig","statsData","isEnabled","onConfigChange","onSave","onClose","isSaving","handleChange","field","value","e","container","render","QueryClientProvider","Header","ToastContainer","Footer"],"mappings":"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"}