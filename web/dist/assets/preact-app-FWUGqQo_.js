const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./WebRTCView-BZz9JyjZ.js","./DetectionOverlay-CWN1kWeE.js","./LiveView-ByePH35Z.js","./LoadingIndicator-CiahmyRu.js","./RecordingsView-3hg_3JsB.js","./fetch-utils-GN-4zfXA.js","./TimelineView-HjGzbyL2.js","./SettingsView-BjMzynwJ.js","./StreamsView-DSDWAkXP.js","./SystemView-CvuOn3kw.js","./LoginView-DgdZNQOT.js","./UsersView-Bs-wP9LA.js"])))=>i.map(i=>d[i]);
var Le=Object.freeze,bt=Object.defineProperty;var j=(t,e)=>Le(bt(t,"raw",{value:Le(e||t.slice())}));(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();const xt="modulepreload",kt=function(t,e){return new URL(t,e).href},Te={},N=function(e,n,o){let i=Promise.resolve();if(n&&n.length>0){const a=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),d=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=kt(c,o),c in Te)return;Te[c]=!0;const u=c.endsWith(".css"),s=u?'[rel="stylesheet"]':"";if(!!o)for(let f=a.length-1;f>=0;f--){const h=a[f];if(h.href===c&&(!u||h.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(c,'"]').concat(s)))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":xt,u||(m.as="script"),m.crossOrigin="",m.href=c,d&&m.setAttribute("nonce",d),document.head.appendChild(m),u)return new Promise((f,h)=>{m.addEventListener("load",f),m.addEventListener("error",()=>h(new Error("Unable to preload CSS for ".concat(c))))})}))}function r(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&r(l.reason);return e().catch(r)})};var se,w,Xe,q,Ne,Qe,Ze,et,we,he,pe,J={},tt=[],Ct=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,le=Array.isArray;function B(t,e){for(var n in e)t[n]=e[n];return t}function be(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function ge(t,e,n){var o,i,r,a={};for(r in e)r=="key"?o=e[r]:r=="ref"?i=e[r]:a[r]=e[r];if(arguments.length>2&&(a.children=arguments.length>3?se.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(r in t.defaultProps)a[r]===void 0&&(a[r]=t.defaultProps[r]);return oe(t,a,o,i,null)}function oe(t,e,n,o,i){var r={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i!=null?i:++Xe,__i:-1,__u:0};return i==null&&w.vnode!=null&&w.vnode(r),r}function Z(t){return t.children}function G(t,e){this.props=t,this.context=e}function K(t,e){if(e==null)return t.__?K(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?K(t):null}function nt(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return nt(t)}}function Ie(t){(!t.__d&&(t.__d=!0)&&q.push(t)&&!ae.__r++||Ne!==w.debounceRendering)&&((Ne=w.debounceRendering)||Qe)(ae)}function ae(){for(var t,e,n,o,i,r,a,l=1;q.length;)q.length>l&&q.sort(Ze),t=q.shift(),l=q.length,t.__d&&(n=void 0,i=(o=(e=t).__v).__e,r=[],a=[],e.__P&&((n=B({},o)).__v=o.__v+1,w.vnode&&w.vnode(n),xe(e.__P,n,o,e.__n,e.__P.namespaceURI,32&o.__u?[i]:null,r,i!=null?i:K(o),!!(32&o.__u),a),n.__v=o.__v,n.__.__k[n.__i]=n,it(r,n,a),n.__e!=i&&nt(n)));ae.__r=0}function ot(t,e,n,o,i,r,a,l,d,c,u){var s,_,m,f,h,b,p=o&&o.__k||tt,g=e.length;for(d=Et(n,e,p,d,g),s=0;s<g;s++)(m=n.__k[s])!=null&&(_=m.__i===-1?J:p[m.__i]||J,m.__i=s,b=xe(t,m,_,i,r,a,l,d,c,u),f=m.__e,m.ref&&_.ref!=m.ref&&(_.ref&&ke(_.ref,null,m),u.push(m.ref,m.__c||f,m)),h==null&&f!=null&&(h=f),4&m.__u||_.__k===m.__k?d=rt(m,d,t):typeof m.type=="function"&&b!==void 0?d=b:f&&(d=f.nextSibling),m.__u&=-7);return n.__e=h,d}function Et(t,e,n,o,i){var r,a,l,d,c,u=n.length,s=u,_=0;for(t.__k=new Array(i),r=0;r<i;r++)(a=e[r])!=null&&typeof a!="boolean"&&typeof a!="function"?(d=r+_,(a=t.__k[r]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?oe(null,a,null,null,null):le(a)?oe(Z,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?oe(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=t,a.__b=t.__b+1,l=null,(c=a.__i=St(a,n,d,s))!==-1&&(s--,(l=n[c])&&(l.__u|=2)),l==null||l.__v===null?(c==-1&&(i>u?_--:i<u&&_++),typeof a.type!="function"&&(a.__u|=4)):c!=d&&(c==d-1?_--:c==d+1?_++:(c>d?_--:_++,a.__u|=4))):t.__k[r]=null;if(s)for(r=0;r<u;r++)(l=n[r])!=null&&(2&l.__u)==0&&(l.__e==o&&(o=K(l)),st(l,l));return o}function rt(t,e,n){var o,i;if(typeof t.type=="function"){for(o=t.__k,i=0;o&&i<o.length;i++)o[i]&&(o[i].__=t,e=rt(o[i],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=K(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function St(t,e,n,o){var i,r,a=t.key,l=t.type,d=e[n];if(d===null&&t.key==null||d&&a==d.key&&l===d.type&&(2&d.__u)==0)return n;if(o>(d!=null&&(2&d.__u)==0?1:0))for(i=n-1,r=n+1;i>=0||r<e.length;){if(i>=0){if((d=e[i])&&(2&d.__u)==0&&a==d.key&&l===d.type)return i;i--}if(r<e.length){if((d=e[r])&&(2&d.__u)==0&&a==d.key&&l===d.type)return r;r++}}return-1}function Me(t,e,n){e[0]=="-"?t.setProperty(e,n!=null?n:""):t[e]=n==null?"":typeof n!="number"||Ct.test(e)?n:n+"px"}function ne(t,e,n,o,i){var r;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||Me(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||Me(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")r=e!=(e=e.replace(et,"$1")),e=e.toLowerCase()in t||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+r]=n,n?o?n.t=o.t:(n.t=we,t.addEventListener(e,r?pe:he,r)):t.removeEventListener(e,r?pe:he,r);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n!=null?n:"";break e}catch(a){}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function Pe(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.u==null)e.u=we++;else if(e.u<n.t)return;return n(w.event?w.event(e):e)}}}function xe(t,e,n,o,i,r,a,l,d,c){var u,s,_,m,f,h,b,p,g,I,x,T,L,R,A,O,H,k=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(d=!!(32&n.__u),r=[l=e.__e=n.__e]),(u=w.__b)&&u(e);e:if(typeof k=="function")try{if(p=e.props,g="prototype"in k&&k.prototype.render,I=(u=k.contextType)&&o[u.__c],x=u?I?I.props.value:u.__:o,n.__c?b=(s=e.__c=n.__c).__=s.__E:(g?e.__c=s=new k(p,x):(e.__c=s=new G(p,x),s.constructor=k,s.render=Dt),I&&I.sub(s),s.props=p,s.state||(s.state={}),s.context=x,s.__n=o,_=s.__d=!0,s.__h=[],s._sb=[]),g&&s.__s==null&&(s.__s=s.state),g&&k.getDerivedStateFromProps!=null&&(s.__s==s.state&&(s.__s=B({},s.__s)),B(s.__s,k.getDerivedStateFromProps(p,s.__s))),m=s.props,f=s.state,s.__v=e,_)g&&k.getDerivedStateFromProps==null&&s.componentWillMount!=null&&s.componentWillMount(),g&&s.componentDidMount!=null&&s.__h.push(s.componentDidMount);else{if(g&&k.getDerivedStateFromProps==null&&p!==m&&s.componentWillReceiveProps!=null&&s.componentWillReceiveProps(p,x),!s.__e&&(s.shouldComponentUpdate!=null&&s.shouldComponentUpdate(p,s.__s,x)===!1||e.__v==n.__v)){for(e.__v!=n.__v&&(s.props=p,s.state=s.__s,s.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(E){E&&(E.__=e)}),T=0;T<s._sb.length;T++)s.__h.push(s._sb[T]);s._sb=[],s.__h.length&&a.push(s);break e}s.componentWillUpdate!=null&&s.componentWillUpdate(p,s.__s,x),g&&s.componentDidUpdate!=null&&s.__h.push(function(){s.componentDidUpdate(m,f,h)})}if(s.context=x,s.props=p,s.__P=t,s.__e=!1,L=w.__r,R=0,g){for(s.state=s.__s,s.__d=!1,L&&L(e),u=s.render(s.props,s.state,s.context),A=0;A<s._sb.length;A++)s.__h.push(s._sb[A]);s._sb=[]}else do s.__d=!1,L&&L(e),u=s.render(s.props,s.state,s.context),s.state=s.__s;while(s.__d&&++R<25);s.state=s.__s,s.getChildContext!=null&&(o=B(B({},o),s.getChildContext())),g&&!_&&s.getSnapshotBeforeUpdate!=null&&(h=s.getSnapshotBeforeUpdate(m,f)),O=u,u!=null&&u.type===Z&&u.key==null&&(O=at(u.props.children)),l=ot(t,le(O)?O:[O],e,n,o,i,r,a,l,d,c),s.base=e.__e,e.__u&=-161,s.__h.length&&a.push(s),b&&(s.__E=s.__=null)}catch(E){if(e.__v=null,d||r!=null)if(E.then){for(e.__u|=d?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;r[r.indexOf(l)]=null,e.__e=l}else for(H=r.length;H--;)be(r[H]);else e.__e=n.__e,e.__k=n.__k;w.__e(E,e,n)}else r==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):l=e.__e=$t(n.__e,e,n,o,i,r,a,d,c);return(u=w.diffed)&&u(e),128&e.__u?void 0:l}function it(t,e,n){for(var o=0;o<n.length;o++)ke(n[o],n[++o],n[++o]);w.__c&&w.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(r){r.call(i)})}catch(r){w.__e(r,i.__v)}})}function at(t){return typeof t!="object"||t==null?t:le(t)?t.map(at):B({},t)}function $t(t,e,n,o,i,r,a,l,d){var c,u,s,_,m,f,h,b=n.props,p=e.props,g=e.type;if(g=="svg"?i="http://www.w3.org/2000/svg":g=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),r!=null){for(c=0;c<r.length;c++)if((m=r[c])&&"setAttribute"in m==!!g&&(g?m.localName==g:m.nodeType==3)){t=m,r[c]=null;break}}if(t==null){if(g==null)return document.createTextNode(p);t=document.createElementNS(i,g,p.is&&p),l&&(w.__m&&w.__m(e,r),l=!1),r=null}if(g===null)b===p||l&&t.data===p||(t.data=p);else{if(r=r&&se.call(t.childNodes),b=n.props||J,!l&&r!=null)for(b={},c=0;c<t.attributes.length;c++)b[(m=t.attributes[c]).name]=m.value;for(c in b)if(m=b[c],c!="children"){if(c=="dangerouslySetInnerHTML")s=m;else if(!(c in p)){if(c=="value"&&"defaultValue"in p||c=="checked"&&"defaultChecked"in p)continue;ne(t,c,null,m,i)}}for(c in p)m=p[c],c=="children"?_=m:c=="dangerouslySetInnerHTML"?u=m:c=="value"?f=m:c=="checked"?h=m:l&&typeof m!="function"||b[c]===m||ne(t,c,m,b[c],i);if(u)l||s&&(u.__html===s.__html||u.__html===t.innerHTML)||(t.innerHTML=u.__html),e.__k=[];else if(s&&(t.innerHTML=""),ot(e.type==="template"?t.content:t,le(_)?_:[_],e,n,o,g=="foreignObject"?"http://www.w3.org/1999/xhtml":i,r,a,r?r[0]:n.__k&&K(n,0),l,d),r!=null)for(c=r.length;c--;)be(r[c]);l||(c="value",g=="progress"&&f==null?t.removeAttribute("value"):f!==void 0&&(f!==t[c]||g=="progress"&&!f||g=="option"&&f!==b[c])&&ne(t,c,f,b[c],i),c="checked",h!==void 0&&h!==t[c]&&ne(t,c,h,b[c],i))}return t}function ke(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(i){w.__e(i,n)}}function st(t,e,n){var o,i;if(w.unmount&&w.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||ke(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(r){w.__e(r,e)}o.base=o.__P=null}if(o=t.__k)for(i=0;i<o.length;i++)o[i]&&st(o[i],e,n||typeof t.type!="function");n||be(t.__e),t.__c=t.__=t.__e=void 0}function Dt(t,e,n){return this.constructor(t,n)}function Lt(t,e,n){var o,i,r,a;e==document&&(e=document.documentElement),w.__&&w.__(t,e),i=(o=typeof n=="function")?null:n&&n.__k||e.__k,r=[],a=[],xe(e,t=(!o&&n||e).__k=ge(Z,null,[t]),i||J,J,e.namespaceURI,!o&&n?[n]:i?null:e.firstChild?se.call(e.childNodes):null,r,!o&&n?n:i?i.__e:e.firstChild,o,a),it(r,t,a)}se=tt.slice,w={__e:function(t,e,n,o){for(var i,r,a;e=e.__;)if((i=e.__c)&&!i.__)try{if((r=i.constructor)&&r.getDerivedStateFromError!=null&&(i.setState(r.getDerivedStateFromError(t)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,o||{}),a=i.__d),a)return i.__E=i}catch(l){t=l}throw t}},Xe=0,G.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=B({},this.state),typeof t=="function"&&(t=t(B({},n),this.props)),t&&B(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),Ie(this))},G.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Ie(this))},G.prototype.render=Z,q=[],Qe=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ze=function(t,e){return t.__v.__b-e.__v.__b},ae.__r=0,et=/(PointerCapture)$|Capture$/i,we=0,he=Pe(!1),pe=Pe(!0);const lt=Object.freeze(Object.defineProperty({__proto__:null,Component:G,Fragment:Z,createElement:ge,h:ge,get options(){return w},render:Lt},Symbol.toStringTag,{value:"Module"}));var ct,ve,dt,Tt=[];function Nt(t,e,n){var o,i,r,a={};for(r in e)r=="key"?o=e[r]:r=="ref"?i=e[r]:a[r]=e[r];if(arguments.length>2&&(a.children=arguments.length>3?ct.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(r in t.defaultProps)a[r]===void 0&&(a[r]=t.defaultProps[r]);return It(t,a,o,i,null)}function It(t,e,n,o,i){var r={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i==null?++dt:i,__i:-1,__u:0};return ve.vnode!=null&&ve.vnode(r),r}ct=Tt.slice,ve={__e:function(t,e,n,o){for(var i,r,a;e=e.__;)if((i=e.__c)&&!i.__)try{if((r=i.constructor)&&r.getDerivedStateFromError!=null&&(i.setState(r.getDerivedStateFromError(t)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,o||{}),a=i.__d),a)return i.__E=i}catch(l){t=l}throw t}},dt=0,typeof Promise=="function"&&Promise.prototype.then.bind(Promise.resolve());var ut=function(t,e,n,o){var i;e[0]=0;for(var r=1;r<e.length;r++){var a=e[r++],l=e[r]?(e[0]|=a?1:2,n[e[r++]]):e[++r];a===3?o[0]=l:a===4?o[1]=Object.assign(o[1]||{},l):a===5?(o[1]=o[1]||{})[e[++r]]=l:a===6?o[1][e[++r]]+=l+"":a?(i=t.apply(l,ut(t,l,n,["",null])),o.push(i),l[0]?e[0]|=2:(e[r-2]=0,e[r]=i)):o.push(l)}return o},Ae=new Map;function Mt(t){var e=Ae.get(this);return e||(e=new Map,Ae.set(this,e)),(e=ut(this,e.get(t)||(e.set(t,e=function(n){for(var o,i,r=1,a="",l="",d=[0],c=function(_){r===1&&(_||(a=a.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?d.push(0,_,a):r===3&&(_||a)?(d.push(3,_,a),r=2):r===2&&a==="..."&&_?d.push(4,_,0):r===2&&a&&!_?d.push(5,0,!0,a):r>=5&&((a||!_&&r===5)&&(d.push(r,0,a,i),r=6),_&&(d.push(r,_,0,i),r=6)),a=""},u=0;u<n.length;u++){u&&(r===1&&c(),c(u));for(var s=0;s<n[u].length;s++)o=n[u][s],r===1?o==="<"?(c(),d=[d],r=3):a+=o:r===4?a==="--"&&o===">"?(r=1,a=""):a=o+a[0]:l?o===l?l="":a+=o:o==='"'||o==="'"?l=o:o===">"?(c(),r=1):r&&(o==="="?(r=5,i=a,a=""):o==="/"&&(r<5||n[u][s+1]===">")?(c(),r===3&&(d=d[0]),r=d,(d=d[0]).push(2,0,r),r=0):o===" "||o==="	"||o==="\n"||o==="\r"?(c(),r=2):a+=o),r===3&&a==="!--"&&(r=4,d=d[0])}return c(),d}(t)),e),arguments,[])).length>1?e:e[0]}const Y=Mt.bind(Nt);var X,C,fe,Oe,Q=0,mt=[],S=w,Re=S.__b,He=S.__r,Ve=S.diffed,Be=S.__c,je=S.unmount,Ue=S.__;function Ce(t,e){S.__h&&S.__h(C,t,Q||e),Q=0;var n=C.__H||(C.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function re(t){return Q=1,Pt(ht,t)}function Pt(t,e,n){var o=Ce(X++,2);if(o.t=t,!o.__c&&(o.__=[ht(void 0,e),function(l){var d=o.__N?o.__N[0]:o.__[0],c=o.t(d,l);d!==c&&(o.__N=[c,o.__[1]],o.__c.setState({}))}],o.__c=C,!C.__f)){var i=function(l,d,c){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(_){return!!_.__c});if(u.every(function(_){return!_.__N}))return!r||r.call(this,l,d,c);var s=o.__c.props!==l;return u.forEach(function(_){if(_.__N){var m=_.__[0];_.__=_.__N,_.__N=void 0,m!==_.__[0]&&(s=!0)}}),r&&r.call(this,l,d,c)||s};C.__f=!0;var r=C.shouldComponentUpdate,a=C.componentWillUpdate;C.componentWillUpdate=function(l,d,c){if(this.__e){var u=r;r=void 0,i(l,d,c),r=u}a&&a.call(this,l,d,c)},C.shouldComponentUpdate=i}return o.__N||o.__}function Yt(t,e){var n=Ce(X++,3);!S.__s&&ft(n.__H,e)&&(n.__=t,n.u=e,C.__H.__h.push(n))}function Kt(t){return Q=5,_t(function(){return{current:t}},[])}function _t(t,e){var n=Ce(X++,7);return ft(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function Gt(t,e){return Q=8,_t(function(){return t},e)}function At(){for(var t;t=mt.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(ie),t.__H.__h.forEach(ye),t.__H.__h=[]}catch(e){t.__H.__h=[],S.__e(e,t.__v)}}S.__b=function(t){C=null,Re&&Re(t)},S.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Ue&&Ue(t,e)},S.__r=function(t){He&&He(t),X=0;var e=(C=t.__c).__H;e&&(fe===C?(e.__h=[],C.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(ie),e.__h.forEach(ye),e.__h=[],X=0)),fe=C},S.diffed=function(t){Ve&&Ve(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(mt.push(e)!==1&&Oe===S.requestAnimationFrame||((Oe=S.requestAnimationFrame)||Ot)(At)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),fe=C=null},S.__c=function(t,e){e.some(function(n){try{n.__h.forEach(ie),n.__h=n.__h.filter(function(o){return!o.__||ye(o)})}catch(o){e.some(function(i){i.__h&&(i.__h=[])}),e=[],S.__e(o,n.__v)}}),Be&&Be(t,e)},S.unmount=function(t){je&&je(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{ie(o)}catch(i){e=i}}),n.__H=void 0,e&&S.__e(e,n.__v))};var We=typeof requestAnimationFrame=="function";function Ot(t){var e,n=function(){clearTimeout(o),We&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);We&&(e=requestAnimationFrame(n))}function ie(t){var e=C,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),C=e}function ye(t){var e=C;t.__c=t.__(),C=e}function ft(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function ht(t,e){return typeof e=="function"?e(t):e}async function pt(){try{const t=await fetch("/api/system");if(!t.ok)throw new Error("Failed to load system information");return(await t.json()).version||""}catch(t){return console.error("Error loading system version:",t),""}}var Fe,ze,qe;function Rt({activeNav:t="",version:e=""}){const[n,o]=re(""),[i,r]=re(!1);re(()=>{const u=localStorage.getItem("auth");if(u)try{const _=atob(u).split(":")[0];o(_)}catch(s){console.error("Error decoding auth token:",s),o("User")}else o("User")});const a=u=>{u.preventDefault(),localStorage.removeItem("auth"),fetch("/api/auth/logout",{method:"POST"}).then(()=>{window.location.href="login.html?logout=true"}).catch(()=>{window.location.href="login.html?logout=true"})},l=()=>{r(!i)},d=[{id:"nav-live",href:"index.html",label:"Live View"},{id:"nav-recordings",href:"recordings.html",label:"Recordings"},{id:"nav-streams",href:"streams.html",label:"Streams"},{id:"nav-settings",href:"settings.html",label:"Settings"},{id:"nav-users",href:"users.html",label:"Users"},{id:"nav-system",href:"system.html",label:"System"}],c=u=>{const s=t===u.id,_="text-white no-underline rounded transition-colors",m="px-3 py-2",f="block w-full px-4 py-3 text-left",h=s?"bg-blue-600":"hover:bg-blue-700";return Y(Fe||(Fe=j(["\n      <li class=",'>\n        <a\n          href="','"\n          id=',"\n          class=","\n          onClick=","\n        >\n          ","\n        </a>\n      </li>\n    "])),i?"w-full":"mx-1",u.href,u.id,"".concat(_," ").concat(i?f:m," ").concat(h),i?l:null,u.label)};return Y(qe||(qe=j(['\n    <header class="bg-gray-800 text-white py-2 shadow-md mb-4 w-full">\n      <div class="container mx-auto px-4 flex justify-between items-center">\n        <div class="logo flex items-center">\n          <h1 class="text-xl font-bold m-0">LightNVR</h1>\n          <span class="version text-blue-200 text-xs ml-2">v','</span>\n        </div>\n\n        <!-- Desktop Navigation -->\n        <nav class="hidden md:block">\n          <ul class="flex list-none m-0 p-0">\n            ','\n          </ul>\n        </nav>\n\n        <!-- User Menu (Desktop) -->\n        <div class="user-menu hidden md:flex items-center">\n          <span class="mr-2">','</span>\n          <a href="#" onClick=',' class="text-white no-underline hover:bg-blue-700 px-3 py-1 rounded transition-colors">Logout</a>\n        </div>\n\n        <!-- Mobile Menu Button -->\n        <button\n          class="md:hidden text-white p-2 focus:outline-none"\n          onClick=','\n          aria-label="Toggle menu"\n        >\n          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d='," />\n          </svg>\n        </button>\n      </div>\n\n      <!-- Mobile Navigation -->\n      ","\n    </header>\n  "])),e,d.map(c),n,a,l,i?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16",i?Y(ze||(ze=j(['\n        <div class="md:hidden mt-2 border-t border-gray-700 pt-2 container mx-auto px-4">\n          <ul class="list-none m-0 p-0 flex flex-col w-full">\n            ','\n            <li class="w-full mt-2 pt-2 border-t border-gray-700">\n              <div class="flex justify-between items-center px-4 py-2">\n                <span>','</span>\n                <a href="#" onClick=',' class="text-white no-underline hover:bg-blue-700 px-3 py-1 rounded transition-colors">Logout</a>\n              </div>\n            </li>\n          </ul>\n        </div>\n      '])),d.map(c),n,a):null)}var Ye;function Ht(t=""){const e=document.getElementById("header-container");e&&pt().then(n=>{N(async()=>{const{render:o}=await Promise.resolve().then(()=>lt);return{render:o}},void 0,import.meta.url).then(({render:o})=>{o(Y(Ye||(Ye=j(["<"," activeNav="," version="," />"])),Rt,t,n),e)})})}var Ke;function Vt({version:t=""}){const[e]=re(new Date().getFullYear());return Y(Ke||(Ke=j(['\n    <footer class="bg-gray-800 text-white py-4 px-4 mt-4 shadow-inner">\n      <div class="container mx-auto flex flex-col sm:flex-row justify-between items-center">\n        <div class="text-center sm:text-left mb-2 sm:mb-0">\n          <p class="text-sm">© ',' LightNVR</p>\n          <p class="text-xs text-gray-400 mt-1 hidden sm:block">Lightweight Network Video Recorder</p>\n        </div>\n        <div class="flex flex-col sm:flex-row items-center">\n          <span class="text-sm mb-2 sm:mb-0 sm:mr-4">Version ','</span>\n          <div class="flex space-x-4">\n            <a href="https://github.com/opensensor/lightnvr" class="text-blue-300 hover:text-blue-100 text-sm" target="_blank" rel="noopener noreferrer">GitHub</a>\n          </div>\n        </div>\n      </div>\n    </footer>\n  '])),e,t)}var Ge;function Bt(){const t=document.getElementById("footer-container");t&&pt().then(e=>{N(async()=>{const{render:n}=await Promise.resolve().then(()=>lt);return{render:n}},void 0,import.meta.url).then(({render:n})=>{n(Y(Ge||(Ge=j(["<"," version="," />"])),Vt,e),t)})})}function jt(){let t=document.getElementById("snapshot-modal-container");t||(t=document.createElement("div"),t.id="snapshot-modal-container",document.body.appendChild(t));const e=document.createElement("div");e.id="snapshot-preview-modal",e.className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden",e.innerHTML='\n    <div class="modal-content bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl max-h-[90vh] flex flex-col transform transition-all duration-300 ease-out scale-95 opacity-0" style="width: 90%;">\n      <div class="flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700">\n        <h3 id="snapshot-preview-title" class="text-lg font-semibold text-gray-900 dark:text-white">Snapshot</h3>\n        <button class="close text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">✕</button>\n      </div>\n      <div class="p-4 overflow-auto flex-grow">\n        <img id="snapshot-preview-image" class="max-w-full max-h-[70vh] mx-auto" src="" alt="Snapshot">\n      </div>\n      <div class="p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-2">\n        <button id="snapshot-download-btn" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors">Download</button>\n        <button id="snapshot-close-btn" class="px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition-colors dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600">Close</button>\n      </div>\n    </div>\n  ',t.appendChild(e);let n=document.getElementById("video-modal-container");n||(n=document.createElement("div"),n.id="video-modal-container",document.body.appendChild(n));const o=document.createElement("div");o.id="video-preview-modal",o.className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden",o.innerHTML='\n    <div class="modal-content bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl max-h-[90vh] flex flex-col transform transition-all duration-300 ease-out scale-95 opacity-0 w-full md:w-[90%]">\n      <div class="flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700">\n        <h3 id="video-preview-title" class="text-lg font-semibold text-gray-900 dark:text-white">Video</h3>\n        <button class="close text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">✕</button>\n      </div>\n      <div class="p-4 flex-grow">\n        <video id="video-preview-player" class="w-full h-auto max-w-full object-contain mx-auto" controls autoplay></video>\n      </div>\n      <div class="p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-2">\n        <a id="video-download-btn" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors" href="#" download>Download</a>\n        <button id="video-close-btn" class="px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition-colors dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600">Close</button>\n      </div>\n    </div>\n  ',n.appendChild(o),document.addEventListener("keydown",i=>{i.key==="Escape"&&document.querySelectorAll(".fixed.inset-0.bg-black.bg-opacity-75").forEach(a=>{a.classList.contains("hidden")||a.classList.add("hidden")})})}function Ut(){N(async()=>{const{initToastContainer:t}=await import("./toast-Do6XSKgM.js");return{initToastContainer:t}},[],import.meta.url).then(({initToastContainer:t})=>{t(!1)}).catch(t=>{if(console.error("Error loading toast module:",t),document.getElementById("status-message-styles"))return;const e=document.createElement("style");e.id="status-message-styles",e.textContent="\n      #status-message-container {\n        position: fixed;\n        top: 1rem;\n        left: 50%;\n        transform: translateX(-50%);\n        z-index: 50;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n      }\n      \n      .status-message {\n        background-color: #1f2937;\n        color: white;\n        padding: 0.5rem 1rem;\n        border-radius: 0.375rem;\n        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n        margin-bottom: 0.5rem;\n        transition: all 0.3s ease;\n        opacity: 0;\n        transform: translateY(-0.5rem);\n      }\n      \n      .status-message.show {\n        opacity: 1;\n        transform: translateY(0);\n      }\n      \n      .status-message.success {\n        background-color: #10b981;\n      }\n      \n      .status-message.error {\n        background-color: #ef4444;\n      }\n      \n      .status-message.warning {\n        background-color: #f59e0b;\n      }\n      \n      .status-message.info {\n        background-color: #3b82f6;\n      }\n    ",document.head.appendChild(e)})}function Wt(){if(document.getElementById("modal-styles"))return;const t=document.createElement("style");t.id="modal-styles",t.textContent="\n    .modal-content {\n      transition: all 0.3s ease-out;\n    }\n    \n    .modal-content.scale-95 {\n      transform: scale(0.95);\n      opacity: 0;\n    }\n    \n    .modal-content.scale-100 {\n      transform: scale(1);\n      opacity: 1;\n    }\n  ",document.head.appendChild(t)}var Je;function Jt(t){const{isOpen:e,onClose:n,onConfirm:o,mode:i,count:r}=t;if(!e)return null;let a="Confirm Delete",l="Are you sure you want to delete this item?";i==="selected"?(a="Delete Selected Recordings",l="Are you sure you want to delete ".concat(r," selected recording").concat(r!==1?"s":"","?")):i==="all"&&(a="Delete All Filtered Recordings",l="Are you sure you want to delete all recordings matching the current filters? This action cannot be undone.");const d=u=>{u.key==="Escape"&&n()},c=u=>{u.target===u.currentTarget&&n()};return Y(Je||(Je=j(['\n    <div \n      class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"\n      onClick=',"\n      onKeyDown=",'\n    >\n      <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 max-w-md mx-auto">\n        <div class="mb-4">\n          <h3 class="text-lg font-semibold text-gray-900 dark:text-white">','</h3>\n        </div>\n        \n        <p class="text-gray-600 dark:text-gray-300 mb-6">','</p>\n        \n        <div class="flex justify-end space-x-3">\n          <button \n            class="px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition-colors dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600"\n            onClick=','\n          >\n            Cancel\n          </button>\n          <button \n            class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors"\n            onClick=',"\n          >\n            Delete\n          </button>\n        </div>\n      </div>\n    </div>\n  "])),c,d,a,l,n,o)}function Xt(t,e,n){const o=document.createElement("div");o.className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",o.id="video-modal-overlay";const i=document.createElement("div");i.className="bg-gray-50 dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl flex flex-col w-full md:w-[90%]";const r=document.createElement("div");r.className="flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700";const a=document.createElement("h3");a.className="text-lg font-semibold text-gray-900 dark:text-white",a.textContent=e||"Video";const l=document.createElement("button");l.className="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",l.innerHTML="✕",l.addEventListener("click",()=>{document.body.removeChild(o)}),r.appendChild(a),r.appendChild(l);const d=document.createElement("div");d.className="p-4";const c=document.createElement("video");c.src=t,c.className="w-full h-auto max-w-full object-contain mx-auto",c.controls=!0,c.autoplay=!0,d.appendChild(c);const u=document.createElement("div");u.id="recordings-controls",u.className="mx-4 mb-4 p-4 border border-green-500 rounded-lg bg-white dark:bg-gray-700 shadow-md relative z-10";const s=document.createElement("h3");s.className="text-lg font-bold text-center mb-4 text-gray-800 dark:text-white",s.textContent="PLAYBACK CONTROLS",u.appendChild(s);const _=document.createElement("div");_.className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-2";const m=document.createElement("div");m.className="border-b pb-4 md:border-b-0 md:border-r md:pr-4 md:pb-0";const f=document.createElement("h4");f.className="font-bold text-center mb-3 text-gray-700 dark:text-gray-300",f.textContent="Playback Speed",m.appendChild(f);const h=document.createElement("div");h.className="flex flex-wrap justify-center gap-2",[.25,.5,1,1.5,2,4].forEach(v=>{const y=document.createElement("button");y.textContent=v===1?"1× (Normal)":"".concat(v,"×"),y.className=v===1?"speed-btn px-3 py-2 rounded-full bg-green-500 text-white text-sm font-medium transition-all focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50":"speed-btn px-3 py-2 rounded-full bg-gray-200 hover:bg-gray-300 text-sm font-medium transition-all focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50",y.setAttribute("data-speed",v),y.addEventListener("click",()=>{c.playbackRate=v,h.querySelectorAll(".speed-btn").forEach(D=>{D.getAttribute("data-speed")===v.toString()?(D.classList.remove("bg-gray-200","hover:bg-gray-300"),D.classList.add("bg-green-500","text-white")):(D.classList.remove("bg-green-500","text-white"),D.classList.add("bg-gray-200","hover:bg-gray-300"))}),p.textContent="Current Speed: ".concat(v,"× ").concat(v===1?"(Normal)":"")}),h.appendChild(y)}),m.appendChild(h);const p=document.createElement("div");p.id="current-speed-indicator",p.className="mt-3 text-center font-medium text-green-600 dark:text-green-400 text-sm",p.textContent="Current Speed: 1× (Normal)",m.appendChild(p),_.appendChild(m);const g=document.createElement("div");g.className="pt-4 md:pt-0 md:pl-4";const I=document.createElement("h4");I.className="font-bold text-center mb-2 text-gray-700 dark:text-gray-300",I.textContent="Detection Overlays",g.appendChild(I);const x=document.createElement("div");x.className="flex flex-col items-center gap-2";const T=document.createElement("div");T.className="flex items-center gap-2 mb-2";const L=document.createElement("input");L.type="checkbox",L.id="detection-overlay-checkbox",L.className="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600";const R=document.createElement("label");R.htmlFor="detection-overlay-checkbox",R.className="text-sm font-medium text-gray-700 dark:text-gray-300",R.textContent="Show Detection Overlays",T.appendChild(L),T.appendChild(R),x.appendChild(T);const A=document.createElement("div");A.className="flex flex-col w-full mt-2 mb-2";const O=document.createElement("label");O.htmlFor="detection-sensitivity-slider",O.className="text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",O.textContent="Detection Sensitivity";const H=document.createElement("div");H.id="detection-sensitivity-value",H.className="text-xs text-gray-600 dark:text-gray-400 text-center mb-1",H.textContent="Time Window: 2 seconds";const k=document.createElement("input");k.type="range",k.id="detection-sensitivity-slider",k.className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700",k.min="1",k.max="10",k.step="1",k.value="2",A.appendChild(O),A.appendChild(k),A.appendChild(H),k.addEventListener("input",()=>{ee=parseInt(k.value),H.textContent="Time Window: ".concat(ee," second").concat(ee!==1?"s":""),W&&F()}),x.appendChild(A);const E=document.createElement("div");if(E.id="detection-status-indicator",E.className="text-center text-sm text-gray-600 dark:text-gray-400",E.textContent="No detections loaded",x.appendChild(E),g.appendChild(x),_.appendChild(g),u.appendChild(_),n){const v=document.createElement("div");v.className="flex justify-center mt-4 pt-2 border-t border-gray-200 dark:border-gray-700";const y=document.createElement("a");y.className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors flex items-center text-sm",y.innerHTML='\n      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />\n      </svg>\n      Download Video\n    ',y.href=n,y.download="video-".concat(Date.now(),".mp4"),v.appendChild(y),u.appendChild(v)}const Ee=document.createElement("div");Ee.className="p-2";const U=document.createElement("div");U.className="relative",U.style.position="relative",U.style.width="100%",U.style.height="100%";const $=document.createElement("canvas");$.id="detection-overlay-canvas",$.className="absolute top-0 left-0 w-full h-full pointer-events-none",$.style.position="absolute",$.style.top="0",$.style.left="0",$.style.width="100%",$.style.height="100%",$.style.pointerEvents="none",$.style.display="none",U.appendChild(c),U.appendChild($),d.appendChild(U);let M=null,P=[],W=!1,ee=parseInt(k.value);const de=t.match(/\/play\/(\d+)/);if(de&&de[1]){const v=parseInt(de[1],10);fetch("/api/recordings/".concat(v)).then(y=>y.json()).then(y=>{if(M=y,M&&M.stream&&M.start_time&&M.end_time){const D=Math.floor(new Date(M.start_time).getTime()/1e3),ue=Math.floor(new Date(M.end_time).getTime()/1e3),$e=new URLSearchParams({start:D,end:ue});return fetch("/api/detection/results/".concat(M.stream,"?").concat($e.toString()))}throw new Error("Recording data incomplete")}).then(y=>y.json()).then(y=>{P=y.detections||[],P.length>0?(E.textContent="".concat(P.length," detection").concat(P.length!==1?"s":""," available"),E.className="text-center text-sm font-medium text-green-600 dark:text-green-400",L.disabled=!1):(E.textContent="No detections found for this recording",L.disabled=!0)}).catch(y=>{console.error("Error fetching detection data:",y),E.textContent="Error loading detections",E.className="text-center text-sm font-medium text-red-600 dark:text-red-400",L.disabled=!0})}L.addEventListener("change",()=>{W=L.checked,W?($.style.display="block",F(),E.textContent="Showing ".concat(P.length," detection").concat(P.length!==1?"s":"")):($.style.display="none",E.textContent="".concat(P.length," detection").concat(P.length!==1?"s":""," available"))});function F(){if(!W||!c||!$||P.length===0)return;const v=c.videoWidth,y=c.videoHeight;if(v===0||y===0){requestAnimationFrame(F);return}$.width=v,$.height=y;const D=$.getContext("2d");D.clearRect(0,0,$.width,$.height);const ue=c.currentTime;if(!M||!M.start_time)return;const gt=Math.floor(new Date(M.start_time).getTime()/1e3)+Math.floor(ue),te=P.filter(V=>V.timestamp?Math.abs(V.timestamp-gt)<=ee:!1);E&&(te.length>0?E.textContent="Showing ".concat(te.length," detection").concat(te.length!==1?"s":""," at current time"):E.textContent="No detections at current time (".concat(P.length," total)")),te.forEach(V=>{const me=V.x*v,_e=V.y*y,vt=V.width*v,yt=V.height*y;D.strokeStyle="rgba(0, 255, 0, 0.8)",D.lineWidth=2,D.strokeRect(me,_e,vt,yt),D.fillStyle="rgba(0, 0, 0, 0.7)";const De="".concat(V.label," (").concat(Math.round(V.confidence*100),"%)"),wt=D.measureText(De).width+10;D.fillRect(me,_e-20,wt,20),D.fillStyle="white",D.font="12px Arial",D.fillText(De,me+5,_e-5)}),!c.paused&&!c.ended&&requestAnimationFrame(F)}c.addEventListener("play",()=>{W&&F()}),c.addEventListener("seeked",()=>{W&&F()}),c.addEventListener("timeupdate",()=>{if(W){const v=Math.floor(c.currentTime*2)/2;c.lastDrawnTime!==v&&(c.lastDrawnTime=v,F())}}),i.appendChild(r),i.appendChild(d),i.appendChild(u),i.appendChild(Ee),o.appendChild(i),document.body.appendChild(o);const Se=v=>{v.key==="Escape"&&(document.body.contains(o)&&document.body.removeChild(o),document.removeEventListener("keydown",Se))};document.addEventListener("keydown",Se),o.addEventListener("click",v=>{v.target===o&&document.body.removeChild(o)})}function z(t,e="info",n=4e3){if(console.log("Showing status message: ".concat(t," (").concat(e,")")),window.showToast){window.showToast(t,e,n);return}N(async()=>{const{showStatusMessage:o}=await import("./toast-Do6XSKgM.js");return{showStatusMessage:o}},[],import.meta.url).then(({showStatusMessage:o})=>{o(t,e,n)}).catch(o=>{console.error("Error loading toast module:",o);let i=document.getElementById("status-message-container");i||(i=document.createElement("div"),i.id="status-message-container",i.className="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 flex flex-col items-center",document.body.appendChild(i));const r=document.createElement("div");let a="bg-blue-500";e==="success"?a="bg-green-500":e==="error"?a="bg-red-500":e==="warning"&&(a="bg-yellow-500"),r.className="".concat(a," text-white px-4 py-2 rounded-lg shadow-lg mb-2 transition-all duration-300 opacity-0 transform translate-y-2"),r.textContent=t,i.appendChild(r),setTimeout(()=>{r.classList.remove("opacity-0","translate-y-2")},10),setTimeout(()=>{r.classList.add("opacity-0","translate-y-2"),setTimeout(()=>{r.parentNode===i&&i.removeChild(r),i.children.length===0&&i.parentNode===document.body&&document.body.removeChild(i)},300)},n)})}function Qt(t,e){const n=document.getElementById("snapshot-preview-modal");if(!n){console.error("Snapshot modal not found. Make sure setupModals() has been called.");return}const o=document.getElementById("snapshot-preview-title"),i=document.getElementById("snapshot-preview-image"),r=document.getElementById("snapshot-download-btn"),a=document.getElementById("snapshot-close-btn"),l=n.querySelectorAll(".close"),d=n.querySelector(".modal-content");o&&(o.textContent="Snapshot: ".concat(e)),n.dataset.imageData=t,n.dataset.streamName=e,i&&(i.src=t,i.style.display="block",i.onload=()=>{console.log("Snapshot image loaded successfully")},i.onerror=u=>{console.error("Error loading snapshot image:",u)});function c(){n.classList.add("hidden"),d&&(d.classList.remove("scale-100"),d.classList.add("scale-95"))}a&&(a.onclick=c),l.forEach(u=>{u.onclick=c}),n.onclick=function(u){u.target===n&&c()},document.addEventListener("keydown",function(u){u.key==="Escape"&&!n.classList.contains("hidden")&&c()}),r&&(r.onclick=function(){const u=n.dataset.imageData,s=n.dataset.streamName||e;if(!u){console.error("No image data available for download"),z("Download failed: No image data available",5e3);return}console.log("Downloading snapshot with data URL length:",u.length);try{console.log("Using iframe download method");const m=document.createElement("canvas"),f=new Image;f.onload=function(){try{console.log("Image loaded for optimization, original dimensions:",f.width,"x",f.height);const h=f.width,b=f.height;console.log("Using original image dimensions for maximum quality:",h,"x",b),m.width=h,m.height=b;const p=m.getContext("2d");p.fillStyle="black",p.fillRect(0,0,m.width,m.height),p.drawImage(f,0,0,h,b);const g=m.toDataURL("image/jpeg",1);console.log("Optimized JPEG data URL length:",g.length);const I="snapshot_".concat(s,"_").concat(new Date().toISOString().replace(/[:.]/g,"-"),".jpg"),x=document.createElement("iframe");x.style.display="none",document.body.appendChild(x);try{const T=x.contentWindow.document;T.open(),T.write("\n                <!DOCTYPE html>\n                <html>\n                <head>\n                  <title>Downloading...</title>\n                  <script>\n                    function startDownload() {\n                      const a = document.getElementById('download-link');\n                      a.click();\n                      setTimeout(function() {\n                        window.parent.postMessage('download-complete', '*');\n                      }, 1000);\n                    }\n                  <\/script>\n                </head>\n                <body onload=\"startDownload()\">\n                  <a id=\"download-link\" href=\"".concat(g,'" download="').concat(I,'">Download</a>\n                </body>\n                </html>\n              ')),T.close(),window.addEventListener("message",function L(R){R.data==="download-complete"&&(window.removeEventListener("message",L),document.body.removeChild(x),z("Snapshot downloaded successfully",3e3))},{once:!0}),setTimeout(()=>{document.body.contains(x)&&document.body.removeChild(x)},5e3)}catch(T){console.error("Iframe download method failed:",T),document.body.removeChild(x),_(g,I)}}catch(h){console.error("Canvas processing error:",h),z("Download failed: Error processing image",5e3),_(u,"snapshot_".concat(s,"_").concat(new Date().toISOString().replace(/[:.]/g,"-"),".jpg"))}},f.onerror=function(h){console.error("Error loading image for optimization:",h),z("Download failed: Could not load image",5e3),_(u,"snapshot_".concat(s,"_").concat(new Date().toISOString().replace(/[:.]/g,"-"),".jpg"))},f.src=u}catch(m){console.error("Error in snapshot download process:",m),z("Download failed: "+m.message,5e3),_(u,"snapshot_".concat(s,"_").concat(new Date().toISOString().replace(/[:.]/g,"-"),".jpg"))}function _(m,f){console.log("Attempting direct link download");try{const h=document.createElement("a");h.href=m,h.download=f,h.target="_blank",h.rel="noopener noreferrer",document.body.appendChild(h),h.click(),setTimeout(()=>{document.body.removeChild(h)},100),z("Download initiated",3e3)}catch(h){console.error("Direct link download failed:",h),z("Download failed: Browser restrictions",5e3)}}}),n.classList.remove("hidden"),d&&setTimeout(()=>{d.classList.remove("scale-95","opacity-0"),d.classList.add("scale-100","opacity-100")},10)}if(typeof WebSocketClient<"u"){if(window.wsClient=new WebSocketClient,console.log("WebSocket client initialized at application level"),window.wsClient){console.log("Initial WebSocket connection state:",{connected:window.wsClient.isConnected(),clientId:window.wsClient.getClientId()});const t=window.wsClient.connect;window.wsClient.connect=function(){const n=t.apply(this,arguments);if(this.socket){const o=this.socket.onopen;this.socket.onopen=l=>{console.log("WebSocket connection opened at application level"),o&&o.call(this,l)};const i=this.socket.onerror;this.socket.onerror=l=>{console.error("WebSocket error at application level:",l),i&&i.call(this,l)};const r=this.socket.onclose;this.socket.onclose=l=>{console.log("WebSocket connection closed at application level: ".concat(l.code," ").concat(l.reason)),r&&r.call(this,l)};const a=this.socket.onmessage;this.socket.onmessage=l=>{l.data.includes('"type":"welcome"')||console.log("WebSocket message received at application level"),a&&a.call(this,l)}}return n};const e=window.wsClient.handleMessage;window.wsClient.handleMessage=function(n){const o=this.clientId;e.call(this,n);const i=this.clientId;o!==i&&i&&console.log("WebSocket client ID changed at application level: ".concat(i))}}typeof BatchDeleteRecordingsClient<"u"&&(window.batchDeleteClient=new BatchDeleteRecordingsClient(window.wsClient),console.log("Batch delete client initialized"))}function ce(t={}){let e={...t};const n=new Set;return{getState:()=>e,setState:o=>{typeof o=="function"?e=o(e):e={...e,...o},n.forEach(i=>i(e))},subscribe:o=>(n.add(o),()=>{n.delete(o)})}}ce({message:"",visible:!1,timeout:null,type:"success"});ce({imageUrl:"",title:""});ce({videoUrl:"",title:"",downloadUrl:""});const Ft=ce({client:window.wsClient||null,connected:window.wsClient?window.wsClient.isConnected():!1,clientId:window.wsClient?window.wsClient.getClientId():null});window.wsClient&&setInterval(()=>{if(window.wsClient){const t=window.wsClient.isConnected(),e=window.wsClient.getClientId();Ft.setState({connected:t,clientId:e}),!t&&!window.wsClient.connecting&&window.wsClient.reconnectAttempts<window.wsClient.maxReconnectAttempts&&(console.log("WebSocket not connected, attempting to reconnect from application level"),window.wsClient.connect())}},5e3);function zt(){const t=window.location.pathname.split("/").pop();let e="";switch(t){case"index.html":e="nav-live";break;case"recordings.html":case"timeline.html":e="nav-recordings";break;case"streams.html":e="nav-streams";break;case"settings.html":e="nav-settings";break;case"users.html":e="nav-users";break;case"system.html":e="nav-system";break}Ht(e),Bt(),t==="index.html"?N(()=>import("./WebRTCView-BZz9JyjZ.js"),__vite__mapDeps([0,1]),import.meta.url).then(n=>{n.loadWebRTCView()}):t==="hls.html"?N(()=>import("./LiveView-ByePH35Z.js"),__vite__mapDeps([2,3,1]),import.meta.url).then(n=>{n.loadLiveView()}):t==="recordings.html"?N(()=>import("./RecordingsView-3hg_3JsB.js"),__vite__mapDeps([4,3,5]),import.meta.url).then(n=>{n.loadRecordingsView()}):t==="timeline.html"?N(()=>import("./TimelineView-HjGzbyL2.js"),__vite__mapDeps([6,3]),import.meta.url).then(n=>{n.loadTimelineView()}):t==="settings.html"?N(()=>import("./SettingsView-BjMzynwJ.js"),__vite__mapDeps([7,3,5]),import.meta.url).then(n=>{n.loadSettingsView()}):t==="streams.html"?N(()=>import("./StreamsView-DSDWAkXP.js"),__vite__mapDeps([8,3,5]),import.meta.url).then(n=>{n.loadStreamsView()}):t==="system.html"?N(()=>import("./SystemView-CvuOn3kw.js"),__vite__mapDeps([9,3,5]),import.meta.url).then(n=>{n.loadSystemView()}):t==="login.html"?N(()=>import("./LoginView-DgdZNQOT.js"),__vite__mapDeps([10,5]),import.meta.url).then(n=>{n.loadLoginView()}):t==="users.html"?N(()=>import("./UsersView-Bs-wP9LA.js"),__vite__mapDeps([11,5]),import.meta.url).then(n=>{n.loadUsersView()}):t===""&&N(()=>import("./WebRTCView-BZz9JyjZ.js"),__vite__mapDeps([0,1]),import.meta.url).then(n=>{n.loadWebRTCView()}),jt(),Ut(),Wt(),N(async()=>{const{initToastContainer:n}=await import("./toast-Do6XSKgM.js");return{initToastContainer:n}},[],import.meta.url).then(({initToastContainer:n})=>{n(!1),console.log("Toast container initialized from preact-app.js"),window.testToastFromApp=(o="info")=>{const i="App test ".concat(o," toast at ").concat(new Date().toLocaleTimeString());return window.showToast&&window.showToast(i,o),"App toast triggered"}}).catch(n=>{console.error("Error initializing toast container:",n)})}document.addEventListener("DOMContentLoaded",zt);export{Kt as A,Jt as D,N as _,Ut as a,Wt as b,z as c,re as d,Qt as e,Xt as f,Lt as g,Y as h,lt as p,Gt as q,jt as s,Yt as y};
//# sourceMappingURL=preact-app-FWUGqQo_.js.map
