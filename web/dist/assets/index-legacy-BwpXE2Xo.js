System.register(["./query-client-legacy-BljCN6fF.js","./layout-legacy-BJPDh9kM.js","./LiveView-legacy-DHrW1Ba3.js","./UI-legacy-BRvu-Wy1.js","./LoadingIndicator-legacy-D9Q5iI8j.js","./Footer-legacy-_27R7tN7.js"],(function(e,t){"use strict";var r,n,o,a,c,s,l,i,d,u,g,m,h,p,f,b,y,v,x,w,C,k,S,N,$,I,R,T;return{setters:[e=>{r=e.d,n=e.A,o=e.y,a=e.u,c=e.a,s=e.b,l=e.s,i=e.q,d=e.T,u=e.E,g=e.c,m=e.e,h=e.Q,p=e.k},null,e=>{f=e.D,b=e.t,y=e.u,v=e.F,x=e.L},e=>{w=e.S,C=e.s,k=e.u,S=e.a,N=e.b,$=e.c},e=>{I=e.L},e=>{R=e.H,T=e.F}],execute:function(){function e({stream:e,streamId:t,onToggleFullscreen:c}){const[s,l]=r(!0),[i,d]=r(null),[u,g]=r(!1),[m,h]=r("unknown"),p=n(null),y=n(null),v=n(null),x=n(null),k=n(null),S=n(null),N=n(0);o((()=>{if(!e||!e.name||!p.current)return;console.log(`Initializing WebRTC connection for stream ${e.name}`),l(!0),d(null);const t=new RTCPeerConnection({iceTransports:"all",bundlePolicy:"balanced",rtcpCnameCpn:"LightNVR",rtcpCnameRtp:"LightNVR",iceCandidatePoolSize:0,iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]});v.current=t,t.ontrack=t=>{if(console.log(`Track received for stream ${e.name}`),"video"===t.track.kind){const r=p.current;if(!r)return;r.srcObject=t.streams[0],r.onloadeddata=()=>{console.log(`Video data loaded for stream ${e.name}`)},r.onplaying=()=>{console.log(`Video playing for stream ${e.name}`),l(!1),g(!0)},setTimeout((()=>{if(r&&!u){console.log(`Force-checking playback for stream ${e.name} (attempt 1)`);try{r.play().catch((t=>{console.warn(`Force play attempt 1 failed for ${e.name}:`,t)}))}catch(t){console.warn(`Error in force play attempt 1 for ${e.name}:`,t)}}}),3e3),setTimeout((()=>{if(r&&!u){console.log(`Force-checking playback for stream ${e.name} (attempt 2)`);try{v.current&&"connected"===v.current.iceConnectionState&&(console.log(`Connection is established but video not playing for ${e.name}, forcing play`),r.play().catch((t=>{console.warn(`Force play attempt 2 failed for ${e.name}:`,t)})))}catch(t){console.warn(`Error in force play attempt 2 for ${e.name}:`,t)}}else u&&console.log(`Video is now playing for stream ${e.name}`)}),8e3),r.onerror=t=>{console.error(`Video error for stream ${e.name}:`,t),d("Video playback error"),l(!1)}}},t.onicecandidate=r=>{r.candidate&&(""!==r.candidate.candidate?(console.log(`ICE candidate for stream ${e.name}`),"connected"!==t.iceConnectionState&&"completed"!==t.iceConnectionState||console.log(`Ignoring late ICE candidate for stream ${e.name} - connection already ${t.iceConnectionState}`)):console.log(`Ignoring empty ICE candidate for stream ${e.name}`))},t.oniceconnectionstatechange=()=>{console.log(`ICE connection state for stream ${e.name}: ${t.iceConnectionState}`),"failed"===t.iceConnectionState?(console.error(`WebRTC ICE connection failed for stream ${e.name}`),d("WebRTC ICE connection failed"),l(!1)):"disconnected"===t.iceConnectionState?(console.warn(`WebRTC ICE connection disconnected for stream ${e.name}, attempting to recover...`),setTimeout((()=>{!v.current||"disconnected"!==v.current.iceConnectionState&&"failed"!==v.current.iceConnectionState?v.current&&console.log(`WebRTC ICE connection recovered for stream ${e.name}, current state: ${v.current.iceConnectionState}`):(console.error(`WebRTC ICE connection could not recover for stream ${e.name}`),d("WebRTC connection lost. Please retry."),l(!1))}),5e3)):"connected"!==t.iceConnectionState&&"completed"!==t.iceConnectionState||i&&(console.log(`WebRTC connection restored for stream ${e.name}`),d(null))},t.addTransceiver("video",{direction:"recvonly"}),t.addTransceiver("audio",{direction:"recvonly"}),t.createOffer().then((e=>t.setLocalDescription(e))).then((()=>{k.current=new AbortController;const r={type:t.localDescription.type,sdp:t.localDescription.sdp},n=localStorage.getItem("auth");return fetch(`/api/webrtc?src=${encodeURIComponent(e.name)}`,{method:"POST",headers:{"Content-Type":"application/json",...n?{Authorization:"Basic "+n}:{}},body:JSON.stringify(r),signal:k.current.signal})})).then((e=>{if(!e.ok)throw new Error(`Failed to send offer: ${e.status} ${e.statusText}`);return e.text()})).then((t=>{try{return JSON.parse(t)}catch(r){throw console.error(`Error parsing JSON for stream ${e.name}:`,r),new Error("Failed to parse WebRTC answer")}})).then((e=>t.setRemoteDescription(new RTCSessionDescription(e)))).catch((t=>{console.error(`Error setting up WebRTC for stream ${e.name}:`,t),d(t.message||"Failed to establish WebRTC connection"),l(!1)}));const r=()=>{S.current&&clearInterval(S.current),S.current=setInterval((()=>{v.current&&v.current.getStats().then((t=>{let r=0,n=0,o=0,a=0;t.forEach((e=>{"inbound-rtp"===e.type&&"video"===e.kind&&(r=e.packetsLost||0,n=e.packetsReceived||0,a=e.jitter||0),"candidate-pair"===e.type&&"succeeded"===e.state&&(o=e.currentRoundTripTime||0)}));const c=n+r,s=c>0?r/c*100:0;let l="unknown";n>0&&(l=s<2&&o<.1&&a<.03?"good":s<5&&o<.3&&a<.1?"fair":s<15&&o<1?"poor":"bad"),l!==m&&(console.log(`WebRTC connection quality for stream ${e.name} changed to ${l}`),console.log(`Stats: loss=${s.toFixed(2)}%, rtt=${(1e3*o).toFixed(0)}ms, jitter=${(1e3*a).toFixed(0)}ms`),h(l),"poor"!==l&&"bad"!==l||"parking"!==e.name||(console.warn(`Poor connection quality detected for problematic stream ${e.name}, may need intervention`),v.current&&"connected"===v.current.iceConnectionState&&!u&&N.current<3&&(console.log(`Attempting to recover stream ${e.name} (attempt ${N.current+1})`),N.current++,$())))})).catch((t=>{console.warn(`Error getting WebRTC stats for stream ${e.name}:`,t)}))}),1e4)};v.current&&"connected"===v.current.iceConnectionState&&r();const n=t.oniceconnectionstatechange;return t.oniceconnectionstatechange=()=>{n&&n(),"connected"!==t.iceConnectionState&&"completed"!==t.iceConnectionState||(r(),N.current=0),"disconnected"!==t.iceConnectionState&&"failed"!==t.iceConnectionState&&"closed"!==t.iceConnectionState||S.current&&(clearInterval(S.current),S.current=null)},()=>{console.log(`Cleaning up WebRTC connection for stream ${e.name}`),S.current&&(clearInterval(S.current),S.current=null),k.current&&(k.current.abort(),k.current=null),p.current&&p.current.srcObject&&(p.current.srcObject.getTracks().forEach((e=>e.stop())),p.current.srcObject=null),v.current&&(v.current.close(),v.current=null)}}),[e]);const $=()=>{d(null),l(!0),v.current&&(v.current.close(),v.current=null),p.current&&p.current.srcObject&&(p.current.srcObject.getTracks().forEach((e=>e.stop())),p.current.srcObject=null),g(!1)};return a("div",{className:"video-cell","data-stream-name":e.name,"data-stream-id":t,ref:y,style:{position:"relative",pointerEvents:"auto",zIndex:1},children:[a("video",{id:`video-${t.replace(/\s+/g,"-")}`,className:"video-element",ref:p,playsInline:!0,autoPlay:!0,muted:!0,disablePictureInPicture:!0,style:{width:"100%",height:"100%",objectFit:"contain"}}),e.detection_based_recording&&e.detection_model&&a(f,{ref:x,streamName:e.name,videoRef:p,enabled:u,detectionModel:e.detection_model}),a("div",{className:"stream-name-overlay",style:{position:"absolute",top:"10px",left:"10px",padding:"5px 10px",backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white",borderRadius:"4px",fontSize:"14px",zIndex:3,display:"flex",alignItems:"center",gap:"8px"},children:[e.name,u&&"unknown"!==m&&a("div",{className:`connection-quality-indicator quality-${m}`,title:`Connection Quality: ${m.charAt(0).toUpperCase()+m.slice(1)}`,style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"good"===m?"#10B981":"fair"===m?"#FBBF24":"poor"===m?"#F97316":"bad"===m?"#EF4444":"#6B7280",boxShadow:"0 0 4px rgba(0, 0, 0, 0.3)"}})]}),a("div",{className:"stream-controls",style:{position:"absolute",bottom:"10px",right:"10px",display:"flex",gap:"10px",zIndex:5,backgroundColor:"rgba(0, 0, 0, 0.5)",padding:"5px",borderRadius:"4px"},children:[a("div",{style:{backgroundColor:"transparent",padding:"5px",borderRadius:"4px"},onMouseOver:e=>e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.2)",onMouseOut:e=>e.currentTarget.style.backgroundColor="transparent",children:a(w,{streamId:t,streamName:e.name,onSnapshot:()=>{if(p.current){let t=null;if(x.current&&"function"==typeof x.current.getCanvasRef&&(t=x.current.getCanvasRef()),t){const r=b(p,t,e.name);r&&C(r.canvas.toDataURL("image/jpeg",.95),`Snapshot: ${e.name}`)}else{const t=p.current,r=document.createElement("canvas");r.width=t.videoWidth,r.height=t.videoHeight,r.width>0&&r.height>0&&(r.getContext("2d").drawImage(t,0,0,r.width,r.height),C(r.toDataURL("image/jpeg",.95),`Snapshot: ${e.name}`))}}}})}),a("button",{className:"fullscreen-btn",title:"Toggle Fullscreen","data-id":t,"data-name":e.name,onClick:t=>c(e.name,t,y.current),style:{backgroundColor:"transparent",border:"none",padding:"5px",borderRadius:"4px",color:"white",cursor:"pointer"},onMouseOver:e=>e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.2)",onMouseOut:e=>e.currentTarget.style.backgroundColor="transparent",children:a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:a("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})})})]}),s&&a("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:5,pointerEvents:"none"},children:a(I,{message:"Connecting..."})}),i&&a("div",{className:"error-indicator",style:{position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.7)",color:"white",zIndex:5,textAlign:"center"},children:a("div",{className:"error-content",style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"80%",maxWidth:"300px",padding:"20px",borderRadius:"8px",backgroundColor:"rgba(0, 0, 0, 0.5)"},children:[a("div",{className:"error-icon",style:{fontSize:"28px",marginBottom:"15px",fontWeight:"bold",width:"40px",height:"40px",lineHeight:"40px",borderRadius:"50%",backgroundColor:"rgba(220, 38, 38, 0.8)",textAlign:"center"},children:"!"}),a("p",{style:{marginBottom:"20px",textAlign:"center",width:"100%",fontSize:"14px",lineHeight:"1.4"},children:i}),a("button",{className:"retry-button",onClick:$,style:{padding:"8px 20px",backgroundColor:"#2563eb",color:"white",borderRadius:"4px",border:"none",cursor:"pointer",fontWeight:"bold",fontSize:"14px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",transition:"background-color 0.2s ease"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#1d4ed8",onMouseOut:e=>e.currentTarget.style.backgroundColor="#2563eb",children:"Retry"})]})})]})}function t(){const{takeSnapshot:t}=k(),{isFullscreen:n,setIsFullscreen:u,toggleFullscreen:g}=y(),[m,h]=r([]),[p,f]=r(!0),[b,x]=r((()=>{const e=new URLSearchParams(window.location.search).get("layout");return e||(sessionStorage.getItem("webrtc_layout")||"4")})),[w,C]=r((()=>{const e=new URLSearchParams(window.location.search).get("stream");return e||(sessionStorage.getItem("webrtc_selected_stream")||"")})),[I,R]=r((()=>{const e=new URLSearchParams(window.location.search).get("page");if(e)return Math.max(0,parseInt(e,10)-1);const t=sessionStorage.getItem("webrtc_current_page");return t?Math.max(0,parseInt(t,10)-1):0})),T=c();o((()=>{S(),N()}),[]);const{data:E,isLoading:F,error:j}=s("streams","/api/streams",{timeout:15e3,retries:2,retryDelay:1e3});o((()=>{f(F)}),[F]),o((()=>{E&&Array.isArray(E)&&(async()=>{try{const e=await L(E);if(e.length>0){h(e);const t=new URLSearchParams(window.location.search).get("stream");t&&e.some((e=>e.name===t))?C(t):w&&e.some((e=>e.name===w))||C(e[0].name)}else console.warn("No streams available for WebRTC view after filtering")}catch(e){console.error("Error processing streams:",e),l("Error processing streams: "+e.message)}})()}),[E,w]),o((()=>{if(0===m.length)return;console.log("Updating URL parameters");const e=new URL(window.location);0===I?e.searchParams.delete("page"):e.searchParams.set("page",I+1),"4"!==b?e.searchParams.set("layout",b):e.searchParams.delete("layout"),"1"===b&&w?e.searchParams.set("stream",w):e.searchParams.delete("stream"),window.history.replaceState({},"",e),I>0?sessionStorage.setItem("webrtc_current_page",(I+1).toString()):sessionStorage.removeItem("webrtc_current_page"),"4"!==b?sessionStorage.setItem("webrtc_layout",b):sessionStorage.removeItem("webrtc_layout"),"1"===b&&w?sessionStorage.setItem("webrtc_selected_stream",w):sessionStorage.removeItem("webrtc_selected_stream")}),[I,b,w,m.length]);const L=async e=>{try{if(!e||!Array.isArray(e))return console.warn("No streams data provided to filter"),[];const t=e.map((async e=>{try{const t=e.id||e.name;return await T.fetchQuery({queryKey:["stream-details",t],queryFn:async()=>{const r=await fetch(`/api/streams/${encodeURIComponent(t)}`);if(!r.ok)throw new Error(`Failed to load details for stream ${e.name}`);return r.json()},staleTime:3e4})}catch(t){return console.error(`Error loading details for stream ${e.name}:`,t),e}})),r=await Promise.all(t);console.log("Loaded detailed streams for WebRTC view:",r);const n=r.filter((e=>e.is_deleted?(console.log(`Stream ${e.name} is soft deleted, filtering out`),!1):e.enabled?!!e.streaming_enabled||(console.log(`Stream ${e.name} is not configured for streaming, filtering out`),!1):(console.log(`Stream ${e.name} is inactive, filtering out`),!1)));return console.log("Filtered streams for WebRTC view:",n),n||[]}catch(t){return console.error("Error filtering streams for WebRTC view:",t),l("Error processing streams: "+t.message),[]}},W=i((()=>{switch(b){case"1":return 1;case"2":return 2;case"4":default:return 4;case"6":return 6;case"9":return 9;case"16":return 16}}),[b]),M=i((()=>{let e=m;if("1"===b&&w)e=m.filter((e=>e.name===w));else{const t=W(),r=Math.ceil(m.length/t);if(I>=r&&r>0)return[];const n=I*t,o=Math.min(n+t,m.length);e=m.slice(n,o)}return e}),[m,b,w,I]);o((()=>{if(0===m.length)return;const e=W(),t=Math.ceil(m.length/e);I>=t&&R(Math.max(0,t-1))}),[m,b,I,W]);const P=(e,t,r)=>{t&&(t.preventDefault(),t.stopPropagation()),e?(console.log(`Toggling fullscreen for stream: ${e}`),r?document.fullscreenElement?(console.log("Exiting fullscreen mode"),document.exitFullscreen()):(console.log("Entering fullscreen mode for video cell"),r.requestFullscreen().catch((e=>{console.error(`Error attempting to enable fullscreen: ${e.message}`),l(`Could not enable fullscreen mode: ${e.message}`)}))):console.error("Video cell element not provided for fullscreen toggle")):console.error("Stream name not provided for fullscreen toggle")},_=d((()=>M()),[m,b,w,I,W]);return a("section",{id:"live-page",className:"page "+(n?"fullscreen-mode":""),children:[a($,{}),a(v,{isFullscreen:n,setIsFullscreen:u,targetId:"live-page"}),a("div",{className:"page-header flex justify-between items-center mb-4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow",style:{position:"relative",zIndex:10,pointerEvents:"auto"},children:[a("div",{className:"flex items-center space-x-2",children:[a("h2",{className:"text-xl font-bold mr-4",children:"Live View"}),a("div",{className:"flex space-x-2",children:a("button",{id:"hls-toggle-btn",className:"px-3 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 inline-block text-center",style:{position:"relative",zIndex:50},onClick:()=>{window.location.href="/hls.html"},children:"HLS View"})})]}),a("div",{className:"controls flex items-center space-x-2",children:[a("div",{className:"flex items-center",children:[a("label",{htmlFor:"layout-selector",className:"mr-2",children:"Layout:"}),a("select",{id:"layout-selector",className:"px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600",value:b,onChange:e=>{const t=e.target.value;x(t),R(0)},children:[a("option",{value:"1",children:"1 Stream"}),a("option",{value:"2",children:"2 Streams"}),a("option",{value:"4",children:"4 Streams"}),a("option",{value:"6",children:"6 Streams"}),a("option",{value:"9",children:"9 Streams"}),a("option",{value:"16",children:"16 Streams"})]})]}),"1"===b&&a("div",{className:"flex items-center",children:[a("label",{htmlFor:"stream-selector",className:"mr-2",children:"Stream:"}),a("select",{id:"stream-selector",className:"px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600",value:w,onChange:e=>{const t=e.target.value;C(t)},children:m.map((e=>a("option",{value:e.name,children:e.name},e.name)))})]}),a("button",{id:"fullscreen-btn",className:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 focus:outline-none",onClick:()=>g(),title:"Toggle Fullscreen",children:a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})})})]})]}),a("div",{className:"flex flex-col space-y-4 h-full",children:[a("div",{id:"video-grid",className:`video-container layout-${b}`,children:F?a("div",{className:"flex justify-center items-center col-span-full row-span-full h-64 w-full",style:{pointerEvents:"none",zIndex:1},children:a("div",{className:"flex flex-col items-center justify-center py-8",children:[a("div",{className:"inline-block animate-spin rounded-full border-4 border-gray-300 dark:border-gray-600 border-t-blue-600 dark:border-t-blue-500 w-16 h-16"}),a("p",{className:"mt-4 text-gray-700 dark:text-gray-300",children:"Loading streams..."})]})}):p&&!F?a("div",{className:"flex justify-center items-center col-span-full row-span-full h-64 w-full",style:{pointerEvents:"none",position:"relative",zIndex:1},children:a("div",{className:"flex flex-col items-center justify-center py-8",children:[a("div",{className:"inline-block animate-spin rounded-full border-4 border-gray-300 dark:border-gray-600 border-t-blue-600 dark:border-t-blue-500 w-16 h-16"}),a("p",{className:"mt-4 text-gray-700 dark:text-gray-300",children:"Loading streams..."})]})}):j?a("div",{className:"placeholder flex flex-col justify-center items-center col-span-full row-span-full bg-white dark:bg-gray-800 rounded-lg shadow-md text-center p-8",children:[a("p",{className:"mb-6 text-gray-600 dark:text-gray-300 text-lg",children:["Error loading streams: ",j.message]}),a("button",{onClick:()=>window.location.reload(),className:"btn-primary px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Retry"})]}):0===m.length?a("div",{className:"placeholder flex flex-col justify-center items-center col-span-full row-span-full bg-white dark:bg-gray-800 rounded-lg shadow-md text-center p-8",children:[a("p",{className:"mb-6 text-gray-600 dark:text-gray-300 text-lg",children:"No streams configured"}),a("a",{href:"streams.html",className:"btn-primary px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Configure Streams"})]}):_.map((t=>a(e,{stream:t,onToggleFullscreen:P,streamId:t.name},t.name)))}),"1"!==b&&m.length>W()?a("div",{className:"pagination-controls flex justify-center items-center space-x-4 mt-4",children:[a("button",{className:"px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>{console.log("Changing to previous page"),R(Math.max(0,I-1))},disabled:0===I,children:"Previous"}),a("span",{className:"text-gray-700 dark:text-gray-300",children:["Page ",I+1," of ",Math.ceil(m.length/W())]}),a("button",{className:"px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>{console.log("Changing to next page");const e=Math.ceil(m.length/W());R(Math.min(e-1,I+1))},disabled:I>=Math.ceil(m.length/W())-1,children:"Next"})]}):null]})]})}function E(){const[e,n]=r(!1),[c,s]=r(!0);return o((()=>{!async function(){try{const e=await fetch("/api/settings");if(!e.ok)return console.error("Failed to fetch settings:",e.status,e.statusText),void s(!1);(await e.json()).webrtc_disabled?(console.log("WebRTC is disabled, using HLS view"),n(!0)):(console.log("WebRTC is enabled, using WebRTC view"),n(!1))}catch(e){console.error("Error checking WebRTC status:",e)}finally{s(!1)}}()}),[]),c?a("div",{className:"loading",children:"Loading..."}):a(p,{children:e?a(x,{isWebRTCDisabled:!0}):a(t,{})})}document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("main-content");e&&u(a(h,{client:g,children:[a(R,{}),a(m,{}),a(E,{}),a(T,{})]}),e)}))}}}));
//# sourceMappingURL=index-legacy-BwpXE2Xo.js.map
