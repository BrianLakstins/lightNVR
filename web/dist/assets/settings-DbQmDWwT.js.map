{"version":3,"file":"settings-DbQmDWwT.js","sources":["../../js/components/preact/SettingsView.jsx","../../js/pages/settings-page.jsx"],"sourcesContent":["/**\n * LightNVR Web Interface SettingsView Component\n * Preact component for the settings page\n */\n\nimport { useState, useEffect } from 'preact/hooks';\nimport { showStatusMessage } from './ToastContainer.jsx';\nimport { ContentLoader } from './LoadingIndicator.jsx';\nimport { useQuery, useMutation, fetchJSON } from '../../query-client.js';\n\n/**\n * SettingsView component\n * @returns {JSX.Element} SettingsView component\n */\nexport function SettingsView() {\n  const [settings, setSettings] = useState({\n    logLevel: '2',\n    storagePath: '/var/lib/lightnvr/recordings',\n    storagePathHls: '', // New field for HLS storage path\n    maxStorage: '0',\n    retention: '30',\n    autoDelete: true,\n    dbPath: '/var/lib/lightnvr/lightnvr.db',\n    webPort: '8080',\n    authEnabled: true,\n    username: 'admin',\n    password: 'admin',\n    webrtcDisabled: false, // Whether WebRTC is disabled (use HLS only)\n    bufferSize: '1024',\n    useSwap: true,\n    swapSize: '128',\n    detectionModelsPath: '',\n    defaultDetectionThreshold: 50,\n    defaultPreBuffer: 5,\n    defaultPostBuffer: 10\n  });\n  \n  // Fetch settings using useQuery\n  const { \n    data: settingsData, \n    isLoading, \n    error,\n    refetch \n  } = useQuery(\n    ['settings'], \n    '/api/settings',\n    {\n      timeout: 15000, // 15 second timeout\n      retries: 2,     // Retry twice\n      retryDelay: 1000 // 1 second between retries\n    }\n  );\n\n  // Save settings mutation\n  const saveSettingsMutation = useMutation({\n    mutationKey: ['saveSettings'],\n    mutationFn: async (mappedSettings) => {\n      return await fetchJSON('/api/settings', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(mappedSettings),\n        timeout: 20000, // 20 second timeout for saving settings\n        retries: 1,     // Retry once\n        retryDelay: 2000 // 2 seconds between retries\n      });\n    },\n    onSuccess: () => {\n      showStatusMessage('Settings saved successfully');\n      refetch(); // Refresh settings after saving\n    },\n    onError: (error) => {\n      console.error('Error saving settings:', error);\n      showStatusMessage(`Error saving settings: ${error.message}`);\n    }\n  });\n\n  // Update settings state when data is loaded\n  useEffect(() => {\n    if (settingsData) {\n      console.log('Settings loaded:', settingsData);\n      \n      // Map backend property names to frontend property names\n      const mappedData = {\n        logLevel: settingsData.log_level?.toString() || '',\n        storagePath: settingsData.storage_path || '',\n        storagePathHls: settingsData.storage_path_hls || '', // Map the HLS storage path\n        maxStorage: settingsData.max_storage_size?.toString() || '',\n        retention: settingsData.retention_days?.toString() || '',\n        autoDelete: settingsData.auto_delete_oldest || false,\n        dbPath: settingsData.db_path || '',\n        webPort: settingsData.web_port?.toString() || '',\n        authEnabled: settingsData.web_auth_enabled || false,\n        username: settingsData.web_username || '',\n        password: settingsData.web_password || '',\n        webrtcDisabled: settingsData.webrtc_disabled || false,\n        bufferSize: settingsData.buffer_size?.toString() || '',\n        useSwap: settingsData.use_swap || false,\n        swapSize: settingsData.swap_size?.toString() || '',\n        detectionModelsPath: settingsData.models_path || '',\n        defaultDetectionThreshold: settingsData.default_detection_threshold || 50,\n        defaultPreBuffer: settingsData.pre_detection_buffer?.toString() || '5',\n        defaultPostBuffer: settingsData.post_detection_buffer?.toString() || '10'\n      };\n      \n      // Update state with loaded settings\n      setSettings(prev => ({\n        ...prev,\n        ...mappedData\n      }));\n    }\n  }, [settingsData]);\n  \n  // Save settings\n  const saveSettings = () => {\n    // Map frontend property names to backend property names\n    const mappedSettings = {\n      log_level: parseInt(settings.logLevel, 10),\n      storage_path: settings.storagePath,\n      storage_path_hls: settings.storagePathHls, // Include the HLS storage path\n      max_storage_size: parseInt(settings.maxStorage, 10),\n      retention_days: parseInt(settings.retention, 10),\n      auto_delete_oldest: settings.autoDelete,\n      db_path: settings.dbPath,\n      web_port: parseInt(settings.webPort, 10),\n      web_auth_enabled: settings.authEnabled,\n      web_username: settings.username,\n      web_password: settings.password,\n      webrtc_disabled: settings.webrtcDisabled,\n      buffer_size: parseInt(settings.bufferSize, 10),\n      use_swap: settings.useSwap,\n      swap_size: parseInt(settings.swapSize, 10),\n      models_path: settings.detectionModelsPath,\n      default_detection_threshold: settings.defaultDetectionThreshold,\n      pre_detection_buffer: parseInt(settings.defaultPreBuffer, 10),\n      post_detection_buffer: parseInt(settings.defaultPostBuffer, 10)\n    };\n    \n    // Use mutation to save settings\n    saveSettingsMutation.mutate(mappedSettings);\n  };\n  \n  // Handle input change\n  const handleInputChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    \n    setSettings(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n  \n  // Handle threshold slider change\n  const handleThresholdChange = (e) => {\n    const value = parseInt(e.target.value, 10);\n    setSettings(prev => ({\n      ...prev,\n      defaultDetectionThreshold: value\n    }));\n  };\n\n  return (\n    <section id=\"settings-page\" class=\"page\">\n      <div class=\"page-header flex justify-between items-center mb-4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow\">\n        <h2 class=\"text-xl font-bold\">Settings</h2>\n        <div class=\"controls\">\n          <button \n            id=\"save-settings-btn\" \n            class=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800\"\n            onClick={saveSettings}\n          >\n            Save Settings\n          </button>\n        </div>\n      </div>\n      \n      <ContentLoader\n        isLoading={isLoading}\n        hasData={!!settingsData}\n        loadingMessage=\"Loading settings...\"\n        emptyMessage=\"No settings available. Please try again later.\"\n      >\n        <div class=\"settings-container space-y-6\">\n          <div class=\"settings-group bg-white dark:bg-gray-800 rounded-lg shadow p-4\">\n            <h3 class=\"text-lg font-semibold mb-4 pb-2 border-b border-gray-200 dark:border-gray-700\">General Settings</h3>\n            <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n              <label for=\"setting-log-level\" class=\"font-medium\">Log Level</label>\n              <select \n                id=\"setting-log-level\" \n                name=\"logLevel\"\n                class=\"col-span-2 p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                value={settings.logLevel}\n                onChange={handleInputChange}\n              >\n                <option value=\"0\">Error</option>\n                <option value=\"1\">Warning</option>\n                <option value=\"2\">Info</option>\n                <option value=\"3\">Debug</option>\n              </select>\n            </div>\n          </div>\n          <div class=\"settings-group bg-white dark:bg-gray-800 rounded-lg shadow p-4\">\n          <h3 class=\"text-lg font-semibold mb-4 pb-2 border-b border-gray-200 dark:border-gray-700\">Storage Settings</h3>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-storage-path\" class=\"font-medium\">Storage Path</label>\n            <input \n              type=\"text\" \n              id=\"setting-storage-path\" \n              name=\"storagePath\"\n              class=\"col-span-2 p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              value={settings.storagePath}\n              onChange={handleInputChange}\n            />\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-storage-path-hls\" class=\"font-medium\">HLS Storage Path</label>\n            <div class=\"col-span-2\">\n              <input \n                type=\"text\" \n                id=\"setting-storage-path-hls\" \n                name=\"storagePathHls\"\n                class=\"w-full p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                value={settings.storagePathHls}\n                onChange={handleInputChange}\n              />\n              <span class=\"hint text-sm text-gray-500 dark:text-gray-400\">Optional path for HLS segments. If not specified, Storage Path will be used.</span>\n            </div>\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-max-storage\" class=\"font-medium\">Maximum Storage Size (GB)</label>\n            <div class=\"col-span-2 flex items-center\">\n              <input \n                type=\"number\" \n                id=\"setting-max-storage\" \n                name=\"maxStorage\"\n                min=\"0\" \n                class=\"p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                value={settings.maxStorage}\n                onChange={handleInputChange}\n              />\n              <span class=\"hint ml-2 text-sm text-gray-500 dark:text-gray-400\">0 = unlimited</span>\n            </div>\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-retention\" class=\"font-medium\">Retention Period (days)</label>\n            <input \n              type=\"number\" \n              id=\"setting-retention\" \n              name=\"retention\"\n              min=\"1\" \n              class=\"col-span-2 p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              value={settings.retention}\n              onChange={handleInputChange}\n            />\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-auto-delete\" class=\"font-medium\">Auto Delete Oldest</label>\n            <div class=\"col-span-2\">\n              <input \n                type=\"checkbox\" \n                id=\"setting-auto-delete\" \n                name=\"autoDelete\"\n                class=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:bg-gray-700 dark:border-gray-600\"\n                checked={settings.autoDelete}\n                onChange={handleInputChange}\n              />\n            </div>\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-db-path\" class=\"font-medium\">Database Path</label>\n            <input \n              type=\"text\" \n              id=\"setting-db-path\" \n              name=\"dbPath\"\n              class=\"col-span-2 p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              value={settings.dbPath}\n              onChange={handleInputChange}\n            />\n          </div>\n          </div>\n          \n          <div class=\"settings-group bg-white dark:bg-gray-800 rounded-lg shadow p-4\">\n          <h3 class=\"text-lg font-semibold mb-4 pb-2 border-b border-gray-200 dark:border-gray-700\">Web Interface Settings</h3>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-web-port\" class=\"font-medium\">Web Port</label>\n            <input \n              type=\"number\" \n              id=\"setting-web-port\" \n              name=\"webPort\"\n              min=\"1\" \n              max=\"65535\" \n              class=\"col-span-2 p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              value={settings.webPort}\n              onChange={handleInputChange}\n            />\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-auth-enabled\" class=\"font-medium\">Enable Authentication</label>\n            <div class=\"col-span-2\">\n              <input \n                type=\"checkbox\" \n                id=\"setting-auth-enabled\" \n                name=\"authEnabled\"\n                class=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:bg-gray-700 dark:border-gray-600\"\n                checked={settings.authEnabled}\n                onChange={handleInputChange}\n              />\n            </div>\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-username\" class=\"font-medium\">Username</label>\n            <input \n              type=\"text\" \n              id=\"setting-username\" \n              name=\"username\"\n              class=\"col-span-2 p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              value={settings.username}\n              onChange={handleInputChange}\n            />\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-password\" class=\"font-medium\">Password</label>\n            <input \n              type=\"password\" \n              id=\"setting-password\" \n              name=\"password\"\n              class=\"col-span-2 p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              value={settings.password}\n              onChange={handleInputChange}\n            />\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-webrtc-disabled\" class=\"font-medium\">Disable WebRTC (Use HLS Only)</label>\n            <div class=\"col-span-2\">\n              <input \n                type=\"checkbox\" \n                id=\"setting-webrtc-disabled\" \n                name=\"webrtcDisabled\"\n                class=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:bg-gray-700 dark:border-gray-600\"\n                checked={settings.webrtcDisabled}\n                onChange={handleInputChange}\n              />\n              <span class=\"hint ml-2 text-sm text-gray-500 dark:text-gray-400\">When enabled, all streams will use HLS instead of WebRTC</span>\n            </div>\n          </div>\n          </div>\n          \n          <div class=\"settings-group bg-white dark:bg-gray-800 rounded-lg shadow p-4\">\n          <h3 class=\"text-lg font-semibold mb-4 pb-2 border-b border-gray-200 dark:border-gray-700\">Memory Optimization</h3>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-buffer-size\" class=\"font-medium\">Buffer Size (KB)</label>\n            <input \n              type=\"number\" \n              id=\"setting-buffer-size\" \n              name=\"bufferSize\"\n              min=\"128\" \n              class=\"col-span-2 p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              value={settings.bufferSize}\n              onChange={handleInputChange}\n            />\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-use-swap\" class=\"font-medium\">Use Swap File</label>\n            <div class=\"col-span-2\">\n              <input \n                type=\"checkbox\" \n                id=\"setting-use-swap\" \n                name=\"useSwap\"\n                class=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:bg-gray-700 dark:border-gray-600\"\n                checked={settings.useSwap}\n                onChange={handleInputChange}\n              />\n            </div>\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-swap-size\" class=\"font-medium\">Swap Size (MB)</label>\n            <input \n              type=\"number\" \n              id=\"setting-swap-size\" \n              name=\"swapSize\"\n              min=\"32\" \n              class=\"col-span-2 p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              value={settings.swapSize}\n              onChange={handleInputChange}\n            />\n          </div>\n          </div>\n          \n          <div class=\"settings-group bg-white dark:bg-gray-800 rounded-lg shadow p-4\">\n          <h3 class=\"text-lg font-semibold mb-4 pb-2 border-b border-gray-200 dark:border-gray-700\">Detection-Based Recording</h3>\n          <div class=\"setting mb-4\">\n            <p class=\"setting-description mb-2 text-gray-700 dark:text-gray-300\">\n              Configure detection-based recording for streams. When enabled, recordings will only be saved when objects are detected.\n            </p>\n            <p class=\"setting-description mb-2 text-gray-700 dark:text-gray-300\">\n              <strong>Motion Detection:</strong> Built-in motion detection is available without requiring any external models. \n              Select \"motion\" as the detection model in stream settings to use this feature.\n            </p>\n            <p class=\"setting-description mb-2 text-gray-700 dark:text-gray-300\">\n              <strong>Optimized Motion Detection:</strong> Memory and CPU optimized motion detection for embedded devices.\n              Select \"motion\" as the detection model in stream settings to use this feature.\n            </p>\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-detection-models-path\" class=\"font-medium\">Detection Models Path</label>\n            <div class=\"col-span-2\">\n              <input \n                type=\"text\" \n                id=\"setting-detection-models-path\" \n                name=\"detectionModelsPath\"\n                placeholder=\"/var/lib/lightnvr/models\" \n                class=\"w-full p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                value={settings.detectionModelsPath}\n                onChange={handleInputChange}\n              />\n              <span class=\"hint text-sm text-gray-500 dark:text-gray-400\">Directory where detection models are stored</span>\n            </div>\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-default-detection-threshold\" class=\"font-medium\">Default Detection Threshold</label>\n            <div class=\"col-span-2\">\n              <div class=\"flex items-center\">\n                <input \n                  type=\"range\" \n                  id=\"setting-default-detection-threshold\" \n                  name=\"defaultDetectionThreshold\"\n                  min=\"0\" \n                  max=\"100\" \n                  step=\"1\" \n                  class=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700\"\n                  value={settings.defaultDetectionThreshold}\n                  onChange={handleThresholdChange}\n                />\n                <span id=\"threshold-value\" class=\"ml-2 min-w-[3rem] text-center\">{settings.defaultDetectionThreshold}%</span>\n              </div>\n              <span class=\"hint text-sm text-gray-500 dark:text-gray-400\">Confidence threshold for detection (0-100%)</span>\n            </div>\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-default-pre-buffer\" class=\"font-medium\">Default Pre-detection Buffer (seconds)</label>\n            <div class=\"col-span-2\">\n              <input \n                type=\"number\" \n                id=\"setting-default-pre-buffer\" \n                name=\"defaultPreBuffer\"\n                min=\"0\" \n                max=\"60\" \n                class=\"p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                value={settings.defaultPreBuffer}\n                onChange={handleInputChange}\n              />\n              <span class=\"hint text-sm text-gray-500 dark:text-gray-400\">Seconds of video to keep before detection</span>\n            </div>\n          </div>\n          <div class=\"setting grid grid-cols-1 md:grid-cols-3 gap-4 items-center mb-4\">\n            <label for=\"setting-default-post-buffer\" class=\"font-medium\">Default Post-detection Buffer (seconds)</label>\n            <div class=\"col-span-2\">\n              <input \n                type=\"number\" \n                id=\"setting-default-post-buffer\" \n                name=\"defaultPostBuffer\"\n                min=\"0\" \n                max=\"300\" \n                class=\"p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                value={settings.defaultPostBuffer}\n                onChange={handleInputChange}\n              />\n              <span class=\"hint text-sm text-gray-500 dark:text-gray-400\">Seconds of video to keep after detection</span>\n            </div>\n          </div>\n          </div>\n        </div>\n      </ContentLoader>\n    </section>\n  );\n}\n","/**\n * LightNVR Web Interface Streams Page\n * Entry point for the streams page\n */\n\nimport { render } from 'preact';\nimport { SettingsView } from '../components/preact/SettingsView.jsx';\nimport { QueryClientProvider, queryClient } from '../query-client.js';\nimport {Header} from \"../components/preact/Header.jsx\";\nimport {Footer} from \"../components/preact/Footer.jsx\";\nimport { ToastContainer } from \"../components/preact/ToastContainer.jsx\";\n\n// Render the StreamsView component when the DOM is loaded\ndocument.addEventListener('DOMContentLoaded', () => {\n    // Get the container element\n    const container = document.getElementById('main-content');\n\n    if (container) {\n        render(\n            <QueryClientProvider client={queryClient}>\n                <Header />\n                <ToastContainer />\n                <SettingsView />\n                <Footer />\n            </QueryClientProvider>,\n            container\n        );\n    }\n});\n"],"names":["SettingsView","settings","setSettings","useState","settingsData","isLoading","error","refetch","useQuery","saveSettingsMutation","useMutation","mappedSettings","fetchJSON","showStatusMessage","useEffect","mappedData","_a","_b","_c","_d","_e","_f","_g","_h","prev","saveSettings","handleInputChange","e","name","value","type","checked","handleThresholdChange","jsxs","jsx","ContentLoader","container","render","QueryClientProvider","queryClient","Header","ToastContainer","Footer"],"mappings":"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"}